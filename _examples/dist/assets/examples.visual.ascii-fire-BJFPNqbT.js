import{r as h,j as e,G as H,e as C}from"./index-BqTI3VMm.js";const de=function(){const D=h.useRef(null),W=h.useRef(0),v=h.useRef([]),[y,J]=h.useState(!0),[R,K]=h.useState(.1),[A,Q]=h.useState(1.2),[P,U]=h.useState(.008),[q,Z]=h.useState("flames"),[G,_]=h.useState(!1),[L,ee]=h.useState(!0),[z,te]=h.useState(.95),[N,se]=h.useState(.4),[O,ne]=h.useState("inferno"),[k,le]=h.useState(150),E=h.useRef([]),[T,ae]=h.useState(!0),oe={classic:[" ",".",":",";","!","*","#","$","@"],blocks:[" ","â–‘","â–’","â–“","â–ˆ","â–ˆ","â–ˆ","â–ˆ","â–ˆ"],flames:[" ",".","Â°","o","O","âˆ©","âŒ’","â¨€","â–ˆ"],ascii:[" ",".","-","~","^","*","%","#","@"],organic:[" ","â‹…","âˆ˜","â—","â—‰","â¬¢","â¬¡","â—†","â–ˆ"],technical:[" ","â–«","â–ª","â–¬","â– ","â–²","â–¼","â—†","â–ˆ"],mystical:[" ","Â·","âˆ—","âœ¦","âœ§","âœ©","âœª","âœ¯","â˜…"]},re={classic:["#000000","#440000","#880000","#CC0000","#FF0000","#FF4400","#FF8800","#FFCC00","#FFFFFF"],blue:["#000011","#000044","#000088","#0000CC","#0044FF","#4488FF","#88CCFF","#CCFFFF","#FFFFFF"],purple:["#110011","#440044","#880088","#CC00CC","#FF00FF","#FF44FF","#FF88FF","#FFCCFF","#FFFFFF"],green:["#001100","#004400","#008800","#00CC00","#00FF00","#44FF44","#88FF88","#CCFFCC","#FFFFFF"],inferno:["#000000","#1a0000","#4d0000","#800000","#cc0000","#ff3300","#ff6600","#ff9900","#ffcc00"],plasma:["#0d0887","#46039f","#7201a8","#9c179e","#bd3786","#d8576b","#ed7953","#fb9f3a","#fdca26"],arctic:["#000033","#000066","#003399","#0066cc","#3399ff","#66ccff","#99ddff","#cceeFF","#ffffff"]};h.useEffect(()=>{const t=D.current;if(!t)return;const r=t.getContext("2d");if(!r)return;let i=0,n=0;const f=20,x=()=>{const l=window.getComputedStyle(t),a=Number.parseInt(l.width),s=Number.parseInt(l.height);console.log("ASCII Fire: resizeCanvas called",{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,computedWidth:a,computedHeight:s,clientWidth:t.clientWidth,clientHeight:t.clientHeight});const o=t.offsetWidth>0?t.offsetWidth:a,c=t.offsetHeight>0?t.offsetHeight:s;if(t.width=o,t.height=c,i=Math.floor(t.width/f),n=Math.floor(t.height/f),console.log("ASCII Fire: Canvas sizing result",{effectiveWidth:o,effectiveHeight:c,cols:i,rows:n,cellSize:f}),i<=0||n<=0){console.warn("ASCII Fire: Canvas dimensions invalid, skipping initialization",{cols:i,rows:n,width:t.width,height:t.height,offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,computedWidth:a,computedHeight:s});return}v.current=Array(n).fill(null).map(()=>Array(i).fill(0));for(let d=0;d<i;d++)v.current[n-1][d]=8;console.log("ASCII Fire: Fire buffer initialized",{rows:n,cols:i,bottomRowSample:v.current[n-1].slice(0,5)}),E.current=[];for(let d=0;d<k;d++)E.current.push(F(i,n))},F=(l,a)=>({x:Math.random()*l,y:a-1,vx:(Math.random()-.5)*2*N,vy:-Math.random()*3-1,life:Math.random()*60+30,char:["*","Â·","Â°","â‹…","âœ§"][Math.floor(Math.random()*5)]}),j=(l,a)=>{if(!T)return;const s=E.current;for(let o=s.length-1;o>=0;o--){const c=s[o];c.x+=c.vx,c.y+=c.vy,c.vy+=.1,c.life--,(c.life<=0||c.y<0||c.x<0||c.x>=l)&&s.splice(o,1)}for(;s.length<k&&Math.random()<.5;)s.push(F(l,a))},w=l=>{const a=v.current;for(let s=1;s<n-1;s++)for(let o=1;o<i-1;o++){const c=a[s+1][o]||0,d=a[s][o-1]||0,g=a[s][o+1]||0,u=a[s-1][o]||0,b=N*H.noise2D(o*.05,l*.002),M=N*H.noise2D(o*.03,l*.003),S=Math.floor(R*3*H.noise2D(o*.1,l*.001)+b),p=C(o+S,0,i-1);let m=(c+d+g+u+a[s][p])/5;const V=1-s/n*z,X=P*(2+Math.random()*1)*V;m-=X,m+=(Math.random()-.5)*.8+M*.5,m=Math.max(m*1.05,0),a[s][o]=C(m,0,8)}for(let s=0;s<i;s++){const o=A*(.9+.3*H.noise2D(s*.1,l*.003));if(a[n-1][s]=C(8*o,6,8),n>1){const c=A*(.7+.3*H.noise2D(s*.08,l*.004));a[n-2][s]=Math.max(a[n-2][s],C(6*c,4,8))}}j(i,n)},I=()=>{const l=v.current;if(!l||l.length===0){console.warn("ASCII Fire: No fire buffer to render");return}const a=oe[q],s=re[O];r.fillStyle="#000000",r.fillRect(0,0,t.width,t.height);const o=l[n-1]?l[n-1].slice(0,10):[],c=l[Math.floor(n/2)]?l[Math.floor(n/2)].slice(0,10):[];console.log("ASCII Fire: Rendering frame",{rows:n,cols:i,bufferSize:l.length,bottomRowSample:o,middleRowSample:c}),r.font=`${f}px "Courier New", monospace`,r.textBaseline="top";let d=0;for(let g=0;g<n;g++)for(let u=0;u<i;u++){const b=l[g][u],M=Math.floor(b),S=a[C(M,0,a.length-1)];if(s[C(M,0,s.length-1)],g>=n-6){const p=a[Math.min(8,a.length-1)],m=s[Math.min(8,s.length-1)];r.fillStyle=m,r.fillText(p,u*f,g*f),d++}else if(b>.5||S!==" "){const p=Math.min(b*1.3,8),m=Math.floor(p),V=a[C(m,0,a.length-1)],X=s[C(m,0,s.length-1)];r.fillStyle=X,r.fillText(V,u*f,g*f),d++}}Math.random()<.017&&console.log("ASCII Fire: Visible chars drawn:",d),T&&(E.current.forEach(u=>{const b=Math.max(0,u.life/60),M=Math.max(6,f*.8);r.font=`${M}px "Courier New", monospace`;const S=u.x*f,p=u.y*f;S>=0&&S<t.width&&p>=0&&p<t.height&&(r.shadowBlur=10,r.shadowColor=`rgba(255, 150, 50, ${b*.8})`,r.fillStyle=`rgba(255, 220, 120, ${b})`,r.fillText(u.char,S,p),r.shadowBlur=0)}),r.font=`${f}px "Courier New", monospace`)},B=l=>{if(!y){console.log("ASCII Fire: Animation stopped");return}w(l),I(),W.current=requestAnimationFrame(B)},$=()=>{const l=window.getComputedStyle(t),a=Number.parseInt(l.width),s=Number.parseInt(l.height);console.log("ASCII Fire: initCanvas attempt",{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,computedWidth:a,computedHeight:s,clientWidth:t.clientWidth,clientHeight:t.clientHeight});const o=t.offsetWidth>0||a>0,c=t.offsetHeight>0||s>0;o&&c?(console.log("ASCII Fire: Canvas dimensions valid, calling resizeCanvas"),x()):(console.log("ASCII Fire: Canvas not ready, retrying in 100ms"),setTimeout($,100))};return $(),window.addEventListener("resize",x),console.log("ASCII Fire: isPlaying =",y),y?(console.log("ASCII Fire: Starting animation"),W.current=requestAnimationFrame(B)):console.log("ASCII Fire: Animation not started - isPlaying is false"),()=>{window.removeEventListener("resize",x),W.current&&cancelAnimationFrame(W.current)}},[y,R,A,P,q,G,L,z,N,O,k,T]);const Y=t=>{const r=D.current;if(!r)return;const i=r.getBoundingClientRect(),n=Math.floor((t.clientX-i.left)/8),f=Math.floor((t.clientY-i.top)/8),x=v.current;if(f>=0&&f<x.length&&n>=0&&n<x[0].length)for(let F=-2;F<=2;F++)for(let j=-2;j<=2;j++){const w=f+F,I=n+j;if(w>=0&&w<x.length&&I>=0&&I<x[0].length){const B=Math.sqrt(j*j+F*F),$=Math.max(0,8-B*2);x[w][I]=Math.max(x[w][I],$)}}},ie=t=>{t.buttons===1&&Y(t)},ce=()=>{const t=v.current;for(let r=0;r<t.length-1;r++)for(let i=0;i<t[0].length;i++)t[r][i]=0};return e.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[e.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[e.jsx("h1",{className:"text-2xl font-bold text-orange-400 mb-4",children:"ðŸ”¥ ASCII Fire Simulation"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-orange-300 mb-2",children:"Animation"}),e.jsx("button",{onClick:()=>J(!y),className:`px-3 py-2 rounded font-medium transition-colors ${y?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:y?"Pause":"Play"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Intensity: ",Math.round(A*100),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1.5",step:"0.05",value:A,onChange:t=>Q(Number.parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Wind: ",R.toFixed(2)]}),e.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:R,onChange:t=>K(Number.parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Cooling: ",P.toFixed(3)]}),e.jsx("input",{type:"range",min:"0.005",max:"0.05",step:"0.005",value:P,onChange:t=>U(Number.parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-orange-300 mb-2",children:"Style"}),e.jsxs("select",{value:q,onChange:t=>Z(t.target.value),className:"px-2 py-1 bg-gray-800 text-orange-300 rounded border border-gray-600",children:[e.jsx("option",{value:"classic",children:"Classic ASCII"}),e.jsx("option",{value:"blocks",children:"Block Characters"}),e.jsx("option",{value:"flames",children:"Flame Symbols"}),e.jsx("option",{value:"ascii",children:"Symbols"}),e.jsx("option",{value:"organic",children:"Organic"}),e.jsx("option",{value:"technical",children:"Technical"}),e.jsx("option",{value:"mystical",children:"Mystical"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-orange-300 mb-2",children:"Color Scheme"}),e.jsxs("select",{value:O,onChange:t=>ne(t.target.value),className:"px-2 py-1 bg-gray-800 text-orange-300 rounded border border-gray-600",children:[e.jsx("option",{value:"classic",children:"Classic Fire"}),e.jsx("option",{value:"blue",children:"Blue Flame"}),e.jsx("option",{value:"purple",children:"Purple Flame"}),e.jsx("option",{value:"green",children:"Green Flame"}),e.jsx("option",{value:"inferno",children:"Inferno"}),e.jsx("option",{value:"plasma",children:"Plasma"}),e.jsx("option",{value:"arctic",children:"Arctic"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Fire Height: ",Math.round(z*100),"%"]}),e.jsx("input",{type:"range",min:"0.3",max:"1",step:"0.05",value:z,onChange:t=>te(Number.parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Turbulence: ",N.toFixed(2)]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:N,onChange:t=>se(Number.parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-orange-300 mb-2",children:["Particles: ",k]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:k,onChange:t=>le(Number.parseInt(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:ce,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition-colors",children:"Reset"}),e.jsxs("label",{className:"flex items-center text-orange-300 text-xs",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:t=>_(t.target.checked),className:"mr-1"}),"Temperature"]}),e.jsxs("label",{className:"flex items-center text-orange-300 text-xs",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:t=>ee(t.target.checked),className:"mr-1"}),"Sparkles"]}),e.jsxs("label",{className:"flex items-center text-orange-300 text-xs",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:t=>ae(t.target.checked),className:"mr-1"}),"Particles"]})]})]}),e.jsxs("div",{className:"text-orange-400 text-sm",children:[e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"Click and drag"})," to add heat sources to the fire!"]}),e.jsxs("p",{children:["ðŸŽ¨ ",e.jsx("strong",{children:"Choose styles and colors"})," for different flame effects!"]}),e.jsxs("p",{children:["âœ¨ ",e.jsx("strong",{children:"Enable particles and sparkles"})," for enhanced visual effects!"]}),e.jsx("p",{children:"Advanced fire simulation with heat diffusion, wind effects, turbulence, and particle systems"})]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("canvas",{ref:D,onClick:Y,onMouseMove:ie,className:"absolute inset-0 w-full h-full cursor-crosshair",style:{background:"#000000",maxWidth:"100%",height:"auto"}})})]})};export{de as component};
