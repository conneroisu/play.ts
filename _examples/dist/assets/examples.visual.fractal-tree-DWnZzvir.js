import{r as h,j as e,L as K,k as A,s as p,t as g,h as m,P as I,b as u,T as Q}from"./index-BqTI3VMm.js";const ee=function(){const f=h.useRef(null),w=h.useRef(),T=h.useRef(0),[l,X]=h.useState(null),[j,E]=h.useState(!1),[y,L]=h.useState(!1),[n,o]=h.useState({maxGenerations:8,branchAngle:25,lengthScale:.7,thicknessScale:.8,growthSpeed:2,branchProbability:.8,windStrength:0,colorMode:"natural",showLeaves:!0,animateGrowth:!0}),[v,Y]=h.useState("classic"),R=(s,t,r,a,c,i,d)=>({x:s,y:t,angle:r,length:a,generation:c,parent:d,children:[],isGrowing:!1,growthProgress:0,thickness:i}),z=(s,t)=>{const a=R(s,t,-I/2,80,0,12),c=i=>{if(i.generation>=n.maxGenerations)return;const d=i.generation===0?1:Math.random()<n.branchProbability?2:1;for(let x=0;x<d;x++){let b=i.angle;if(d===2){const J=n.branchAngle*I/180*(x===0?-1:1);b+=J+u(-.2,.2)}else i.generation>0&&(b+=u(-.3,.3));const N=i.length*n.lengthScale*u(.8,1.2),P=i.thickness*n.thicknessScale,S=i.x+A(i.angle)*i.length,C=i.y+p(i.angle)*i.length,k=R(S,C,b,N,i.generation+1,P,i);i.children.push(k),c(k)}};return c(a),a},H=s=>{switch(s){case"classic":o(t=>({...t,maxGenerations:8,branchAngle:25,lengthScale:.7,thicknessScale:.8,branchProbability:.8}));break;case"weeping":o(t=>({...t,maxGenerations:10,branchAngle:15,lengthScale:.85,thicknessScale:.9,branchProbability:.6}));break;case"pine":o(t=>({...t,maxGenerations:12,branchAngle:35,lengthScale:.6,thicknessScale:.75,branchProbability:.9}));break;case"oak":o(t=>({...t,maxGenerations:6,branchAngle:40,lengthScale:.8,thicknessScale:.85,branchProbability:.7}));break}},O=async()=>{if(!l)return;E(!0);const s=async t=>{for(t.isGrowing=!0;t.growthProgress<1;)t.growthProgress=Math.min(1,t.growthProgress+n.growthSpeed*.02),await new Promise(a=>setTimeout(a,16));t.isGrowing=!1;const r=t.children.map((a,c)=>new Promise(i=>{setTimeout(()=>{s(a).then(i)},c*100)}));await Promise.all(r)};l.growthProgress=0,await s(l),E(!1)},B=(s,t)=>{switch(n.colorMode){case"generation":{const r=s.generation*30%360;return g(m(r,70,40))}case"season":{const r=120-s.generation/n.maxGenerations*80;return g(m(r,60,35))}case"rainbow":{const r=(s.generation*45+t*50)%360;return g(m(r,80,50))}case"natural":default:{const r=25+s.generation*5,a=40-s.generation*3,c=20+s.generation*2;return g(m(r,a,c))}}},q=(s,t)=>{switch(n.colorMode){case"season":{const r=60+p(t*.5+s.x*.01)*40;return g(m(r,80,50))}case"rainbow":{const r=(t*100+s.x+s.y)%360;return g(m(r,70,60))}default:{const r=100+u(-20,20);return g(m(r,70,40))}}},V=(s,t,r)=>{if(!t.parent)return;const a=n.animateGrowth?t.growthProgress:1;if(a<=0)return;const c=n.windStrength*p(r*2+t.generation*.5)*.02,i=t.parent.angle+c,d=t.parent.x,x=t.parent.y,b=d+A(i)*t.parent.length*a,N=x+p(i)*t.parent.length*a;if(s.strokeStyle=B(t,r),s.lineWidth=t.parent.thickness*(1+t.generation*.1),s.lineCap="round",s.beginPath(),s.moveTo(d,x),s.lineTo(b,N),s.stroke(),n.showLeaves&&t.children.length===0&&a>.8){const P=3+u(-1,2);s.fillStyle=q(t,r);for(let S=0;S<3;S++){const C=b+u(-10,10),k=N+u(-10,10);s.beginPath(),s.arc(C,k,P,0,Q),s.fill()}}},F=(s,t,r)=>{t.parent&&V(s,t,r),t.children.forEach(a=>F(s,a,r))},M=()=>{const s=f.current,t=s==null?void 0:s.getContext("2d");if(!s||!t||!l)return;t.clearRect(0,0,s.width,s.height);const r=t.createLinearGradient(0,0,0,s.height);r.addColorStop(0,"#87CEEB"),r.addColorStop(1,"#98FB98"),t.fillStyle=r,t.fillRect(0,0,s.width,s.height),t.fillStyle="#8B4513",t.fillRect(0,s.height-20,s.width,20);const a=T.current;t.strokeStyle=B(l,a),t.lineWidth=l.thickness,t.lineCap="round";const c=n.animateGrowth?l.growthProgress:1;if(c>0){const i=l.x+A(l.angle)*l.length*c,d=l.y+p(l.angle)*l.length*c;t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(i,d),t.stroke()}F(t,l,a),j&&(t.fillStyle="rgba(0, 0, 0, 0.7)",t.fillRect(10,10,180,40),t.fillStyle="#ffffff",t.font="14px Arial",t.fillText("Growing...",20,30),t.fillText(`Generation: ${D(l)}`,20,50))},D=s=>{let t=s.generation;const r=a=>{a.growthProgress>0&&(t=Math.max(t,a.generation)),a.children.forEach(r)};return r(s),t},W=()=>{T.current+=.02,M(),y&&(w.current=requestAnimationFrame(W))},_=()=>{L(!0),w.current=requestAnimationFrame(W)},$=()=>{L(!1),w.current&&cancelAnimationFrame(w.current)},G=()=>{const s=f.current;if(!s)return;const t=z(s.width/2,s.height-20);X(t);const r=a=>{a.growthProgress=n.animateGrowth?0:1,a.isGrowing=!1,a.children.forEach(r)};r(t)};return h.useEffect(()=>{const s=f.current;s&&(s.width=800,s.height=600,G())},[]),h.useEffect(()=>{v!=="custom"&&H(v)},[v]),h.useEffect(()=>{G()},[n.maxGenerations,n.branchAngle,n.lengthScale,n.thicknessScale,n.branchProbability]),h.useEffect(()=>{y||M()},[l,n.colorMode,n.showLeaves,n.windStrength]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Fractal Tree Generator"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Interactive fractal tree generation with L-system-inspired growth patterns and customizable parameters."}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-800",children:"🌳 Watch trees grow organically with realistic branching patterns, wind effects, and seasonal colors"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx("button",{type:"button",onClick:_,disabled:y,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:"Start Animation"}),e.jsx("button",{type:"button",onClick:$,disabled:!y,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors",children:"Stop Animation"}),e.jsx("button",{type:"button",onClick:G,disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"New Tree"}),e.jsx("button",{type:"button",onClick:O,disabled:j||!l,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 transition-colors",children:j?"Growing...":"Animate Growth"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tree Type"}),e.jsxs("select",{value:v,onChange:s=>Y(s.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"classic",children:"Classic"}),e.jsx("option",{value:"weeping",children:"Weeping Willow"}),e.jsx("option",{value:"pine",children:"Pine Tree"}),e.jsx("option",{value:"oak",children:"Oak Tree"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color Mode"}),e.jsxs("select",{value:n.colorMode,onChange:s=>o(t=>({...t,colorMode:s.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"natural",children:"Natural Brown"}),e.jsx("option",{value:"generation",children:"By Generation"}),e.jsx("option",{value:"season",children:"Seasonal"}),e.jsx("option",{value:"rainbow",children:"Rainbow"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.showLeaves,onChange:s=>o(t=>({...t,showLeaves:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Leaves"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.animateGrowth,onChange:s=>o(t=>({...t,animateGrowth:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Animate Growth"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Wind Strength: ",n.windStrength.toFixed(1)]}),e.jsx("input",{type:"range",min:"0",max:"5",step:"0.1",value:n.windStrength,onChange:s=>o(t=>({...t,windStrength:Number(s.target.value)})),className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Generations: ",n.maxGenerations]}),e.jsx("input",{type:"range",min:"3",max:"12",value:n.maxGenerations,onChange:s=>o(t=>({...t,maxGenerations:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Branch Angle: ",n.branchAngle,"°"]}),e.jsx("input",{type:"range",min:"10",max:"60",value:n.branchAngle,onChange:s=>o(t=>({...t,branchAngle:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Length Scale: ",n.lengthScale.toFixed(2)]}),e.jsx("input",{type:"range",min:"0.5",max:"0.9",step:"0.05",value:n.lengthScale,onChange:s=>o(t=>({...t,lengthScale:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Branch Probability: ",n.branchProbability.toFixed(2)]}),e.jsx("input",{type:"range",min:"0.3",max:"1",step:"0.1",value:n.branchProbability,onChange:s=>o(t=>({...t,branchProbability:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Growth Speed: ",n.growthSpeed]}),e.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:n.growthSpeed,onChange:s=>o(t=>({...t,growthSpeed:Number(s.target.value)})),className:"w-full"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("canvas",{ref:f,className:"border border-gray-300 rounded-lg bg-gradient-to-b from-blue-200 to-green-200",style:{maxWidth:"100%",height:"auto"}}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Fractal tree with organic growth patterns and environmental effects"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-amber-800",children:"Fractal Concepts"}),e.jsxs("ul",{className:"text-amber-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Self-Similarity"}),": Branches repeat patterns at different scales"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Recursive Generation"}),": Each branch spawns smaller versions"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"L-System Inspiration"}),": Rule-based organic growth"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Natural Variation"}),": Random elements create realistic forms"]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-green-800",children:"Interactive Features"}),e.jsxs("ul",{className:"text-green-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Tree Presets"}),": Classic, willow, pine, and oak forms"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Growth Animation"}),": Watch trees develop organically"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Environmental Effects"}),": Wind simulation and seasonal colors"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Parametric Control"}),": Fine-tune every aspect of growth"]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Applications"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-blue-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Computer Graphics:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"• Procedural vegetation"}),e.jsx("li",{children:"• Game environment assets"}),e.jsx("li",{children:"• Architectural visualization"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Scientific Modeling:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"• Biological growth patterns"}),e.jsx("li",{children:"• Neural network structures"}),e.jsx("li",{children:"• Vascular system modeling"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Art & Design:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"• Generative art patterns"}),e.jsx("li",{children:"• Logo and brand design"}),e.jsx("li",{children:"• Educational visualization"})]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(K,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"← Back to Examples"})})]})};export{ee as component};
