import{r as g,j as e,L as xe,e as f,k as K,P as V,s as Y,T as he,b as N}from"./index-BqTI3VMm.js";const pe=function(){const C=g.useRef(null),w=g.useRef(),[F]=g.useState([{name:"Water",viscosity:.001,density:1e3,thermalConductivity:.6,specificHeat:4186,color:"#4a90e2"},{name:"Air",viscosity:181e-7,density:1.225,thermalConductivity:.026,specificHeat:1006,color:"#87ceeb"},{name:"Oil",viscosity:.1,density:850,thermalConductivity:.15,specificHeat:2e3,color:"#8b4513"},{name:"Honey",viscosity:10,density:1400,thermalConductivity:.5,specificHeat:2500,color:"#ffd700"}]),[o,j]=g.useState({gridSize:64,timeStep:.01,viscosity:.001,density:1e3,inletVelocity:2,reynoldsNumber:1e3,showVelocityField:!0,showPressureField:!1,showVorticity:!0,showStreamlines:!0,showTemperature:!1,visualization:"velocity",fluidType:0,inletTemperature:300,wallTemperature:280}),[v,k]=g.useState([]),[S,_]=g.useState([{x:.3,y:.4,width:.08,height:.2,type:"rectangle",temperature:350}]),[h,T]=g.useState({running:!1,time:0,convergence:0,maxVelocity:0,avgPressure:0,dragCoefficient:0,reynoldsNumber:1e3});g.useEffect(()=>{const i=o.gridSize,t=[];for(let n=0;n<i;n++){t[n]=[];for(let x=0;x<i;x++){const c=n/(i-1),d=c<.1?o.inletVelocity:0,m=0,u=0,a=o.density,l=c<.1?o.inletTemperature:293;t[n][x]={u:d,v:m,p:u,density:a,temperature:l,vorticity:0}}}k(t)},[o.gridSize,o.density,o.inletVelocity,o.inletTemperature]);const J=()=>{!h.running||v.length===0||k(i=>{const t=i.map(l=>l.map(r=>({...r}))),n=o.gridSize,x=o.timeStep,c=1/(n-1);o.reynoldsNumber;const d=o.viscosity/o.density;let m=0,u=0,a=0;for(let l=1;l<n-1;l++)for(let r=1;r<n-1;r++){const s=t[l][r];let y=!1;for(const b of S){const I=b.x*n,B=b.y*n,me=b.width*n,ue=b.height*n;if(b.type==="rectangle"&&l>=I&&l<=I+me&&r>=B&&r<=B+ue){y=!0,s.u=0,s.v=0,b.temperature&&(s.temperature=b.temperature);break}}if(y)continue;const p=l+1<n?t[l+1][r].u||0:s.u||0,z=l-1>=0?t[l-1][r].u||0:s.u||0,P=r+1<n?t[l][r+1].u||0:s.u||0,R=r-1>=0?t[l][r-1].u||0:s.u||0,M=l+1<n?t[l+1][r].v||0:s.v||0,E=l-1>=0?t[l-1][r].v||0:s.v||0,A=r+1<n?t[l][r+1].v||0:s.v||0,q=r-1>=0?t[l][r-1].v||0:s.v||0,ee=l+1<n?t[l+1][r].p||0:s.p||0,te=l-1>=0?t[l-1][r].p||0:s.p||0,se=r+1<n?t[l][r+1].p||0:s.p||0,ie=r-1>=0?t[l][r-1].p||0:s.p||0,le=(ee-te)/(2*c),ne=(se-ie)/(2*c),re=(p-2*s.u+z)/(c*c),oe=(P-2*s.u+R)/(c*c),ae=(M-2*s.v+E)/(c*c),ce=(A-2*s.v+q)/(c*c),H=(p-z)/(2*c),O=(A-q)/(2*c),W=(P-R)/(2*c),$=(M-E)/(2*c),D=-s.u*H-s.v*W-le/o.density+d*(re+oe),G=-s.u*$-s.v*O-ne/o.density+d*(ae+ce);isFinite(D)&&(s.u+=D*x),isFinite(G)&&(s.v+=G*x),s.u=f(s.u||0,-10,10),s.v=f(s.v||0,-10,10),s.vorticity=$-W,l<3&&(s.u=o.inletVelocity*(1-Math.pow((r-n/2)/(n/4),2)),s.v=0,s.temperature=o.inletTemperature),l>n-4&&(s.u=t[l-1][r].u,s.v=t[l-1][r].v),(r<2||r>n-3)&&(s.u=0,s.v=0,s.temperature=o.wallTemperature);const L=H+O;isFinite(L)&&(s.p-=L*x*100),s.p=f(s.p||0,-1e3,1e3);const de=Math.sqrt(s.u*s.u+s.v*s.v);m=Math.max(m,de),u+=s.p,a++}return T(l=>({...l,time:l.time+x,maxVelocity:m,avgPressure:u/a,reynoldsNumber:m*.1/d})),t})};g.useEffect(()=>{if(h.running){const i=()=>{J(),w.current=requestAnimationFrame(i)};w.current=requestAnimationFrame(i)}return()=>{w.current&&cancelAnimationFrame(w.current)}},[h.running,o]);const Q=()=>{const i=C.current,t=i==null?void 0:i.getContext("2d");if(!i||!t||v.length===0)return;t.clearRect(0,0,i.width,i.height);const n=o.gridSize,x=i.width/n,c=i.height/n;for(let d=0;d<n;d++)for(let m=0;m<n;m++){const u=v[d][m];let a="#000000";switch(o.visualization){case"velocity":const l=Math.sqrt(u.u*u.u+u.v*u.v),r=f(l/o.inletVelocity,0,1);a=`hsl(${240-r*240}, 100%, ${50+r*30}%)`;break;case"pressure":a=`hsl(${f((u.p+50)/100,0,1)*60}, 100%, 50%)`;break;case"vorticity":a=`hsl(${f((u.vorticity+10)/20,0,1)*300}, 100%, 50%)`;break;case"temperature":a=`hsl(${240-f((u.temperature-280)/80,0,1)*240}, 100%, 50%)`;break}t.fillStyle=a,t.fillRect(d*x,m*c,x,c)}if(o.showVelocityField){t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=1;const d=Math.max(1,Math.floor(n/20));for(let m=0;m<n;m+=d)for(let u=0;u<n;u+=d){const a=v[m][u],l=m*x+x/2,r=u*c+c/2,s=20;t.beginPath(),t.moveTo(l,r),t.lineTo(l+a.u*s,r+a.v*s),t.stroke();const y=Math.atan2(a.v,a.u),p=5;t.beginPath(),t.moveTo(l+a.u*s,r+a.v*s),t.lineTo(l+a.u*s-p*K(y-V/6),r+a.v*s-p*Y(y-V/6)),t.moveTo(l+a.u*s,r+a.v*s),t.lineTo(l+a.u*s-p*K(y+V/6),r+a.v*s-p*Y(y+V/6)),t.stroke()}}if(S.forEach(d=>{t.fillStyle="rgba(100, 100, 100, 0.8)",t.strokeStyle="#333",t.lineWidth=2;const m=d.x*i.width,u=d.y*i.height,a=d.width*i.width,l=d.height*i.height;d.type==="rectangle"?(t.fillRect(m,u,a,l),t.strokeRect(m,u,a,l)):d.type==="circle"&&(t.beginPath(),t.arc(m+a/2,u+l/2,Math.min(a,l)/2,0,he),t.fill(),t.stroke())}),o.showStreamlines&&v.length>0){t.strokeStyle="rgba(255, 255, 255, 0.6)",t.lineWidth=1;for(let d=.1;d<.9;d+=.1){let m=.05,u=d;t.beginPath(),t.moveTo(m*i.width,u*i.height);for(let a=0;a<200;a++){const l=Math.floor(m*n),r=Math.floor(u*n);if(l>=n-1||r>=n-1||l<0||r<0)break;const s=v[l][r];if(Math.sqrt(s.u*s.u+s.v*s.v)<.01||(m+=s.u*.001,u+=s.v*.001,t.lineTo(m*i.width,u*i.height),m>.95))break}t.stroke()}}};g.useEffect(()=>{Q()},[v,o,S]);const U=()=>{T(i=>({...i,running:!i.running}))},X=()=>{T(n=>({...n,running:!1,time:0}));const i=o.gridSize,t=[];for(let n=0;n<i;n++){t[n]=[];for(let x=0;x<i;x++){const c=n/(i-1),d=c<.1?o.inletVelocity:0;t[n][x]={u:d,v:0,p:0,density:o.density,temperature:c<.1?o.inletTemperature:293,vorticity:0}}}k(t)},Z=()=>{_(i=>[...i,{x:N(.2,.6),y:N(.3,.6),width:N(.05,.15),height:N(.05,.15),type:Math.random()>.5?"rectangle":"circle",temperature:N(280,400)}])};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Computational Fluid Dynamics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Advanced CFD simulation using the Navier-Stokes equations with interactive visualization and analysis tools."}),e.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:e.jsx("p",{className:"text-slate-800",children:"🌊 Real-time fluid simulation - Reynolds numbers, pressure fields, vorticity, and thermal effects"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Simulation Controls"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:U,className:`flex-1 px-3 py-2 rounded-md transition-colors ${h.running?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:h.running?"Pause":"Start"}),e.jsx("button",{onClick:X,className:"flex-1 px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Reset"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Inlet Velocity: ",o.inletVelocity.toFixed(1)," m/s"]}),e.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:o.inletVelocity,onChange:i=>j(t=>({...t,inletVelocity:Number(i.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reynolds Number: ",o.reynoldsNumber.toFixed(0)]}),e.jsx("input",{type:"range",min:"100",max:"5000",step:"100",value:o.reynoldsNumber,onChange:i=>j(t=>({...t,reynoldsNumber:Number(i.target.value),viscosity:h.maxVelocity*.1*o.density/Number(i.target.value)||.001})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fluid Type"}),e.jsx("select",{value:o.fluidType,onChange:i=>{const t=Number(i.target.value),n=F[t];j(x=>({...x,fluidType:t,density:n.density,viscosity:n.viscosity}))},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md",children:F.map((i,t)=>e.jsx("option",{value:t,children:i.name},t))})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Visualization"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Type"}),e.jsxs("select",{value:o.visualization,onChange:i=>j(t=>({...t,visualization:i.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md",children:[e.jsx("option",{value:"velocity",children:"Velocity Magnitude"}),e.jsx("option",{value:"pressure",children:"Pressure Field"}),e.jsx("option",{value:"vorticity",children:"Vorticity"}),e.jsx("option",{value:"temperature",children:"Temperature"})]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.showVelocityField,onChange:i=>j(t=>({...t,showVelocityField:i.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Velocity Vectors"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.showStreamlines,onChange:i=>j(t=>({...t,showStreamlines:i.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Streamlines"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Obstacles"}),e.jsx("button",{onClick:Z,className:"w-full mb-4 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Obstacle"}),e.jsx("div",{className:"space-y-3",children:S.map((i,t)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[i.type," ",t+1]}),e.jsx("button",{onClick:()=>_(n=>n.filter((x,c)=>c!==t)),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Position: (",(i.x*100).toFixed(0),"%,"," ",(i.y*100).toFixed(0),"%)",e.jsx("br",{}),"Size: ",(i.width*100).toFixed(0),"% ×"," ",(i.height*100).toFixed(0),"%",i.temperature&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Temperature: ",(i.temperature||0).toFixed(0),"K"]})]})]},t))})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"CFD Simulation"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Time: ",(h.time||0).toFixed(2),"s | Max Vel:"," ",(h.maxVelocity||0).toFixed(2)," m/s | Re:"," ",(h.reynoldsNumber||0).toFixed(0)]})]}),e.jsx("canvas",{ref:C,width:800,height:400,className:"border border-gray-300 rounded-lg bg-white w-full",style:{maxWidth:"800px",height:"auto",aspectRatio:"2"}})]}),e.jsxs("div",{className:"mt-4 bg-white border border-gray-300 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Flow Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(h.maxVelocity||0).toFixed(2)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Max Velocity (m/s)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(h.reynoldsNumber||0).toFixed(0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reynolds Number"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(h.avgPressure||0).toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Pressure (Pa)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:F[o.fluidType].name}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fluid Type"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-800",children:"CFD Physics"}),e.jsxs("ul",{className:"text-slate-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Navier-Stokes Equations"}),": ∇·V = 0, ∂V/∂t + (V·∇)V = -∇p/ρ + ν∇²V"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Reynolds Number"}),": Re = VL/ν (inertial/viscous forces)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Vorticity"}),": ω = ∇ × V (fluid rotation)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Streamlines"}),": Flow path visualization"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Engineering Applications"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Aerodynamics"}),": Aircraft and vehicle design"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"HVAC Systems"}),": Building climate control"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Process Engineering"}),": Chemical reactor design"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Environmental"}),": Pollution dispersion modeling"]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(xe,{to:"/examples/engineering",className:"inline-block px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"← Back to Examples"})})]})};export{pe as component};
