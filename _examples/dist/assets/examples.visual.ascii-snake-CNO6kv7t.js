import{r as a,j as t}from"./index-BqTI3VMm.js";const le=function(){const K=a.useRef(null),D=a.useRef(0),j=a.useRef(0),[m,I]=a.useState([{x:10,y:10}]),[p,k]=a.useState("right"),[w,E]=a.useState([]),[q,R]=a.useState([]),[x,G]=a.useState([]),[U,V]=a.useState(0),[c,g]=a.useState("paused"),[T,Y]=a.useState(200),[A,Z]=a.useState("normal"),[z,_]=a.useState(!1),[S,ee]=a.useState("classic"),[N,te]=a.useState(!0),[H,se]=a.useState(!0),[O,J]=a.useState(0),[C,oe]=a.useState(()=>Number.parseInt(localStorage.getItem("snake-high-score")||"0")),b=40,y=25,l=16,$={classic:{background:"#000000",snake:"#00FF00",snakeHead:"#FFFF00",food:"#FF0000",bonus:"#FF8800",super:"#FF00FF",grid:"#333333",text:"#FFFFFF"},retro:{background:"#1a1a2e",snake:"#16213e",snakeHead:"#0f3460",food:"#e94560",bonus:"#f39c12",super:"#9b59b6",grid:"#444444",text:"#ecf0f1"},neon:{background:"#0c0c0c",snake:"#00ffff",snakeHead:"#ff0080",food:"#ffff00",bonus:"#ff8000",super:"#8000ff",grid:"#444444",text:"#ffffff"}},F={normal:{char:"â—",points:10,spawnChance:.7},bonus:{char:"â—†",points:25,spawnChance:.2},super:{char:"â˜…",points:50,spawnChance:.1}},B={speed:{char:"âš¡",color:"#FFFF00",duration:5e3,description:"Speed Boost"},slow:{char:"â±ï¸",color:"#ADD8E6",duration:3e3,description:"Slow Motion"},double:{char:"Ã—2",color:"#FF6A00",duration:1e4,description:"Double Points"},shrink:{char:"â¬‡",color:"#FF69B4",duration:0,description:"Shrink Snake"},freeze:{char:"â„",color:"#87CEEB",duration:2e3,description:"Freeze Time"}},v=a.useCallback(()=>{const s=Math.random();let e="normal";s<F.super.spawnChance?e="super":s<F.super.spawnChance+F.bonus.spawnChance&&(e="bonus");const r=$[S],d={normal:r.food,bonus:r.bonus,super:r.super};let o;do o={x:Math.floor(Math.random()*b),y:Math.floor(Math.random()*y)};while(m.some(n=>n.x===o.x&&n.y===o.y));return{...o,type:e,points:F[e].points,char:F[e].char,color:d[e]}},[m,S]),Q=a.useCallback(()=>{if(!N)return null;const s=Object.keys(B),e=s[Math.floor(Math.random()*s.length)],r=B[e];let d;do d={x:Math.floor(Math.random()*b),y:Math.floor(Math.random()*y)};while(m.some(o=>o.x===d.x&&o.y===d.y)||w.some(o=>o.x===d.x&&o.y===d.y));return{...d,type:e,duration:r.duration,char:r.char,color:r.color}},[m,w,N]),W=a.useCallback(()=>{I([{x:10,y:10}]),k("right"),E([]),R([]),G([]),V(0),J(0),g("paused"),setTimeout(()=>{E([v()])},100)},[v]),X=a.useCallback(()=>{c==="playing"&&I(s=>{const e=[...s],r={...e[0]};switch(p){case"up":r.y-=1;break;case"down":r.y+=1;break;case"left":r.x-=1;break;case"right":r.x+=1;break}if(r.x<0||r.x>=b||r.y<0||r.y>=y||e.some(o=>o.x===r.x&&o.y===r.y))return g("gameOver"),s;e.unshift(r);let d=!1;return E(o=>{const n=o.findIndex(i=>i.x===r.x&&i.y===r.y);if(n!==-1){d=!0;const i=o[n],u=x.some(L=>L.type==="double")?i.points*2:i.points;V(L=>{const P=L+u;return P>C&&(oe(P),localStorage.setItem("snake-high-score",P.toString())),P});const f=[...o];f.splice(n,1);const M=A==="easy"?3:A==="normal"?2:1;return f.length<M&&f.push(v()),f}return o}),R(o=>{const n=o.findIndex(i=>i.x===r.x&&i.y===r.y);if(n!==-1){const i=o[n];G(u=>{const f=[...u];return i.type==="shrink"?I(M=>M.slice(0,Math.max(1,Math.floor(M.length/2)))):f.push({type:i.type,duration:i.duration,startTime:Date.now()}),f});const h=[...o];return h.splice(n,1),h}return o}),d||e.pop(),e})},[p,c,b,y,v,A,C,x]);a.useEffect(()=>{if(c!=="playing")return;const s=setInterval(()=>{J(e=>e+1),G(e=>{const r=Date.now();return e.filter(d=>r-d.startTime<d.duration)}),N&&Math.random()<.005&&R(e=>{if(e.length<2){const r=Q();if(r)return[...e,r]}return e})},1e3);return()=>clearInterval(s)},[c,N,Q]),a.useEffect(()=>{const s=e=>{switch(e.preventDefault(),e.key){case"ArrowUp":case"w":case"W":p!=="down"&&k("up");break;case"ArrowDown":case"s":case"S":p!=="up"&&k("down");break;case"ArrowLeft":case"a":case"A":p!=="right"&&k("left");break;case"ArrowRight":case"d":case"D":p!=="left"&&k("right");break;case" ":c==="playing"?g("paused"):c==="paused"&&g("playing");break;case"r":case"R":W();break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[p,c,W]),a.useEffect(()=>{if(c==="playing"){if(x.some(o=>o.type==="freeze"))return;let e=T;const r=x.some(o=>o.type==="speed"),d=x.some(o=>o.type==="slow");r&&(e=Math.max(50,T*.5)),d&&(e=T*2),j.current=window.setInterval(X,e)}else j.current&&clearInterval(j.current);return()=>{j.current&&clearInterval(j.current)}},[c,T,X,x]),a.useEffect(()=>{w.length===0&&c!=="gameOver"&&E([v()])},[w.length,c,v]),a.useEffect(()=>{const s=K.current;if(!s)return;const e=s.getContext("2d");if(!e)return;const r=()=>{const o=$[S];if(e.fillStyle=o.background,e.fillRect(0,0,s.width,s.height),z){e.strokeStyle=o.grid,e.lineWidth=1;for(let n=0;n<=b;n++)e.beginPath(),e.moveTo(n*l,0),e.lineTo(n*l,y*l),e.stroke();for(let n=0;n<=y;n++)e.beginPath(),e.moveTo(0,n*l),e.lineTo(b*l,n*l),e.stroke()}e.font=`${l-2}px "Courier New", monospace`,e.textAlign="center",e.textBaseline="middle",m.forEach((n,i)=>{const h=n.x*l,u=n.y*l;i===0?(e.fillStyle=o.snakeHead,e.fillText("â—",h+l/2,u+l/2)):(e.fillStyle=o.snake,e.fillText("â–ˆ",h+l/2,u+l/2))}),w.forEach(n=>{const i=n.x*l,h=n.y*l;e.fillStyle=n.color,e.fillText(n.char,i+l/2,h+l/2)}),q.forEach(n=>{const i=n.x*l,h=n.y*l;e.fillStyle=n.color,e.fillText(n.char,i+l/2,h+l/2)}),e.font='20px "Courier New", monospace',e.fillStyle=o.text,e.textAlign="left",e.fillText(`Score: ${U}`,10,30),e.fillText(`High: ${C}`,10,55),e.fillText(`Time: ${O}s`,10,80),H&&x.length>0&&(e.font='14px "Courier New", monospace',x.forEach((n,i)=>{const h=B[n.type],u=Math.max(0,Math.ceil((n.duration-(Date.now()-n.startTime))/1e3)),f=`${h.char} ${h.description}: ${u}s`;e.fillStyle=h.color,e.fillText(f,s.width-200,30+i*20)}),e.font='20px "Courier New", monospace',e.fillStyle=o.text),c==="paused"?(e.font='24px "Courier New", monospace',e.textAlign="center",e.fillText("PAUSED - Press SPACE to continue",s.width/2,s.height/2)):c==="gameOver"&&(e.font='32px "Courier New", monospace',e.fillStyle="#FF0000",e.textAlign="center",e.fillText("GAME OVER",s.width/2,s.height/2-20),e.font='18px "Courier New", monospace',e.fillStyle=o.text,e.fillText("Press R to restart",s.width/2,s.height/2+20)),D.current=requestAnimationFrame(r)};return(()=>{s.width=b*l,s.height=y*l})(),r(),()=>{D.current&&cancelAnimationFrame(D.current)}},[m,w,q,x,U,C,c,z,S,O,H]);const ne=s=>{Z(s),Y({easy:300,normal:200,hard:100,insane:50}[s])};return t.jsxs("div",{className:"flex flex-col h-screen bg-gray-900",children:[t.jsxs("div",{className:"flex-shrink-0 bg-gray-800 p-4 border-b border-gray-700",children:[t.jsx("h1",{className:"text-2xl font-bold text-green-400 mb-4",children:"ðŸ ASCII Snake Game"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Game Control"}),t.jsx("button",{onClick:()=>{c==="gameOver"?W():g(c==="playing"?"paused":"playing")},className:`px-3 py-2 rounded font-medium transition-colors ${c==="gameOver"?"bg-blue-600 hover:bg-blue-700 text-white":c==="playing"?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:c==="gameOver"?"New Game":c==="playing"?"Pause":"Start"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Difficulty"}),t.jsxs("select",{value:A,onChange:s=>ne(s.target.value),className:"px-2 py-1 bg-gray-700 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"easy",children:"Easy"}),t.jsx("option",{value:"normal",children:"Normal"}),t.jsx("option",{value:"hard",children:"Hard"}),t.jsx("option",{value:"insane",children:"Insane"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Color Theme"}),t.jsxs("select",{value:S,onChange:s=>ee(s.target.value),className:"px-2 py-1 bg-gray-700 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"classic",children:"Classic"}),t.jsx("option",{value:"retro",children:"Retro"}),t.jsx("option",{value:"neon",children:"Neon"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Show Grid"}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:z,onChange:s=>_(s.target.checked),className:"mr-2"}),t.jsx("span",{className:"text-green-300",children:"Enabled"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Current Score"}),t.jsx("div",{className:"text-green-400 font-mono text-lg",children:U})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"High Score"}),t.jsx("div",{className:"text-yellow-400 font-mono text-lg",children:C})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Game Time"}),t.jsxs("div",{className:"text-blue-400 font-mono text-lg",children:[O,"s"]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:N,onChange:s=>te(s.target.checked),className:"mr-2"}),"Power-ups"]}),t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:H,onChange:s=>se(s.target.checked),className:"mr-2"}),"Show Effects"]})]})]}),t.jsxs("div",{className:"text-green-400 text-sm",children:[t.jsxs("p",{children:["ðŸŽ® ",t.jsx("strong",{children:"Controls:"})," Arrow Keys / WASD to move, SPACE to pause, R to restart"]}),t.jsxs("p",{children:["ðŸŽ ",t.jsx("strong",{children:"Food:"})," Normal (â—) = 10pts | Bonus (â—†) = 25pts | Super (â˜…) = 50pts"]}),t.jsxs("p",{children:["âš¡ ",t.jsx("strong",{children:"Power-ups:"})," Speed Boost (âš¡) | Slow Motion (â±ï¸) | Double Points (Ã—2) | Shrink (â¬‡) | Freeze Time (â„)"]})]})]}),t.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-900",children:t.jsxs("div",{className:"relative",children:[t.jsx("canvas",{ref:K,className:"border-2 border-gray-600 rounded",tabIndex:0,style:{background:$[S].background,outline:"none",maxWidth:"100%",height:"auto"}}),c==="paused"&&m.length===1&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"bg-black bg-opacity-75 text-white p-6 rounded-lg text-center",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ready to Play?"}),t.jsx("p",{className:"mb-2",children:"Use arrow keys or WASD to control the snake"}),t.jsx("p",{className:"mb-4",children:"Eat food to grow and increase your score!"}),t.jsx("button",{onClick:()=>g("playing"),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Start Game"})]})})]})})]})};export{le as component};
