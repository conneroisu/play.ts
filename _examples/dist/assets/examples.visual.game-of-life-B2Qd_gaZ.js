import{r,A as B,j as e,L as M}from"./index-BqTI3VMm.js";const W=function(){const p=r.useRef(null),u=r.useRef(),y=r.useRef(0),[i,O]=r.useState({width:80,height:60}),[o,S]=r.useState(8),[d,h]=r.useState({grid:[],generation:0,isRunning:!1,speed:100}),[b,G]=r.useState("random"),g=r.useCallback((t,n)=>Array(n).fill(null).map(()=>Array(t).fill(!1)),[]),w=r.useCallback((t,n,s)=>{let l=0;for(let a=-1;a<=1;a++)for(let c=-1;c<=1;c++){if(c===0&&a===0)continue;const m=s+a,x=n+c;m>=0&&m<t.length&&x>=0&&x<t[0].length&&t[m][x]&&l++}return l},[]),f=r.useCallback(t=>{const n=g(t[0].length,t.length);for(let s=0;s<t.length;s++)for(let l=0;l<t[0].length;l++){const a=w(t,l,s);t[s][l]?n[s][l]=a===2||a===3:n[s][l]=a===3}return n},[w,g]),E={glider:[[0,1,0],[0,0,1],[1,1,1]],gosperGun:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],pulsar:[[0,0,1,1,1,0,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,1,0,0,0,0,1],[0,0,1,1,1,0,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,1,1,1,0,0],[1,0,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,1,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,1,1,1,0,0]],beacon:[[1,1,0,0],[1,1,0,0],[0,0,1,1],[0,0,1,1]]},N=r.useCallback(t=>{const n=g(i.width,i.height),s=E[t],l=Math.floor((i.width-s[0].length)/2),a=Math.floor((i.height-s.length)/2);s.forEach((c,m)=>{c.forEach((x,R)=>{a+m<i.height&&l+R<i.width&&(n[a+m][l+R]=x===1)})}),h(c=>({...c,grid:n,generation:0}))},[i,g]),j=r.useCallback(()=>{const t=g(i.width,i.height);for(let n=0;n<i.height;n++)for(let s=0;s<i.width;s++)t[n][s]=B()&&Math.random()<.3;h(n=>({...n,grid:t,generation:0}))},[i,g]),A=r.useCallback(()=>{const t=g(i.width,i.height);h(n=>({...n,grid:t,generation:0}))},[i,g]),k=r.useCallback((t,n)=>{h(s=>{const l=s.grid.map(a=>[...a]);return l[n][t]=!l[n][t],{...s,grid:l}})},[]),C=r.useCallback(()=>{const t=p.current,n=t==null?void 0:t.getContext("2d");if(!(!t||!n)){n.clearRect(0,0,t.width,t.height),n.strokeStyle="#e0e0e0",n.lineWidth=1;for(let s=0;s<=i.width;s++)n.beginPath(),n.moveTo(s*o,0),n.lineTo(s*o,i.height*o),n.stroke();for(let s=0;s<=i.height;s++)n.beginPath(),n.moveTo(0,s*o),n.lineTo(i.width*o,s*o),n.stroke();n.fillStyle="#2563eb",d.grid.forEach((s,l)=>{s.forEach((a,c)=>{a&&n.fillRect(c*o+1,l*o+1,o-2,o-2)})})}},[d.grid,i,o]),v=r.useCallback(t=>{d.isRunning&&(t-y.current>=d.speed&&(h(n=>({...n,grid:f(n.grid),generation:n.generation+1})),y.current=t),u.current=requestAnimationFrame(v))},[d.isRunning,d.speed,f]),P=()=>{h(t=>({...t,isRunning:!0}))},L=()=>{h(t=>({...t,isRunning:!1})),u.current&&cancelAnimationFrame(u.current)},z=()=>{h(t=>({...t,grid:f(t.grid),generation:t.generation+1}))};return r.useEffect(()=>(d.isRunning&&(u.current=requestAnimationFrame(v)),()=>{u.current&&cancelAnimationFrame(u.current)}),[d.isRunning,v]),r.useEffect(()=>{C()},[C]),r.useEffect(()=>{const t=p.current;if(!t)return;t.width=i.width*o,t.height=i.height*o;const n=s=>{const l=t.getBoundingClientRect(),a=Math.floor((s.clientX-l.left)/o),c=Math.floor((s.clientY-l.top)/o);a>=0&&a<i.width&&c>=0&&c<i.height&&k(a,c)};return t.addEventListener("click",n),()=>t.removeEventListener("click",n)},[i,o,k]),r.useEffect(()=>{j()},[]),r.useEffect(()=>{b!=="random"?N(b):j()},[b,N,j]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Conway's Game of Life Simulator"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Complete cellular automata with famous patterns, interactive editing, and educational rule visualization."}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-blue-800",children:"üî¨ Watch patterns evolve, click cells to toggle them, try different starting configurations"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx("button",{type:"button",onClick:P,disabled:d.isRunning,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Start"}),e.jsx("button",{type:"button",onClick:L,disabled:!d.isRunning,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors",children:"Stop"}),e.jsx("button",{type:"button",onClick:z,disabled:d.isRunning,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:"Step"}),e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Clear"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Speed: ",d.speed,"ms"]}),e.jsx("input",{type:"range",min:"50",max:"1000",step:"50",value:d.speed,onChange:t=>h(n=>({...n,speed:Number(t.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Cell Size: ",o,"px"]}),e.jsx("input",{type:"range",min:"4",max:"16",value:o,onChange:t=>S(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pattern"}),e.jsxs("select",{value:b,onChange:t=>G(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"random",children:"Random"}),e.jsx("option",{value:"glider",children:"Glider"}),e.jsx("option",{value:"gosperGun",children:"Gosper Glider Gun"}),e.jsx("option",{value:"pulsar",children:"Pulsar"}),e.jsx("option",{value:"beacon",children:"Beacon"})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Generation: ",d.generation," | Click cells to toggle them"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("canvas",{ref:p,className:"border border-gray-300 rounded-lg cursor-pointer bg-white",style:{maxWidth:"100%",height:"auto"}})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"Game Rules"}),e.jsxs("ul",{className:"text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Birth"}),": Dead cell with exactly 3 neighbors becomes alive"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Survival"}),": Live cell with 2 or 3 neighbors stays alive"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Death"}),": Live cell with fewer than 2 or more than 3 neighbors dies"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Isolation"}),": Underpopulation kills cells"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Overcrowding"}),": Overpopulation kills cells"]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-green-800",children:"Famous Patterns"}),e.jsxs("ul",{className:"text-green-700 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Glider"}),": Moving pattern that travels across the grid"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Gosper Gun"}),": Periodically produces gliders"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Pulsar"}),": Oscillates with period 3"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Beacon"}),": Simple oscillator with period 2"]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(M,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"‚Üê Back to Examples"})})]})};export{W as component};
