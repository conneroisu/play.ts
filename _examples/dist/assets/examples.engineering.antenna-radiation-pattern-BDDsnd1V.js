import{r as u,j as e,P as o,k as x,s as d,T as M,h as q,d as L}from"./index-BqTI3VMm.js";const V=function(){const B=u.useRef(null),F=u.useRef(null),N=u.useRef(),R=u.useRef(0),[l,w]=u.useState({type:"dipole",frequency:2.4,length:.5,width:.02,gain:2.15,beamwidth:78,efficiency:95,polarization:"linear",feedImpedance:73}),[g,I]=u.useState(null),[b,C]=u.useState("2d"),[j,T]=u.useState(!1),[P,k]=u.useState("both"),E=(a,t)=>{const s=a*o/180,r=t*o/180;switch(l.type){case"dipole":const f=x(o/2*x(s)),m=d(s);return m!==0?Math.abs(f/m):0;case"monopole":if(a>90)return 0;const h=x(o/2*x(s))/d(s);return Math.abs(h);case"patch":const n=x(s)*d(o*l.width*d(s)*x(r))/(o*l.width*d(s)*x(r)||1),c=d(o*l.length*d(s)*d(r))/(o*l.length*d(s)*d(r)||1);return Math.abs(n*c);case"horn":const i=l.beamwidth*o/180,p=x(s)**(4/i);return Math.abs(p);case"helical":const y=d(s)*x(2*r);return Math.abs(y);case"yagi":const S=x(s)**8,v=.1*x(3*s);return Math.abs(S+v);default:return 1}},A=(a,t)=>{const s=E(a,t),r=20*Math.log10(s+1e-10);return Math.max(r,-40)},z=()=>{const t=Array.from({length:361},(i,p)=>p).map(i=>A(i,0)),s=Math.max(...t),r=t.indexOf(s),f=s-3;let m=0;for(let i=0;i<t.length;i++)t[i]>=f&&m++;const h=[];for(let i=1;i<t.length-1;i++)t[i]>t[i-1]&&t[i]>t[i+1]&&Math.abs(i-r)>20&&t[i]>s-20&&h.push({direction:i,level:t[i]-s});const n=(r+180)%360,c=s-t[n];return{mainLobe:{direction:r,gain:s+l.gain},sideLobes:h,nulls:[],beamwidth3dB:m,beamwidth10dB:m*1.5,frontToBackRatio:c,directivity:l.gain+10*Math.log10(l.efficiency/100),vswr:1.1+Math.random()*.5}},D=()=>{const a=B.current;if(!a)return;const t=a.getContext("2d");if(!t)return;const s=a.width,r=a.height,f=s/2,m=r/2,h=Math.min(s,r)*.4;t.clearRect(0,0,s,r),t.strokeStyle="rgba(200, 200, 200, 0.5)",t.lineWidth=1;for(let n=1;n<=4;n++)t.beginPath(),t.arc(f,m,h*n/4,0,M),t.stroke();for(let n=0;n<360;n+=30){const c=f+h*x((n-90)*o/180),i=m+h*d((n-90)*o/180);t.beginPath(),t.moveTo(f,m),t.lineTo(c,i),t.stroke(),t.fillStyle="black",t.font="12px Arial",t.textAlign="center",t.fillText(`${n}°`,c*1.1-f*.1,i*1.1-m*.1)}t.beginPath(),t.strokeStyle="#ff6b35",t.lineWidth=3;for(let n=0;n<=360;n+=2){const c=A(90,n),i=h*Math.pow(10,c/20)*.1,p=f+i*x((n-90)*o/180),y=m+i*d((n-90)*o/180);n===0?t.moveTo(p,y):t.lineTo(p,y)}t.stroke(),t.fillStyle="rgba(255, 107, 53, 0.2)",t.fill(),t.fillStyle="black",t.font="10px Arial",t.textAlign="left";for(let n=0;n>=-30;n-=10){const c=h*Math.pow(10,n/20)*.1;t.fillText(`${n} dB`,f+c+5,m-5)}if(j){const n=R.current*.001,c=h*.8*(1+.1*d(n*2));t.strokeStyle=`rgba(255, 107, 53, ${.5+.3*d(n*3)})`,t.lineWidth=1,t.beginPath(),t.arc(f,m,c,0,M),t.stroke()}},$=()=>{const a=F.current;if(!a)return;const t=a.getContext("2d");if(!t)return;const s=a.width,r=a.height,f=s/2,m=r/2;t.clearRect(0,0,s,r);const h=j?R.current*5e-4:0;for(let n=0;n<=180;n+=20)for(let c=0;c<360;c+=20){const i=50+A(n,c)*2,p=f+i*d(n*o/180)*x((c+h*180)*o/180)*.5,y=m+i*x(n*o/180)*.5-i*d(n*o/180)*d((c+h*180)*o/180)*.2,S=q((c+h*180)%360,70,50+A(n,c)),v=L(S);t.fillStyle=`rgb(${v.r}, ${v.g}, ${v.b})`,t.beginPath(),t.arc(p,y,2,0,M),t.fill()}},H=()=>{b==="2d"?D():b==="3d"&&$(),j&&(R.current+=16)};u.useEffect(()=>{const a=()=>{H(),N.current=requestAnimationFrame(a)};return N.current=requestAnimationFrame(a),()=>{N.current&&cancelAnimationFrame(N.current)}},[l,b,j,P]),u.useEffect(()=>{I(z())},[l]);const W=a=>{const t={dipole:{gain:2.15,beamwidth:78,efficiency:95,feedImpedance:73},monopole:{gain:5.15,beamwidth:78,efficiency:90,feedImpedance:36},patch:{gain:6,beamwidth:65,efficiency:85,feedImpedance:50},horn:{gain:15,beamwidth:30,efficiency:98,feedImpedance:50},helical:{gain:12,beamwidth:45,efficiency:92,feedImpedance:150},yagi:{gain:10,beamwidth:50,efficiency:85,feedImpedance:50}};w(s=>({...s,type:a,...t[a]}))};return e.jsx("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Antenna Radiation Pattern Analyzer"}),e.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"RF & Microwave Engineering Tool"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>C("2d"),className:`px-3 py-1 rounded text-sm ${b==="2d"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"2D Polar"}),e.jsx("button",{onClick:()=>C("3d"),className:`px-3 py-1 rounded text-sm ${b==="3d"?"bg-blue-500 text-white":"bg-gray-200"}`,children:"3D Pattern"}),e.jsx("button",{onClick:()=>T(!j),className:`px-3 py-1 rounded text-sm ${j?"bg-green-500 text-white":"bg-gray-200"}`,children:j?"Stop":"Animate"})]}),b==="2d"&&e.jsx("canvas",{ref:B,width:600,height:600,className:"border border-gray-300 rounded-lg bg-white w-full max-w-[600px] mx-auto"}),b==="3d"&&e.jsx("canvas",{ref:F,width:600,height:400,className:"border border-gray-300 rounded-lg bg-black w-full max-w-[600px] mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[g==null?void 0:g.mainLobe.gain.toFixed(1)," dBi"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Peak Gain"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[g==null?void 0:g.beamwidth3dB.toFixed(0),"°"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"3dB Beamwidth"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[g==null?void 0:g.frontToBackRatio.toFixed(1)," dB"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"F/B Ratio"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Antenna Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Antenna Type"}),e.jsxs("select",{value:l.type,onChange:a=>W(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"dipole",children:"Half-Wave Dipole"}),e.jsx("option",{value:"monopole",children:"Quarter-Wave Monopole"}),e.jsx("option",{value:"patch",children:"Microstrip Patch"}),e.jsx("option",{value:"horn",children:"Horn Antenna"}),e.jsx("option",{value:"helical",children:"Helical Antenna"}),e.jsx("option",{value:"yagi",children:"Yagi-Uda Array"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frequency: ",l.frequency.toFixed(2)," GHz"]}),e.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:l.frequency,onChange:a=>w(t=>({...t,frequency:Number.parseFloat(a.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Length: ",l.length.toFixed(2)," λ"]}),e.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:l.length,onChange:a=>w(t=>({...t,length:Number.parseFloat(a.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Feed Impedance: ",l.feedImpedance," Ω"]}),e.jsx("input",{type:"range",min:"25",max:"300",step:"5",value:l.feedImpedance,onChange:a=>w(t=>({...t,feedImpedance:Number.parseInt(a.target.value)})),className:"w-full"})]})]})]}),g&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Pattern Analysis"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Directivity:"}),e.jsxs("span",{className:"font-mono",children:[g.directivity.toFixed(2)," dBi"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Efficiency:"}),e.jsxs("span",{className:"font-mono",children:[l.efficiency,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"VSWR:"}),e.jsxs("span",{className:"font-mono",children:[g.vswr.toFixed(2),":1"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Side Lobes:"}),e.jsxs("span",{className:"font-mono",children:[g.sideLobes.length," detected"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"10dB Beamwidth:"}),e.jsxs("span",{className:"font-mono",children:[g.beamwidth10dB.toFixed(0),"°"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Polarization:"}),e.jsx("span",{className:"font-mono capitalize",children:l.polarization})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Display Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"plane",checked:P==="E",onChange:()=>k("E"),className:"mr-2"}),"E-Plane (Elevation)"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"plane",checked:P==="H",onChange:()=>k("H"),className:"mr-2"}),"H-Plane (Azimuth)"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"plane",checked:P==="both",onChange:()=>k("both"),className:"mr-2"}),"Both Planes"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"RF Engineering Applications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design & Optimization:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Antenna pattern synthesis"}),e.jsx("li",{children:"• Coverage area prediction"}),e.jsx("li",{children:"• Interference analysis"}),e.jsx("li",{children:"• Beam steering systems"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Performance Analysis:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Gain and directivity calculations"}),e.jsx("li",{children:"• VSWR and impedance matching"}),e.jsx("li",{children:"• Side lobe level optimization"}),e.jsx("li",{children:"• Cross-polarization analysis"})]})]})]})]})]})})};export{V as component};
