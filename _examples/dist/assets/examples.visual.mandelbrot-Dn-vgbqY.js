import{r as h,j as e,L as T,e as U}from"./index-BqTI3VMm.js";const G=function(){const x=h.useRef(null),[s,i]=h.useState({centerX:-.5,centerY:0,zoom:1,maxIterations:100,colorMode:0,isRendering:!1}),[b,g]=h.useState(0),[C,j]=h.useState(!1),[w,M]=h.useState({x:0,y:0}),y=[(t,o)=>{if(t===o)return[0,0,0];const n=t/o;return[Math.floor(255*Math.sin(n*Math.PI*2)*.5+.5),Math.floor(255*Math.sin(n*Math.PI*2+Math.PI/3)*.5+.5),Math.floor(255*Math.sin(n*Math.PI*2+2*Math.PI/3)*.5+.5)]},(t,o)=>{if(t===o)return[0,0,0];const n=t/o;return[Math.floor(255*Math.min(1,n*3)),Math.floor(255*Math.min(1,Math.max(0,n*3-1))),Math.floor(255*Math.min(1,Math.max(0,n*3-2)))]},(t,o)=>{if(t===o)return[0,0,0];const n=t/o;return[Math.floor(255*n),Math.floor(255*Math.sin(n*Math.PI)),Math.floor(255*(1-n))]}],N=h.useCallback((t,o,n)=>{let r=0,l=0,a=0;for(;r*r+l*l<=4&&a<n;){const m=r*r-l*l+t;l=2*r*l+o,r=m,a++}return a},[]),I=h.useCallback(async()=>{if(s.isRendering)return;const t=x.current;if(!t)return;const o=t.getContext("2d");if(o){i(n=>({...n,isRendering:!0})),g(0);try{const n=o.createImageData(t.width,t.height),r=n.data,l=4/s.zoom,a=s.centerX-l/2,m=s.centerY-l/2;for(let c=0;c<t.height;c++){const v=c/t.height*100;g(v),c%10===0&&await new Promise(d=>setTimeout(d,1));for(let d=0;d<t.width;d++){const f=a+d/t.width*l,p=m+c/t.height*l,L=N(f,p,s.maxIterations),[B,Z,$]=y[s.colorMode](L,s.maxIterations),u=(c*t.width+d)*4;r[u]=B,r[u+1]=Z,r[u+2]=$,r[u+3]=255}}o.putImageData(n,0,0),g(100)}catch(n){console.error("Mandelbrot rendering error:",n)}finally{i(n=>({...n,isRendering:!1})),setTimeout(()=>g(0),1e3)}}},[s.centerX,s.centerY,s.zoom,s.maxIterations,s.colorMode,s.isRendering,N]);h.useEffect(()=>{I()},[s.centerX,s.centerY,s.zoom,s.maxIterations,s.colorMode]);const R=t=>{if(s.isRendering)return;const o=x.current;if(!o)return;const n=o.getBoundingClientRect(),r=t.clientX-n.left,l=t.clientY-n.top,a=4/s.zoom,m=s.centerX+(r/o.width-.5)*a,c=s.centerY+(l/o.height-.5)*a,d=t.button===2?.5:2,f=U(s.zoom*d,.1,1e6);i(p=>({...p,centerX:m,centerY:c,zoom:f}))},k=t=>{t.preventDefault()},X=t=>{t.button===0&&(j(!0),M({x:t.clientX,y:t.clientY}))},Y=t=>{if(C&&!s.isRendering){const o=t.clientX-w.x,n=t.clientY-w.y,r=x.current;if(!r)return;const l=4/s.zoom;i(a=>({...a,centerX:a.centerX-o/r.width*l,centerY:a.centerY-n/r.height*l})),M({x:t.clientX,y:t.clientY})}},z=()=>{j(!1)},D=()=>{i(t=>({...t,centerX:-.5,centerY:0,zoom:1}))},P=()=>{i(t=>({...t,maxIterations:Math.min(t.maxIterations+50,1e3)}))},S=()=>{i(t=>({...t,maxIterations:Math.max(t.maxIterations-50,50)}))},E=()=>{i(t=>({...t,colorMode:(t.colorMode+1)%y.length}))},F=()=>{const t=x.current;if(!t)return;const o=document.createElement("a");o.download=`mandelbrot-${s.centerX.toFixed(6)}-${s.centerY.toFixed(6)}-${s.zoom.toFixed(1)}x.png`,o.href=t.toDataURL(),o.click()};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Interactive Mandelbrot Set Explorer"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Real-time fractal computation with infinite zoom, multiple color palettes, and progressive rendering."}),e.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:e.jsx("p",{className:"text-indigo-800",children:"üåÄ Click to zoom in, right-click to zoom out, drag to pan around"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[e.jsx("canvas",{ref:x,width:600,height:600,onClick:R,onContextMenu:k,onMouseDown:X,onMouseMove:Y,onMouseUp:z,className:"border border-gray-300 rounded cursor-crosshair w-full max-w-full",style:{imageRendering:"pixelated",maxWidth:"100%",height:"auto"}}),b>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Rendering Mandelbrot Set..."}),e.jsxs("span",{children:[b.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-100",style:{width:`${b}%`}})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Center:"}),e.jsxs("span",{className:"font-mono text-blue-600",children:["(",s.centerX.toFixed(6),", ",s.centerY.toFixed(6),")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zoom:"}),e.jsxs("span",{className:"font-mono text-green-600",children:[s.zoom.toFixed(1),"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Iterations:"}),e.jsx("span",{className:"font-mono text-purple-600",children:s.maxIterations})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Color Mode:"}),e.jsx("span",{className:"font-mono text-yellow-600",children:["Classic","Fire","Electric"][s.colorMode]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Controls"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:D,disabled:s.isRendering,className:"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:"üè† Reset View"}),e.jsx("button",{onClick:P,disabled:s.isRendering,className:"w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:"‚¨ÜÔ∏è More Detail"}),e.jsx("button",{onClick:S,disabled:s.isRendering,className:"w-full px-3 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:"‚¨áÔ∏è Less Detail"}),e.jsx("button",{onClick:E,disabled:s.isRendering,className:"w-full px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:"üé® Change Colors"}),e.jsx("button",{onClick:F,disabled:s.isRendering,className:"w-full px-3 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm",children:"üíæ Save PNG"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"About the Mandelbrot Set"}),e.jsxs("ul",{className:"text-yellow-700 text-sm space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Mathematical fractal with infinite detail"}),e.jsx("li",{children:"‚Ä¢ Based on complex number iterations"}),e.jsx("li",{children:"‚Ä¢ Self-similar patterns at all scales"}),e.jsx("li",{children:"‚Ä¢ Boundary between bounded and unbounded behavior"})]})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"How to Explore"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Left click"}),": Zoom in at that point"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Right click"}),": Zoom out"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Drag"}),": Pan around the fractal"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"More Detail"}),": Increases iteration count for finer detail"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Change Colors"}),": Cycles through different color palettes"]})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(T,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"‚Üê Back to Examples"})})]})};export{G as component};
