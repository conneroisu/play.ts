import{r as h,j as n,e as q,s as u,k}from"./index-BqTI3VMm.js";const W=function(){const A=h.useRef(null),S=h.useRef(),j=h.useRef(!1),x=h.useRef(0),[N,C]=h.useState(!1),v=h.useRef([{name:"CPU Usage",value:0,history:[],threshold:80,unit:"%",status:"normal"},{name:"Memory",value:0,history:[],threshold:85,unit:"%",status:"normal"},{name:"Disk I/O",value:0,history:[],threshold:90,unit:"MB/s",status:"normal"},{name:"Network",value:0,history:[],threshold:95,unit:"Mbps",status:"normal"},{name:"Load Avg",value:0,history:[],threshold:4,unit:"",status:"normal"},{name:"Connections",value:0,history:[],threshold:1e3,unit:"",status:"normal"}]),m=h.useRef([]),[$,I]=h.useState([]),F=t=>{const e=x.current,f=v.current;if(f.forEach((s,l)=>{let r=0,o=0;switch(s.name){case"CPU Usage":r=30+u(e*.5)*20+u(e*2)*10,o=Math.random()*15;break;case"Memory":r=60+u(e*.2)*15,o=Math.random()*10;break;case"Disk I/O":r=50+u(e*1.5)*30+k(e*3)*20,o=Math.random()*25;break;case"Network":r=40+u(e*.8)*25+k(e*2.5)*15,o=Math.random()*20;break;case"Load Avg":r=1.5+u(e*.3)*1.2,o=Math.random()*.8;break;case"Connections":r=500+u(e*.7)*300+k(e*1.8)*150,o=Math.random()*100;break}Math.random()<.02&&(o+=Math.random()*30),s.value=q(r+o,0,s.threshold*1.2),s.history.push(s.value),s.history.length>50&&s.history.shift(),s.value>s.threshold?s.status="critical":s.value>s.threshold*.8?s.status="warning":s.status="normal"}),Math.random()<.01){const s=f.filter(l=>l.status==="critical");if(s.length>0){const l=s[Math.floor(Math.random()*s.length)],r={id:Math.random().toString(36).substr(2,8),timestamp:Date.now(),severity:"critical",message:`${l.name} exceeded threshold: ${l.value.toFixed(1)}${l.unit}`,acknowledged:!1};m.current.unshift(r),m.current.length>10&&m.current.pop(),I([...m.current])}}},U=(t,e,f,s,l,r,o,i)=>{t.fillStyle=e.status==="critical"?"#ff0000":e.status==="warning"?"#ffaa00":"#00ff00";for(let a=0;a<l;a++)t.fillText(a===0?"╭":a===l-1?"╮":"─",(f+a)*o,s*i);t.fillStyle="#ffffff";const d=`${e.name}: ${e.value.toFixed(1)}${e.unit}`;t.fillText(d,(f+2)*o,(s+1)*i);for(let a=1;a<r-1;a++){t.fillStyle=e.status==="critical"?"#ff0000":e.status==="warning"?"#ffaa00":"#00ff00",t.fillText("│",f*o,(s+a)*i),t.fillText("│",(f+l-1)*o,(s+a)*i),t.fillStyle="#111111";for(let c=1;c<l-1;c++)t.fillText(" ",(f+c)*o,(s+a)*i)}t.fillStyle=e.status==="critical"?"#ff0000":e.status==="warning"?"#ffaa00":"#00ff00";for(let a=0;a<l;a++)t.fillText(a===0?"╰":a===l-1?"╯":"─",(f+a)*o,(s+r-1)*i);if(e.history.length>1){const a=Math.max(e.threshold*1.2,Math.max(...e.history)),c=l-2,p=r-3;for(let b=0;b<Math.min(e.history.length,c);b++){const R=e.history[e.history.length-1-b],V=R/a,y=Math.floor(V*p),Y=f+c-b;for(let M=0;M<y;M++){const O=s+r-2-M;let g="▁",w="#00ff00";M===y-1?y<p*.3?g="▁":y<p*.6?g="▄":g="█":g="█",R>e.threshold?w="#ff0000":R>e.threshold*.8&&(w="#ffaa00"),t.fillStyle=w,t.fillText(g,Y*o,O*i)}const T=s+r-2-Math.floor(e.threshold/a*p);T>=s+2&&T<s+r-1&&(t.fillStyle="#ff00ff",t.fillText("─",Y*o,T*i))}}},G=(t,e,f)=>{const s=x.current,l=v.current,r=l.filter(c=>c.status==="critical").length,o=l.filter(c=>c.status==="warning").length;let i="#00ff00",d="HEALTHY";r>0?(i="#ff0000",d="CRITICAL"):o>0&&(i="#ffaa00",d="WARNING"),r>0&&Math.floor(s*2)%2===0&&(i="#ffffff"),t.fillStyle=i,t.fillText(`SYSTEM STATUS: ${d}`,10,40),t.fillStyle="#888888";const a=new Date;t.fillText(`${a.toLocaleTimeString()}`,500,40)},P=(t,e,f)=>{t.fillStyle="#ffffff",t.fillText("RECENT ALERTS:",10,28*f),m.current.slice(0,5).forEach((l,r)=>{const o=29+r,i=(Date.now()-l.timestamp)/1e3;let d="#888888";i<10&&(d=l.severity==="critical"?"#ff0000":"#ffaa00",i<3&&Math.floor(x.current*3)%2===0&&(d="#ffffff")),t.fillStyle=d;const a=`${Math.floor(i)}s`,c=l.message.substring(0,60);t.fillText(`[${a.padStart(3)}] ${c}`,10,o*f)})},E=()=>{if(!j.current)return;const t=A.current;if(!t)return;const e=t.getContext("2d");if(!e)return;x.current+=.016,e.fillStyle="#000000",e.fillRect(0,0,t.width,t.height);const f=8,s=16;e.font="12px monospace",e.fillStyle="#ffffff",e.fillText("Real-time Server Metrics Dashboard",10,20),e.fillText("═════════════════════════════════════════════════════════════",10,35),F(),G(e);const l=v.current,r=25,o=8;for(let i=0;i<l.length;i++){const d=i%3*26+1,a=Math.floor(i/3)*9+6;U(e,l[i],d,a,r,o,f,s)}P(e,f,s),S.current=requestAnimationFrame(E)},D=()=>{C(!0),j.current=!0,E()},L=()=>{C(!1),j.current=!1,S.current&&cancelAnimationFrame(S.current)};return h.useEffect(()=>(D(),()=>L()),[]),n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Real-time Server Metrics Dashboard"}),n.jsx("p",{className:"text-gray-600",children:"Live monitoring of critical server metrics with historical graphs, threshold alerting, and real-time status updates."})]}),n.jsx("div",{className:"mb-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:v.current.map((t,e)=>n.jsxs("div",{className:`p-3 rounded ${t.status==="critical"?"bg-red-100":t.status==="warning"?"bg-yellow-100":"bg-green-100"}`,children:[n.jsx("div",{className:"text-sm text-gray-600",children:t.name}),n.jsxs("div",{className:`text-2xl font-bold ${t.status==="critical"?"text-red-600":t.status==="warning"?"text-yellow-600":"text-green-600"}`,children:[t.value.toFixed(1),t.unit]})]},e))}),n.jsx("div",{className:"mb-4",children:n.jsxs("button",{onClick:N?L:D,className:`px-4 py-2 rounded ${N?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:[N?"Stop":"Start"," Monitoring"]})}),n.jsx("div",{className:"border rounded-lg p-4 bg-black",children:n.jsx("canvas",{ref:A,width:800,height:600,className:"block",style:{width:"100%",height:"auto",maxWidth:"100%",imageRendering:"pixelated"}})}),$.length>0&&n.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Active Alerts"}),n.jsx("div",{className:"space-y-1",children:$.slice(0,3).map(t=>n.jsxs("div",{className:"text-sm text-red-700",children:[n.jsxs("span",{className:"font-mono",children:["[",new Date(t.timestamp).toLocaleTimeString(),"]"]})," ",t.message]},t.id))})]}),n.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Legend:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("div",{children:"Green: Normal operation"}),n.jsx("div",{children:"Yellow: Warning threshold"}),n.jsx("div",{children:"Red: Critical threshold"}),n.jsx("div",{children:"Pink line: Threshold limit"})]})]})]})};export{W as component};
