import{r as y,j as s,V as T,R as ne,P as A,T as O,k as C,s as D,e as ie,t as R,h as E}from"./index-BqTI3VMm.js";const fe=function(){const _=y.useRef(null),M=y.useRef(),[d,P]=y.useState({outerDiameter:508,wallThickness:12.7,length:100,material:"carbon_steel"}),[r,v]=y.useState({internalPressure:7,externalPressure:.1,axialForce:0,bendingMoment:0,torsionalMoment:0,temperature:60,thermalGradient:0}),[b,L]=y.useState({analysisType:"static",designCode:"asme_b31",safetyFactorTarget:2,fatigueLife:1e6,loadCombination:"working"}),[c,U]=y.useState(null),[oe,me]=y.useState(!1),[W,de]=y.useState({showStressDistribution:!0,showDeformation:!1,stressColorScale:"von_mises",crossSection:"elevation",showGrid:!0,animationSpeed:1}),f={carbon_steel:{yieldStrength:358,ultimateStrength:455,elasticModulus:207,thermalExpansion:12e-6,density:7850,poissonRatio:.3,allowableStress:241,name:"Carbon Steel (API 5L X52)"},steel:{yieldStrength:250,ultimateStrength:400,elasticModulus:200,thermalExpansion:12e-6,density:7850,poissonRatio:.3,allowableStress:167,name:"Structural Steel"},stainless:{yieldStrength:215,ultimateStrength:505,elasticModulus:200,thermalExpansion:17e-6,density:8e3,poissonRatio:.3,allowableStress:143,name:"Stainless Steel 316"},aluminum:{yieldStrength:276,ultimateStrength:310,elasticModulus:69,thermalExpansion:23e-6,density:2700,poissonRatio:.33,allowableStress:138,name:"Aluminum 6061-T6"},copper:{yieldStrength:69,ultimateStrength:220,elasticModulus:110,thermalExpansion:17e-6,density:8960,poissonRatio:.34,allowableStress:48,name:"Copper C11000"},pvc:{yieldStrength:52,ultimateStrength:62,elasticModulus:3.4,thermalExpansion:7e-5,density:1400,poissonRatio:.38,allowableStress:20,name:"PVC (ASTM D2466)"}},V={asme_b31:{name:"ASME B31.3/B31.4",factor:.72,temperatureFactor:1},api_5l:{name:"API 5L",factor:.72,temperatureFactor:1},en_13480:{name:"EN 13480",factor:.67,temperatureFactor:1},jis_b8265:{name:"JIS B8265",factor:.6,temperatureFactor:1},custom:{name:"Custom",factor:.72,temperatureFactor:1}},J=()=>{const e=f[d.material],a=d.outerDiameter,l=d.wallThickness,t=a-2*l,p=A*(a*a-t*t)/4,i=A*(T(a,4)-T(t,4))/64,S=i/(a/2),n=2*i,g=r.internalPressure*t/(2*l),u=r.internalPressure*t/(4*l),o=r.axialForce*1e3/p,m=r.bendingMoment*1e6/S,x=u+o+m,h=-r.internalPressure/2,F=r.torsionalMoment*1e6*a/2/n,N=r.thermalGradient*d.length/2,j=e.elasticModulus*1e3*e.thermalExpansion*N,k=Math.abs(j),w=g,ee=x+k,I=[w,ee,h].sort((le,te)=>te-le),$=I[0],B=I[1],G=I[2],q=ne(.5*(T($-B,2)+T(B-G,2)+T(G-$,2))+3*T(F,2)),se=e.allowableStress*V[b.designCode].factor/q,ae=2*e.elasticModulus*1e3/(1-T(e.poissonRatio,2))*T(l/a,3);return{hoopStress:g,longitudinalStress:x,radialStress:h,shearStress:F,vonMisesStress:q,principalStress1:$,principalStress2:B,principalStress3:G,safetyFactor:se,bucklingPressure:ae,thermalStress:k}},z=(e,a)=>{const l=f[d.material],t=ie(Math.abs(e)/l.yieldStrength,0,1);return t<.3?R(E(120,80,50)):t<.6?R(E(60,80,50)):t<.9?R(E(30,80,50)):R(E(0,80,50))},Z=()=>{const e=_.current;if(!e)return;const a=e.getContext("2d");if(!a)return;const l=e.width,t=e.height;a.clearRect(0,0,l,t),K(a,l/4,t/2,150),Q(a,l*.6,50,l*.35,t-100),Y(a,50,t-200,300,150)},K=(e,a,l,t)=>{if(!c)return;const p=f[d.material],i=d.outerDiameter,S=i-2*d.wallThickness,n=t,g=t*(S/i);e.lineWidth=3;const u=W.stressColorScale==="von_mises"?c.vonMisesStress:c.hoopStress;if(e.fillStyle=z(u,p.yieldStrength),e.strokeStyle="#374151",e.beginPath(),e.arc(a,l,n,0,O),e.fill(),e.stroke(),e.fillStyle="#f8fafc",e.beginPath(),e.arc(a,l,g,0,O),e.fill(),e.stroke(),e.strokeStyle="#64748b",e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(a-n,l),e.lineTo(a+n,l),e.moveTo(a,l-n),e.lineTo(a,l+n),e.stroke(),e.setLineDash([]),e.fillStyle="#1f2937",e.font="12px Arial",e.textAlign="center",e.fillText(`OD: ${i.toFixed(1)} mm`,a,l-n-15),e.fillText(`ID: ${S.toFixed(1)} mm`,a,l-g-15),e.fillText(`t: ${d.wallThickness.toFixed(1)} mm`,a+n+30,l),W.showStressDistribution){const o=n+20,m=8;e.strokeStyle="#ef4444",e.fillStyle="#ef4444",e.lineWidth=2;for(let x=0;x<m;x++){const h=x*O/m,F=a+o*C(h),N=l+o*D(h),j=a+(o+15)*C(h),k=l+(o+15)*D(h);e.beginPath(),e.moveTo(F,N),e.lineTo(j,k),e.stroke();const w=h+A;e.beginPath(),e.moveTo(j,k),e.lineTo(j+5*C(w+.3),k+5*D(w+.3)),e.lineTo(j+5*C(w-.3),k+5*D(w-.3)),e.closePath(),e.fill()}}e.textAlign="left",e.fillText(`Material: ${p.name}`,a-n,l+n+30),e.fillText(`Pressure: ${r.internalPressure.toFixed(1)} MPa`,a-n,l+n+45),e.fillText(`Temperature: ${r.temperature}°C`,a-n,l+n+60)},Q=(e,a,l,t,p)=>{if(!c)return;e.fillStyle="#f8fafc",e.fillRect(a,l,t,p),e.strokeStyle="#e2e8f0",e.lineWidth=1,e.strokeRect(a,l,t,p),e.fillStyle="#1e293b",e.font="16px Arial",e.textAlign="center",e.fillText("Stress Analysis Results",a+t/2,l+20);const i=[{name:"Hoop",value:c.hoopStress,color:"#ef4444"},{name:"Longitudinal",value:c.longitudinalStress,color:"#3b82f6"},{name:"Radial",value:Math.abs(c.radialStress),color:"#10b981"},{name:"Shear",value:c.shearStress,color:"#f59e0b"},{name:"Von Mises",value:c.vonMisesStress,color:"#8b5cf6"},{name:"Thermal",value:c.thermalStress,color:"#ec4899"}],n=f[d.material].yieldStrength,g=25,u=35,o=l+50;i.forEach((h,F)=>{const N=o+F*u,j=Math.abs(h.value)/n*(t-120);e.fillStyle=h.color,e.fillRect(a+80,N,Math.max(j,2),g),e.strokeStyle="#374151",e.lineWidth=1,e.strokeRect(a+80,N,Math.max(j,2),g),e.fillStyle="#1f2937",e.font="12px Arial",e.textAlign="left",e.fillText(h.name,a+5,N+16),e.textAlign="right",e.fillText(`${h.value.toFixed(1)} MPa`,a+t-5,N+16)});const m=a+80+(t-120);e.strokeStyle="#dc2626",e.lineWidth=2,e.setLineDash([3,3]),e.beginPath(),e.moveTo(m,o),e.lineTo(m,o+i.length*u),e.stroke(),e.setLineDash([]),e.fillStyle="#dc2626",e.font="10px Arial",e.textAlign="center",e.fillText("Yield",m,o-5);const x=o+i.length*u+20;e.fillStyle=c.safetyFactor>=b.safetyFactorTarget?"#059669":"#dc2626",e.font="14px Arial",e.textAlign="center",e.fillText(`Safety Factor: ${c.safetyFactor.toFixed(2)}`,a+t/2,x)},Y=(e,a,l,t,p)=>{e.fillStyle="#f8fafc",e.fillRect(a,l,t,p),e.strokeStyle="#e2e8f0",e.lineWidth=1,e.strokeRect(a,l,t,p),e.fillStyle="#1e293b",e.font="14px Arial",e.textAlign="center",e.fillText("Loading Conditions",a+t/2,l+15);const i=l+p/2,S=t-60,n=20;if(e.fillStyle="#94a3b8",e.fillRect(a+30,i-n/2,S,n),e.strokeStyle="#475569",e.lineWidth=2,e.strokeRect(a+30,i-n/2,S,n),r.internalPressure>0){e.strokeStyle="#ef4444",e.fillStyle="#ef4444",e.lineWidth=2;const u=5;for(let o=0;o<u;o++){const m=a+40+o*(S-20)/(u-1);e.beginPath(),e.moveTo(m,i-n/2),e.lineTo(m,i-n/2-15),e.stroke(),e.beginPath(),e.moveTo(m,i-n/2-15),e.lineTo(m-3,i-n/2-10),e.lineTo(m+3,i-n/2-10),e.closePath(),e.fill(),e.beginPath(),e.moveTo(m,i+n/2),e.lineTo(m,i+n/2+15),e.stroke(),e.beginPath(),e.moveTo(m,i+n/2+15),e.lineTo(m-3,i+n/2+10),e.lineTo(m+3,i+n/2+10),e.closePath(),e.fill()}}if(r.axialForce!==0){e.strokeStyle="#3b82f6",e.fillStyle="#3b82f6",e.lineWidth=2;const u=r.axialForce>0?1:-1,o=u>0?a+15:a+t-15,m=u>0?a+30:a+t-30;e.beginPath(),e.moveTo(o,i),e.lineTo(m,i),e.stroke(),e.beginPath(),e.moveTo(m,i),e.lineTo(m-u*5,i-3),e.lineTo(m-u*5,i+3),e.closePath(),e.fill()}if(r.bendingMoment!==0){e.strokeStyle="#10b981",e.lineWidth=2;const u=a+t/2,o=25;e.beginPath(),e.arc(u,i-o,o,0,A),e.stroke(),e.fillStyle="#10b981",e.beginPath(),e.moveTo(u-o,i-o),e.lineTo(u-o-5,i-o-3),e.lineTo(u-o-5,i-o+3),e.closePath(),e.fill()}e.fillStyle="#1f2937",e.font="10px Arial",e.textAlign="left";const g=l+30;e.fillText(`P: ${r.internalPressure.toFixed(1)} MPa`,a+5,g),e.fillText(`F: ${r.axialForce.toFixed(0)} kN`,a+5,g+12),e.fillText(`M: ${r.bendingMoment.toFixed(0)} kN·m`,a+5,g+24),e.fillText(`T: ${r.torsionalMoment.toFixed(0)} kN·m`,a+5,g+36)},H=()=>{Z(),M.current=requestAnimationFrame(H)};y.useEffect(()=>{const e=_.current;e&&(e.width=1e3,e.height=700);const a=J();U(a)},[d,r,b]),y.useEffect(()=>(M.current=requestAnimationFrame(H),()=>{M.current&&cancelAnimationFrame(M.current)}),[c,W]);const X=e=>{switch(e){case"gas_transmission":P({outerDiameter:1067,wallThickness:17.5,length:1e3,material:"carbon_steel"}),v({...r,internalPressure:7,temperature:40});break;case"oil_pipeline":P({outerDiameter:508,wallThickness:12.7,length:500,material:"carbon_steel"}),v({...r,internalPressure:5.5,temperature:60});break;case"water_main":P({outerDiameter:300,wallThickness:8,length:100,material:"steel"}),v({...r,internalPressure:1.6,temperature:20});break;case"chemical_process":P({outerDiameter:150,wallThickness:6,length:50,material:"stainless"}),v({...r,internalPressure:4,temperature:150});break}};return s.jsx("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-slate-500 to-blue-500 rounded-full"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Pipeline Stress Analysis"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"Pipeline Engineering Tool"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:s.jsx("canvas",{ref:_,className:"border border-gray-300 rounded-lg bg-white w-full"})})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Pipeline Geometry"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Outer Diameter: ",d.outerDiameter," mm"]}),s.jsx("input",{type:"range",min:"100",max:"1500",step:"25",value:d.outerDiameter,onChange:e=>P(a=>({...a,outerDiameter:Number.parseInt(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Wall Thickness: ",d.wallThickness.toFixed(1)," mm"]}),s.jsx("input",{type:"range",min:"3",max:"50",step:"0.5",value:d.wallThickness,onChange:e=>P(a=>({...a,wallThickness:Number.parseFloat(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material"}),s.jsx("select",{value:d.material,onChange:e=>P(a=>({...a,material:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(f).map(([e,a])=>s.jsx("option",{value:e,children:a.name},e))})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pipeline Presets"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{key:"gas_transmission",name:"Gas Transmission"},{key:"oil_pipeline",name:"Oil Pipeline"},{key:"water_main",name:"Water Main"},{key:"chemical_process",name:"Chemical Process"}].map(e=>s.jsx("button",{onClick:()=>X(e.key),className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors",children:e.name},e.key))})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Loading Conditions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Internal Pressure: ",r.internalPressure.toFixed(1)," MPa"]}),s.jsx("input",{type:"range",min:"0",max:"15",step:"0.1",value:r.internalPressure,onChange:e=>v(a=>({...a,internalPressure:Number.parseFloat(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Axial Force: ",r.axialForce.toFixed(0)," kN"]}),s.jsx("input",{type:"range",min:"-1000",max:"1000",step:"50",value:r.axialForce,onChange:e=>v(a=>({...a,axialForce:Number.parseFloat(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Bending Moment: ",r.bendingMoment.toFixed(0)," kN·m"]}),s.jsx("input",{type:"range",min:"0",max:"500",step:"10",value:r.bendingMoment,onChange:e=>v(a=>({...a,bendingMoment:Number.parseFloat(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Temperature: ",r.temperature,"°C"]}),s.jsx("input",{type:"range",min:"-40",max:"200",step:"5",value:r.temperature,onChange:e=>v(a=>({...a,temperature:Number.parseInt(e.target.value)})),className:"w-full"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Analysis Settings"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Design Code"}),s.jsx("select",{value:b.designCode,onChange:e=>L(a=>({...a,designCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(V).map(([e,a])=>s.jsx("option",{value:e,children:a.name},e))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Analysis Type"}),s.jsxs("select",{value:b.analysisType,onChange:e=>L(a=>({...a,analysisType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"static",children:"Static Analysis"}),s.jsx("option",{value:"fatigue",children:"Fatigue Analysis"}),s.jsx("option",{value:"buckling",children:"Buckling Analysis"}),s.jsx("option",{value:"thermal",children:"Thermal Analysis"}),s.jsx("option",{value:"combined",children:"Combined Loading"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Target Safety Factor:"," ",b.safetyFactorTarget.toFixed(1)]}),s.jsx("input",{type:"range",min:"1.5",max:"4.0",step:"0.1",value:b.safetyFactorTarget,onChange:e=>L(a=>({...a,safetyFactorTarget:Number.parseFloat(e.target.value)})),className:"w-full"})]})]})]}),d.material&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Material Properties"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Yield Strength:"}),s.jsxs("span",{className:"font-mono",children:[f[d.material].yieldStrength," MPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Ultimate Strength:"}),s.jsxs("span",{className:"font-mono",children:[f[d.material].ultimateStrength," MPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Elastic Modulus:"}),s.jsxs("span",{className:"font-mono",children:[f[d.material].elasticModulus," GPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Allowable Stress:"}),s.jsxs("span",{className:"font-mono",children:[f[d.material].allowableStress," MPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Density:"}),s.jsxs("span",{className:"font-mono",children:[f[d.material].density," kg/m³"]})]})]})]}),c&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Critical Assessment"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Von Mises Stress:"}),s.jsxs("span",{className:`font-mono ${c.vonMisesStress>f[d.material].allowableStress?"text-red-600":"text-green-600"}`,children:[c.vonMisesStress.toFixed(1)," MPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Safety Factor:"}),s.jsx("span",{className:`font-mono ${c.safetyFactor<b.safetyFactorTarget?"text-red-600":"text-green-600"}`,children:c.safetyFactor.toFixed(2)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Buckling Pressure:"}),s.jsxs("span",{className:"font-mono",children:[c.bucklingPressure.toFixed(1)," MPa"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Status:"}),s.jsx("span",{className:`font-mono ${c.safetyFactor>=b.safetyFactorTarget?"text-green-600":c.safetyFactor>=1.5?"text-yellow-600":"text-red-600"}`,children:c.safetyFactor>=b.safetyFactorTarget?"SAFE":c.safetyFactor>=1.5?"CAUTION":"UNSAFE"})]})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-slate-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Pipeline Engineering Applications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-700",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Design Standards:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• ASME B31.3 Process Piping"}),s.jsx("li",{children:"• ASME B31.4 Pipeline Transportation"}),s.jsx("li",{children:"• API 5L Pipeline Specifications"}),s.jsx("li",{children:"• EN 13480 Metallic Industrial Piping"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Critical Assessments:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Pressure vessel analysis"}),s.jsx("li",{children:"• Fitness-for-service evaluation"}),s.jsx("li",{children:"• Remaining life assessment"}),s.jsx("li",{children:"• Integrity management programs"})]})]})]})]})]})})};export{fe as component};
