import{r as b,j as s,R as A,T as S,s as w,P as W,k as oe}from"./index-BqTI3VMm.js";const ue=function(){const P=b.useRef(null),R=b.useRef(),[l,C]=b.useState({springConstant:25e3,dampingCoefficient:2e3,sprungMass:400,unsprungMass:50,tireStiffness:2e5,tireDamping:50}),[me,pe]=b.useState({wheelbase:2.7,frontAxleDistance:1.2,rearAxleDistance:1.5,pitchInertia:2500,rollInertia:800,vehicleSpeed:20}),[v,I]=b.useState({type:"bump",amplitude:.05,frequency:2,duration:10,position:.5}),[o,X]=b.useState({time:[],sprungMassDisplacement:[],unsprungMassDisplacement:[],roadProfile:[],suspensionForce:[],tireForce:[],sprungAcceleration:[],tireDeflection:[],suspensionTravel:[]}),[M,Q]=b.useState(null),[k,E]=b.useState(!1),[T,H]=b.useState(0),[j,F]=b.useState({showSprungMass:!0,showUnsprungMass:!0,showRoadProfile:!0,showForces:!1,showAcceleration:!1,timeWindow:10,amplitudeScale:1e3}),V={comfort:{springConstant:2e4,dampingCoefficient:1800,sprungMass:400,unsprungMass:50},sport:{springConstant:35e3,dampingCoefficient:2500,sprungMass:400,unsprungMass:45},racing:{springConstant:5e4,dampingCoefficient:3500,sprungMass:350,unsprungMass:40},off_road:{springConstant:15e3,dampingCoefficient:1500,sprungMass:450,unsprungMass:60},luxury:{springConstant:18e3,dampingCoefficient:2200,sprungMass:500,unsprungMass:55}},G={step:{type:"step",amplitude:.03,frequency:1,duration:10},bump:{type:"bump",amplitude:.05,frequency:2,duration:10},sine:{type:"sine",amplitude:.02,frequency:1.5,duration:10},speedbump:{type:"speedbump",amplitude:.08,frequency:.5,duration:10},pothole:{type:"pothole",amplitude:-.06,frequency:1,duration:10},random:{type:"random",amplitude:.01,frequency:3,duration:10}},J=(e,n)=>e.map(t=>{switch(n.type){case"step":return t>2?n.amplitude:0;case"bump":const i=2,p=.5;if(t>i&&t<i+p){const c=(t-i)/p;return n.amplitude*w(W*c)}return 0;case"sine":return t>1?n.amplitude*w(S*n.frequency*(t-1)):0;case"speedbump":const g=3,a=1.5;if(t>g&&t<g+a){const c=(t-g)/a;return n.amplitude*(1-oe(S*c))/2}return 0;case"pothole":const u=2.5,y=.8;if(t>u&&t<u+y){const c=(t-u)/y;return n.amplitude*w(W*c)}return 0;case"random":return t>1?n.amplitude*(w(S*1.2*t)*.5+w(S*2.1*t)*.3+w(S*3.7*t)*.2):0;default:return 0}}),K=()=>{const n=v.duration,t=Math.floor(n/.01),i=[],p=[],g=[],a=[],u=[],y=[],c=[],r=[],m=[];let h=0,x=0,f=0,d=0;for(let N=0;N<=t;N++){const D=N*.01;i.push(D);const z=J([D],v)[0];a.push(z);const $=h-x,ie=f-d,q=-l.springConstant*$-l.dampingCoefficient*ie,O=x-z,re=d,_=-l.tireStiffness*O-l.tireDamping*re,B=-q/l.sprungMass,le=(q+_)/l.unsprungMass;p.push(h),g.push(x),u.push(q),y.push(_),c.push(B),r.push(O),m.push($),f+=B*.01,d+=le*.01,h+=f*.01,x+=d*.01}return{time:i,sprungMassDisplacement:p,unsprungMassDisplacement:g,roadProfile:a,suspensionForce:u,tireForce:y,sprungAcceleration:c,tireDeflection:r,suspensionTravel:m}},L=e=>{if(e.time.length<2)return{rideComfort:0,roadHolding:0,suspensionWorkspace:0,naturalFrequency:0,dampingRatio:0,transmissibility:0,settlingTime:0};const n=A(e.sprungAcceleration.reduce((d,N)=>d+N*N,0)/e.sprungAcceleration.length),t=l.sprungMass*9.81,i=e.tireForce.map(d=>d-t),p=A(i.reduce((d,N)=>d+N*N,0)/i.length),g=Math.max(...e.suspensionTravel.map(Math.abs)),a=A(l.springConstant/l.sprungMass)/S,u=2*A(l.springConstant*l.sprungMass),y=l.dampingCoefficient/u,c=Math.max(...e.roadProfile.map(Math.abs)),r=Math.max(...e.sprungMassDisplacement.map(Math.abs)),m=c>0?r/c:0;let h=e.time[e.time.length-1];const x=e.sprungMassDisplacement[e.sprungMassDisplacement.length-1],f=.02*Math.abs(x);for(let d=e.sprungMassDisplacement.length-1;d>=0;d--)if(Math.abs(e.sprungMassDisplacement[d]-x)>f){h=e.time[d];break}return{rideComfort:n,roadHolding:p,suspensionWorkspace:g,naturalFrequency:a,dampingRatio:y,transmissibility:m,settlingTime:h}},U=()=>{const e=K();X(e),Q(L(e))},Z=()=>{const e=P.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const t=e.width,i=e.height;n.clearRect(0,0,t,i),ee(n,t/4,i/2,200),se(n,t/2,50,t/2-50,i-100)},ee=(e,n,t,i,p)=>{const a=o.sprungMassDisplacement.length>0?o.sprungMassDisplacement[Math.floor(T/.01)]*1e3:0,u=o.unsprungMassDisplacement.length>0?o.unsprungMassDisplacement[Math.floor(T/.01)]*1e3:0,y=o.roadProfile.length>0?o.roadProfile[Math.floor(T/.01)]*1e3:0;e.fillStyle="#8b7355",e.fillRect(n-50,t+100+y,i+100,20);const c=t+80+u;e.fillStyle="#1f2937",e.fillRect(n+75,c,50,20),e.strokeStyle="#374151",e.lineWidth=2,e.strokeRect(n+75,c,50,20),e.fillStyle="#6b7280",e.beginPath(),e.arc(n+100,c+10,8,0,S),e.fill();const r=t+20+a,m=c-10;e.strokeStyle="#ef4444",e.lineWidth=3,e.beginPath(),e.moveTo(n+50,r);const h=8,x=m-r;for(let f=0;f<=h*4;f++){const d=f/(h*4),N=r+d*x,D=n+50+10*w(f*W/2);e.lineTo(D,N)}e.stroke(),e.strokeStyle="#3b82f6",e.lineWidth=4,e.beginPath(),e.moveTo(n+150,r),e.lineTo(n+150,m),e.stroke(),e.fillStyle="#1e40af",e.fillRect(n+145,r+x*.3,10,20),e.fillStyle="#10b981",e.fillRect(n,t+a,i,40),e.strokeStyle="#059669",e.lineWidth=2,e.strokeRect(n,t+a,i,40),e.fillStyle="#1f2937",e.font="12px Arial",e.textAlign="left",e.fillText(`Sprung Mass: ${l.sprungMass} kg`,n-50,t-20),e.fillText(`Displacement: ${a.toFixed(1)} mm`,n-50,t-5),e.fillText(`Unsprung Mass: ${l.unsprungMass} kg`,n-50,c+40),e.fillText(`Spring: ${l.springConstant} N/m`,n-50,c+55),e.fillText(`Damper: ${l.dampingCoefficient} N·s/m`,n-50,c+70)},se=(e,n,t,i,p)=>{if(o.time.length<2)return;[{title:"Displacement (mm)",y:t,height:p/3-20,datasets:[{data:o.roadProfile.map(a=>a*1e3),color:"#8b7355",label:"Road",show:j.showRoadProfile},{data:o.unsprungMassDisplacement.map(a=>a*1e3),color:"#6b7280",label:"Unsprung",show:j.showUnsprungMass},{data:o.sprungMassDisplacement.map(a=>a*1e3),color:"#10b981",label:"Sprung",show:j.showSprungMass}]},{title:"Forces (N)",y:t+p/3,height:p/3-20,datasets:[{data:o.suspensionForce,color:"#ef4444",label:"Suspension",show:j.showForces},{data:o.tireForce,color:"#1f2937",label:"Tire",show:j.showForces}]},{title:"Acceleration (m/s²)",y:t+2*p/3,height:p/3-20,datasets:[{data:o.sprungAcceleration,color:"#8b5cf6",label:"Sprung Mass",show:j.showAcceleration}]}].forEach(a=>{a.datasets.some(u=>u.show)&&ne(e,a,n,a.y,i,a.height)})},ne=(e,n,t,i,p,g)=>{e.fillStyle="#f8fafc",e.fillRect(t,i,p,g),e.strokeStyle="#e2e8f0",e.lineWidth=1,e.strokeRect(t,i,p,g),e.fillStyle="#1e293b",e.font="14px Arial",e.textAlign="left",e.fillText(n.title,t+5,i+15);let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;n.datasets.forEach(r=>{if(r.show&&r.data.length>0){const m=Math.min(...r.data),h=Math.max(...r.data);a=Math.min(a,m),u=Math.max(u,h)}}),a===u&&(a-=1,u+=1);const y=Math.max(...o.time)-Math.min(...o.time),c=u-a;e.strokeStyle="#f1f5f9",e.lineWidth=1;for(let r=1;r<=4;r++){const m=i+r*g/5;e.beginPath(),e.moveTo(t,m),e.lineTo(t+p,m),e.stroke()}if(n.datasets.forEach(r=>{if(!(!r.show||r.data.length===0)){e.strokeStyle=r.color,e.lineWidth=2,e.beginPath();for(let m=0;m<r.data.length;m++){const h=o.time[m],x=r.data[m],f=t+h/y*p,d=i+g-(x-a)/c*g;m===0?e.moveTo(f,d):e.lineTo(f,d)}e.stroke()}}),k&&o.time.length>0){const r=T/Math.max(...o.time),m=t+r*p;e.strokeStyle="#dc2626",e.lineWidth=2,e.beginPath(),e.moveTo(m,i),e.lineTo(m,i+g),e.stroke()}},Y=()=>{k&&H(e=>{const n=o.time.length>0?Math.max(...o.time):10,t=e+.05;return t>n?0:t}),Z(),R.current=requestAnimationFrame(Y)};b.useEffect(()=>{const e=P.current;e&&(e.width=1e3,e.height=600),U()},[l,v]),b.useEffect(()=>(R.current=requestAnimationFrame(Y),()=>{R.current&&cancelAnimationFrame(R.current)}),[k,o,T]);const te=e=>{C(n=>({...n,...V[e]}))},ae=e=>{I(n=>({...n,...G[e]}))};return s.jsx("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gradient-to-br from-orange-50 to-red-50 min-h-screen",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-full"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Automotive Suspension Analysis"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"Vehicle Dynamics Engineering Tool"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:s.jsx("canvas",{ref:P,className:"border border-gray-300 rounded-lg bg-white w-full"})}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>E(!k),className:`px-4 py-2 rounded-lg font-medium ${k?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:[k?"Stop":"Start"," Animation"]}),s.jsx("button",{onClick:()=>{E(!1),H(0),U()},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Reset"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Suspension Parameters"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Spring Constant: ",l.springConstant," N/m"]}),s.jsx("input",{type:"range",min:"10000",max:"60000",step:"1000",value:l.springConstant,onChange:e=>C(n=>({...n,springConstant:Number.parseInt(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Damping: ",l.dampingCoefficient," N·s/m"]}),s.jsx("input",{type:"range",min:"500",max:"5000",step:"100",value:l.dampingCoefficient,onChange:e=>C(n=>({...n,dampingCoefficient:Number.parseInt(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sprung Mass: ",l.sprungMass," kg"]}),s.jsx("input",{type:"range",min:"200",max:"800",step:"50",value:l.sprungMass,onChange:e=>C(n=>({...n,sprungMass:Number.parseInt(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unsprung Mass: ",l.unsprungMass," kg"]}),s.jsx("input",{type:"range",min:"30",max:"80",step:"5",value:l.unsprungMass,onChange:e=>C(n=>({...n,unsprungMass:Number.parseInt(e.target.value)})),className:"w-full"})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Suspension Presets"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(V).map(e=>s.jsx("button",{onClick:()=>te(e),className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded hover:bg-orange-200 transition-colors",children:e.replace("_"," ")},e))})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Road Input"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Input Type"}),s.jsxs("select",{value:v.type,onChange:e=>{const n=e.target.value;ae(n)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"step",children:"Step Input"}),s.jsx("option",{value:"bump",children:"Single Bump"}),s.jsx("option",{value:"sine",children:"Sinusoidal"}),s.jsx("option",{value:"speedbump",children:"Speed Bump"}),s.jsx("option",{value:"pothole",children:"Pothole"}),s.jsx("option",{value:"random",children:"Random Road"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amplitude: ",(v.amplitude*1e3).toFixed(0)," mm"]}),s.jsx("input",{type:"range",min:"0.01",max:"0.15",step:"0.005",value:v.amplitude,onChange:e=>I(n=>({...n,amplitude:Number.parseFloat(e.target.value)})),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Frequency: ",v.frequency.toFixed(1)," Hz"]}),s.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.1",value:v.frequency,onChange:e=>I(n=>({...n,frequency:Number.parseFloat(e.target.value)})),className:"w-full"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Display Options"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showSprungMass,onChange:e=>F(n=>({...n,showSprungMass:e.target.checked})),className:"mr-2"}),"Sprung Mass"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showUnsprungMass,onChange:e=>F(n=>({...n,showUnsprungMass:e.target.checked})),className:"mr-2"}),"Unsprung Mass"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showRoadProfile,onChange:e=>F(n=>({...n,showRoadProfile:e.target.checked})),className:"mr-2"}),"Road Profile"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showForces,onChange:e=>F(n=>({...n,showForces:e.target.checked})),className:"mr-2"}),"Forces"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showAcceleration,onChange:e=>F(n=>({...n,showAcceleration:e.target.checked})),className:"mr-2"}),"Acceleration"]})]})]}),M&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Ride Comfort:"}),s.jsxs("span",{className:"font-mono",children:[M.rideComfort.toFixed(2)," m/s²"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Road Holding:"}),s.jsxs("span",{className:"font-mono",children:[M.roadHolding.toFixed(0)," N"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Max Travel:"}),s.jsxs("span",{className:"font-mono",children:[(M.suspensionWorkspace*1e3).toFixed(1)," ","mm"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Natural Freq:"}),s.jsxs("span",{className:"font-mono",children:[M.naturalFrequency.toFixed(2)," Hz"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Damping Ratio:"}),s.jsx("span",{className:"font-mono",children:M.dampingRatio.toFixed(3)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Transmissibility:"}),s.jsx("span",{className:"font-mono",children:M.transmissibility.toFixed(2)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Settling Time:"}),s.jsxs("span",{className:"font-mono",children:[M.settlingTime.toFixed(1)," s"]})]})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-orange-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-2",children:"Automotive Engineering Applications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-orange-700",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Performance Objectives:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Ride comfort optimization"}),s.jsx("li",{children:"• Road holding improvement"}),s.jsx("li",{children:"• Suspension travel minimization"}),s.jsx("li",{children:"• Dynamic stability"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Design Applications:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Spring and damper sizing"}),s.jsx("li",{children:"• Performance tuning"}),s.jsx("li",{children:"• Comfort vs handling trade-offs"}),s.jsx("li",{children:"• Vehicle dynamics validation"})]})]})]})]})]})})};export{ue as component};
