import{r as h,j as e,B as p,P as B,T as x,L as le,h as H,s as Y,b as re,v as G,d as _,e as J}from"./index-BqTI3VMm.js";import{B as k}from"./button-B7yz3rPd.js";import{C as y,a as w,b as N,d as W,c as S}from"./card--FLQYnaa.js";import{S as v}from"./slider-nv5Y-SsR.js";const he=function(){const C=h.useRef(null),b=h.useRef(),D=h.useRef(0),P=h.useRef(!1),[g,A]=h.useState([]),[F,L]=h.useState(!1),[r,j]=h.useState({waveSpeed:50,damping:.02,resolution:4,timeScale:1,showWaves:!0,showSources:!0,colorMode:"amplitude"}),[R,I]=h.useState("two-source"),f=(t,s,a=1)=>({x:t,y:s,frequency:a,amplitude:1,phase:0,color:H(re(0,360),70,60),id:Date.now()+Math.random(),active:!0}),O=t=>{const s=C.current;if(!s)return;const a=s.width/2,i=s.height/2;let n=[];switch(t){case"two-source":n=[f(a-100,i,1),f(a+100,i,1)];break;case"three-source":n=[f(a,i-80,1),f(a-70,i+40,1),f(a+70,i+40,1)];break;case"interference":n=[f(a-120,i,.8),f(a+120,i,1.2)];break;case"standing":n=[f(50,i,1),{...f(s.width-50,i,1),phase:B}];break}A(n)},K=(t,s,a)=>{let i=0;for(const n of g){if(!n.active)continue;const l=G({x:t,y:s},{x:n.x,y:n.y}),c=x*n.frequency/r.waveSpeed,d=x*n.frequency,u=c*l-d*a*r.timeScale+n.phase,o=Math.exp(-l*r.damping),m=n.amplitude*o*Y(u);i+=m}return i},Q=(t,s,a)=>{let i=0,n=0;for(const l of g){if(!l.active)continue;const c=G({x:t,y:s},{x:l.x,y:l.y}),d=x*l.frequency/r.waveSpeed,u=x*l.frequency,o=d*c-u*a*r.timeScale+l.phase;i+=o,n++}return n>0?i/n:0},U=(t,s,a)=>{switch(r.colorMode){case"amplitude":{const i=J(t/a,-1,1),n=Math.abs(i);return i>0?{r:Math.floor(255*n),g:Math.floor(255*n*.7),b:0}:{r:0,g:Math.floor(255*n*.5),b:Math.floor(255*n)}}case"phase":{const n=(s%x+x)%x/x*360,l=H(n,80,50),c=_(l);return{r:c.r,g:c.g,b:c.b}}case"rainbow":{const n=J((t+a)/(2*a),0,1)*300,l=H(n,90,50),c=_(l);return{r:c.r,g:c.g,b:c.b}}default:return{r:0,g:0,b:0}}},E=()=>{const t=C.current,s=t==null?void 0:t.getContext("2d");if(!t||!s)return;const{width:a,height:i}=t,n=D.current;if(r.showWaves){const l=s.createImageData(a,i),c=l.data;let d=0;const u=[];for(let o=0;o<i;o+=r.resolution){u[o]=[];for(let m=0;m<a;m+=r.resolution){const q=K(m,o,n);u[o][m]=q,d=Math.max(d,Math.abs(q))}}for(let o=0;o<i;o+=r.resolution)for(let m=0;m<a;m+=r.resolution){const q=u[o][m]||0,ie=Q(m,o,n),$=U(q,ie,d);for(let M=0;M<r.resolution&&o+M<i;M++)for(let T=0;T<r.resolution&&m+T<a;T++){const z=((o+M)*a+(m+T))*4;c[z]=$.r,c[z+1]=$.g,c[z+2]=$.b,c[z+3]=255}}s.putImageData(l,0,0)}else s.fillStyle="#000000",s.fillRect(0,0,a,i);r.showSources&&g.forEach(l=>{const{x:c,y:d}=l,u=5+3*Y(n*x*l.frequency*r.timeScale+l.phase),o=s.createRadialGradient(c,d,0,c,d,u+10);o.addColorStop(0,`hsla(${l.color.h}, ${l.color.s}%, ${l.color.l}%, 0.8)`),o.addColorStop(1,"rgba(255, 255, 255, 0)"),s.fillStyle=o,s.beginPath(),s.arc(c,d,u+10,0,x),s.fill(),s.fillStyle=l.active?"#ffffff":"#666666",s.beginPath(),s.arc(c,d,u,0,x),s.fill(),s.strokeStyle=l.active?"#000000":"#444444",s.lineWidth=2,s.stroke(),s.fillStyle="#000000",s.font="12px Arial",s.textAlign="center",s.fillText(`f=${l.frequency.toFixed(1)}`,c,d-u-15)}),g.length>1&&(s.fillStyle="rgba(0, 0, 0, 0.7)",s.fillRect(10,10,200,60),s.fillStyle="#ffffff",s.font="14px Arial",s.textAlign="left",s.fillText(`Sources: ${g.filter(l=>l.active).length}`,20,30),s.fillText(`Time: ${n.toFixed(1)}s`,20,50),s.fillText(`Speed: ${r.waveSpeed}px/s`,20,70))},X=()=>{P.current&&(D.current+=.02,E(),b.current=requestAnimationFrame(X))},Z=()=>{P.current=!0,L(!0),b.current=requestAnimationFrame(X)},ee=()=>{P.current=!1,L(!1),b.current&&cancelAnimationFrame(b.current)},se=()=>{D.current=0,E()},te=t=>{const s=C.current;if(!s)return;const a=s.getBoundingClientRect(),i=t.clientX-a.left,n=t.clientY-a.top,l=f(i,n,1);A(c=>[...c,l]),I("custom")},ae=t=>{A(s=>s.map(a=>a.id===t?{...a,active:!a.active}:a))},V=(t,s,a)=>{A(i=>i.map(n=>n.id===t?{...n,[s]:a}:n))},ne=()=>{A([]),I("custom")};return h.useEffect(()=>{const t=C.current;t&&(t.width=800,t.height=600,O("two-source"))},[]),h.useEffect(()=>{R!=="custom"&&O(R)},[R]),h.useEffect(()=>{F||E()},[g,r]),h.useEffect(()=>()=>{P.current=!1,b.current&&cancelAnimationFrame(b.current)},[]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Advanced Wave Physics Simulator"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Multi-source interference with real-time controls, preset patterns, and educational wave mechanics."}),e.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:e.jsx("p",{className:"text-teal-800",children:"🌊 Watch waves interfere constructively and destructively, click to add sources"})})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs(w,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:["Animation Controls",F&&e.jsx(p,{variant:"secondary",children:"Running"})]}),e.jsx(W,{children:"Control wave animation and time progression"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(k,{onClick:Z,disabled:F,variant:"default",children:"Start Animation"}),e.jsx(k,{onClick:ee,disabled:!F,variant:"destructive",children:"Stop Animation"}),e.jsx(k,{onClick:se,variant:"outline",children:"Reset Time"}),e.jsx(k,{onClick:ne,variant:"secondary",children:"Clear Sources"})]})})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs(w,{children:[e.jsx(N,{children:"Wave Configuration"}),e.jsx(W,{children:"Adjust pattern presets, visualization settings, and wave resolution"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Preset Pattern"}),e.jsxs("select",{value:R,onChange:t=>I(t.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx("option",{value:"two-source",children:"Two Source"}),e.jsx("option",{value:"three-source",children:"Three Source"}),e.jsx("option",{value:"interference",children:"Different Frequencies"}),e.jsx("option",{value:"standing",children:"Standing Wave"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Color Mode"}),e.jsxs("select",{value:r.colorMode,onChange:t=>j(s=>({...s,colorMode:t.target.value})),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx("option",{value:"amplitude",children:"Amplitude"}),e.jsx("option",{value:"phase",children:"Phase"}),e.jsx("option",{value:"rainbow",children:"Rainbow"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Display Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.showWaves,onChange:t=>j(s=>({...s,showWaves:t.target.checked})),className:"rounded border-border text-primary focus:ring-ring focus:ring-2"}),e.jsx("span",{className:"text-sm",children:"Show Waves"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.showSources,onChange:t=>j(s=>({...s,showSources:t.target.checked})),className:"rounded border-border text-primary focus:ring-ring focus:ring-2"}),e.jsx("span",{className:"text-sm",children:"Show Sources"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Resolution:"," ",e.jsx(p,{variant:"outline",children:r.resolution})]}),e.jsx(v,{value:[r.resolution],onValueChange:t=>j(s=>({...s,resolution:t[0]})),min:1,max:8,step:1,className:"w-full"})]})]})})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs(w,{children:[e.jsx(N,{children:"Physics Parameters"}),e.jsx(W,{children:"Fine-tune wave physics behavior and simulation speed"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Wave Speed",e.jsx(p,{variant:"secondary",children:r.waveSpeed})]}),e.jsx(v,{value:[r.waveSpeed],onValueChange:t=>j(s=>({...s,waveSpeed:t[0]})),min:10,max:200,step:1,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Damping",e.jsx(p,{variant:"secondary",children:r.damping.toFixed(3)})]}),e.jsx(v,{value:[r.damping],onValueChange:t=>j(s=>({...s,damping:t[0]})),min:0,max:.1,step:.001,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Time Scale",e.jsx(p,{variant:"secondary",children:r.timeScale.toFixed(1)})]}),e.jsx(v,{value:[r.timeScale],onValueChange:t=>j(s=>({...s,timeScale:t[0]})),min:.1,max:3,step:.1,className:"w-full"})]})]})})]}),e.jsxs(y,{className:"mb-6",children:[e.jsxs(w,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:["Wave Simulation Canvas",e.jsxs(p,{variant:"outline",children:[g.length," Sources"]})]}),e.jsx(W,{children:"Click anywhere on the canvas to add wave sources and watch interference patterns"})]}),e.jsx(S,{children:e.jsx("canvas",{ref:C,className:"border border-border rounded-lg bg-black cursor-crosshair w-full",style:{maxWidth:"100%",height:"auto"},onClick:te})})]}),g.length>0&&e.jsxs(y,{className:"mb-6",children:[e.jsxs(w,{children:[e.jsx(N,{children:"Wave Sources Configuration"}),e.jsx(W,{children:"Adjust frequency, amplitude, and phase for each wave source"})]}),e.jsx(S,{children:e.jsx("div",{className:"grid gap-6",children:g.map((t,s)=>e.jsxs(y,{className:"bg-muted/50",children:[e.jsx(w,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(N,{className:"text-lg",children:["Source ",s+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:t.active?"default":"secondary",className:t.active?"bg-green-500":"",children:t.active?"Active":"Inactive"}),e.jsx(k,{size:"sm",variant:"outline",onClick:()=>ae(t.id),children:"Toggle"})]})]})}),e.jsx(S,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Frequency",e.jsxs(p,{variant:"outline",children:[t.frequency.toFixed(1)," Hz"]})]}),e.jsx(v,{value:[t.frequency],onValueChange:a=>V(t.id,"frequency",a[0]),min:.1,max:3,step:.1,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Amplitude",e.jsx(p,{variant:"outline",children:t.amplitude.toFixed(1)})]}),e.jsx(v,{value:[t.amplitude],onValueChange:a=>V(t.id,"amplitude",a[0]),min:.1,max:2,step:.1,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center justify-between",children:["Phase",e.jsxs(p,{variant:"outline",children:[(t.phase*180/B).toFixed(0),"°"]})]}),e.jsx(v,{value:[t.phase],onValueChange:a=>V(t.id,"phase",a[0]),min:0,max:x,step:B/12,className:"w-full"})]})]})})]},t.id))})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"Wave Interference"}),e.jsxs("ul",{className:"text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Constructive"}),": Waves add when in phase (brighter)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Destructive"}),": Waves cancel when out of phase (darker)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Standing Waves"}),": Result from opposing wave sources"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Superposition"}),": Total wave is sum of individual waves"]})]})]}),e.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-teal-800",children:"Interactive Features"}),e.jsxs("ul",{className:"text-teal-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Multiple Sources"}),": Add unlimited wave sources"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Real-time Controls"}),": Adjust frequency, amplitude, phase"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Visual Modes"}),": Amplitude, phase, and rainbow coloring"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Performance"}),": Adjustable resolution for smooth animation"]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(le,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:"← Back to Examples"})})]})};export{he as component};
