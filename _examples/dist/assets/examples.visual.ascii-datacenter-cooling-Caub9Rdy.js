import{r as x,j as a,e as Y,l as H}from"./index-BqTI3VMm.js";const me=function(){const Q=x.useRef(null),B=x.useRef(0),P=x.useRef(new Map),Z=x.useRef(new Map),U=x.useRef(new Map),q=x.useRef([]),L=x.useRef(new Map),[M,k]=x.useState(!0),[_,z]=x.useState(1),[W,ee]=x.useState("temperature"),[E,te]=x.useState("raised_floor"),[T,ae]=x.useState("traditional"),[w,le]=x.useState("thermal"),[I,oe]=x.useState(!0),[O,re]=x.useState(!0),[V,se]=x.useState(!1),[R,ie]=x.useState(!1),[N,ne]=x.useState(25),[D,ce]=x.useState(1.5),v={thermal:{bg:"#000011",cold:"#0000FF",cool:"#00AAFF",warm:"#FFAA00",hot:"#FF4400",critical:"#FF0000",text:"#FFFFFF",flow:"#88AAFF"},datacenter:{bg:"#001122",cold:"#00CCFF",cool:"#00AAAA",warm:"#FFCC00",hot:"#FF8800",critical:"#FF0000",text:"#FFFFFF",flow:"#AAFFFF"},efficiency:{bg:"#002200",cold:"#00FF00",cool:"#88FF88",warm:"#FFFF00",hot:"#FFAA00",critical:"#FF4444",text:"#FFFFFF",flow:"#AAFFAA"},night_vision:{bg:"#000000",cold:"#004400",cool:"#008800",warm:"#AAAA00",hot:"#AA4400",critical:"#AA0000",text:"#00FF00",flow:"#44AA44"},arctic:{bg:"#001122",cold:"#FFFFFF",cool:"#AAFFFF",warm:"#88AAFF",hot:"#4488FF",critical:"#0044FF",text:"#FFFFFF",flow:"#CCFFFF"}};return x.useEffect(()=>{const s=new Map,l=new Map,$=new Map,C=new Map;if(E==="raised_floor"){[{name:"CRAC-A1",x:5,y:5,capacity:100,zone:"Zone-A"},{name:"CRAC-A2",x:5,y:45,capacity:100,zone:"Zone-A"},{name:"CRAC-B1",x:85,y:5,capacity:100,zone:"Zone-B"},{name:"CRAC-B2",x:85,y:45,capacity:100,zone:"Zone-B"}].forEach(i=>{s.set(i.name,{id:i.name,name:i.name,type:"crac",capacity:i.capacity,power_usage:i.capacity*.25,efficiency:3.5,status:"running",setpoint:22,actual_temp:22+(Math.random()-.5)*2,humidity:45+(Math.random()-.5)*10,airflow:i.capacity*400,x:i.x,y:i.y,zone:i.zone,redundancy_group:i.zone,alarm_state:!1,runtime_hours:Math.random()*8760})});for(let i=0;i<4;i++)for(let g=0;g<10;g++){const S=`R${i+1}-${g+1}`,G=15+g*7,J=10+i*10;$.set(S,{id:S,name:S,heat_load:5+Math.random()*10,inlet_temp:20+Math.random()*4,outlet_temp:0,delta_t:0,power_usage:8+Math.random()*12,u_position:42,density:Math.random()<.3?"high":Math.random()<.6?"medium":"low",x:G,y:J,zone:g<5?"Zone-A":"Zone-B",fan_speed:60+Math.random()*30,status:"normal"})}for(let i=0;i<20;i++){const g=`TEMP-${i+1}`;l.set(g,{id:g,name:g,temperature:22+(Math.random()-.5)*8,humidity:45+(Math.random()-.5)*15,airflow_velocity:50+Math.random()*100,x:10+i%8*10,y:8+Math.floor(i/8)*12,zone:i%8<4?"Zone-A":"Zone-B",alert_threshold_high:27,alert_threshold_low:18,trend:"stable",history:Array(10).fill(0).map(()=>22+(Math.random()-.5)*4)})}C.set("Zone-A",{id:"Zone-A",name:"Zone A",x:10,y:5,width:40,height:45,target_temp:22,actual_temp:23,pue:1.4,cooling_load:200,type:"equipment"}),C.set("Zone-B",{id:"Zone-B",name:"Zone B",x:55,y:5,width:40,height:45,target_temp:22,actual_temp:23.5,pue:1.45,cooling_load:220,type:"equipment"});for(let i=0;i<4;i+=2)C.set(`Cold-Aisle-${i+1}`,{id:`Cold-Aisle-${i+1}`,name:`Cold Aisle ${i+1}`,x:15,y:8+i*10,width:60,height:3,target_temp:20,actual_temp:21,pue:1,cooling_load:0,type:"cold_aisle"});for(let i=1;i<4;i+=2)C.set(`Hot-Aisle-${i+1}`,{id:`Hot-Aisle-${i+1}`,name:`Hot Aisle ${i+1}`,x:15,y:8+i*10,width:60,height:3,target_temp:35,actual_temp:32,pue:1,cooling_load:0,type:"hot_aisle"})}P.current=s,Z.current=l,U.current=$,L.current=C},[E]),x.useEffect(()=>{const s=Q.current;if(!s)return;const l=s.getContext("2d");if(!l)return;const $=()=>{s.width=s.offsetWidth,s.height=s.offsetHeight},C=()=>{const t=P.current,o=Z.current,r=U.current,n=L.current,c=q.current,h=Date.now()/1e3;r.forEach(e=>{let y=1;R?y=.3:y=.8+.4*Math.sin(h*.1)+(Math.random()-.5)*.2;const f=e.density==="extreme"?20:e.density==="high"?15:e.density==="medium"?10:5;e.heat_load=Y(f*y,2,25),e.power_usage=e.heat_load*1.1,e.delta_t=e.heat_load/2,e.outlet_temp=e.inlet_temp+e.delta_t,e.inlet_temp>27?(e.status="critical",e.fan_speed=100):e.inlet_temp>24?(e.status="warning",e.fan_speed=80):(e.status="normal",e.fan_speed=60+e.heat_load/20*40)}),t.forEach(e=>{const F=Array.from(r.values()).filter(u=>Math.sqrt((u.x-e.x)**2+(u.y-e.y)**2)<50&&u.zone===e.zone).reduce((u,d)=>u+d.heat_load,0)*1.2,j=Math.min(F/e.capacity,1);e.power_usage=e.capacity*.15+e.capacity*.35*j,T==="economizer"?N<15&&(e.power_usage*=.7,e.efficiency=8):T==="containment"?e.efficiency=4.2:T==="liquid_cooling"&&(e.efficiency=6,e.power_usage*=.8);const m=e.actual_temp-e.setpoint;Math.abs(m)>.5&&(e.actual_temp=H(e.actual_temp,e.setpoint,.1*_)),R?(e.status="emergency",e.setpoint=18):e.power_usage>e.capacity*.9?(e.status="fault",e.alarm_state=!0):(e.status="running",e.alarm_state=!1),e.runtime_hours+=_/3600}),o.forEach(e=>{const y=Array.from(r.values()).filter(p=>Math.sqrt((p.x-e.x)**2+(p.y-e.y)**2)<20),f=Array.from(t.values()).filter(p=>Math.sqrt((p.x-e.x)**2+(p.y-e.y)**2)<30&&p.zone===e.zone),F=y.reduce((p,A)=>{const K=Math.sqrt((A.x-e.x)**2+(A.y-e.y)**2);return p+A.heat_load/Math.max(K/10,1)},0),j=f.reduce((p,A)=>{const K=Math.sqrt((A.x-e.x)**2+(A.y-e.y)**2);return p+A.capacity*.1/Math.max(K/15,1)},0),u=N-5+F-j;e.temperature=H(e.temperature,u,.05*_),e.humidity=Y(e.humidity+(Math.random()-.5)*2,30,70),e.airflow_velocity=50+F*5+(Math.random()-.5)*20;const d=e.temperature-e.history[e.history.length-1];e.trend=d>.5?"rising":d<-.5?"falling":"stable",e.history.push(e.temperature),e.history.length>10&&e.history.shift()}),n.forEach(e=>{const y=Array.from(o.values()).filter(m=>m.zone===e.id||m.x>=e.x&&m.x<=e.x+e.width&&m.y>=e.y&&m.y<=e.y+e.height);y.length>0&&(e.actual_temp=y.reduce((m,u)=>m+u.temperature,0)/y.length);const f=Array.from(r.values()).filter(m=>m.zone===e.id);e.cooling_load=f.reduce((m,u)=>m+u.heat_load,0);const F=f.reduce((m,u)=>m+u.power_usage,0),j=Array.from(t.values()).filter(m=>m.zone===e.id).reduce((m,u)=>m+u.power_usage,0);e.pue=F>0?(F+j)/F:1}),I&&Math.random()<.2*_&&(t.forEach(e=>{e.status==="running"&&c.push({id:`flow-${e.id}-${Date.now()}`,from_x:e.x,from_y:e.y,to_x:e.x+20+Math.random()*40,to_y:e.y+10+Math.random()*20,temperature:e.actual_temp,velocity:e.airflow/1e3,progress:0,type:"supply"})}),r.forEach(e=>{Math.random()<.1&&c.push({id:`flow-${e.id}-${Date.now()}`,from_x:e.x,from_y:e.y,to_x:e.x+(Math.random()-.5)*30,to_y:e.y-15+Math.random()*10,temperature:e.outlet_temp,velocity:e.fan_speed/10,progress:0,type:"return"})})),q.current=c.filter(e=>(e.progress+=.03*_*e.velocity,e.progress<1))},b=(t,o)=>t<18?o.cold:t<23?o.cool:t<27?o.warm:t<32?o.hot:o.critical,i=(t,o)=>{const r=t.x*o,n=t.y*o,c=v[w];let h="‚ùÑÔ∏è";t.type==="crac"?h="üåÄ":t.type==="crah"?h="üí®":t.type==="liquid"?h="üíß":t.type==="chiller"&&(h="üßä"),l.fillStyle=t.status==="running"?c.cool:t.status==="fault"?c.critical:c.warm,l.fillText(h,r,n),l.fillStyle=c.text,l.fillText(t.name,r+o,n),l.fillText(`${t.capacity}kW`,r+o*8,n),t.alarm_state&&Date.now()%1e3<500&&(l.fillStyle=c.critical,l.fillText("‚ö†Ô∏è",r-o,n)),l.fillText(`COP:${t.efficiency.toFixed(1)}`,r,n+o),l.fillText(`${t.power_usage.toFixed(0)}kW`,r+o*7,n+o),l.fillStyle=b(t.actual_temp,c),l.fillText(`${t.actual_temp.toFixed(1)}¬∞C`,r,n+o*2),l.fillStyle=c.text,l.fillText(`‚Üí${t.setpoint}¬∞C`,r+o*6,n+o*2)},g=(t,o)=>{const r=t.x*o,n=t.y*o,c=v[w];let h=c.text;t.status==="critical"?h=c.critical:t.status==="warning"?h=c.hot:h=b(t.inlet_temp,c),l.fillStyle=h,l.fillText("‚ñÆ",r,n),l.fillStyle=c.text,l.fillText(t.name,r+o,n);const e=Math.ceil(t.heat_load/5);l.fillStyle=b(t.outlet_temp,c),l.fillText("‚ñà".repeat(Math.min(e,5)),r+o*6,n),l.fillStyle=c.text,l.fillText(`${t.inlet_temp.toFixed(0)}¬∞C`,r,n+o),l.fillText(`ŒîT:${t.delta_t.toFixed(0)}`,r+o*4,n+o),l.fillText(`${t.heat_load.toFixed(0)}kW`,r+o*8,n+o)},S=(t,o)=>{const r=t.x*o,n=t.y*o,c=v[w];l.fillStyle=b(t.temperature,c),l.fillText("‚äó",r,n),l.fillStyle=c.text,l.fillText(`${t.temperature.toFixed(1)}¬∞`,r+o,n);const h=t.trend==="rising"?"‚Üó":t.trend==="falling"?"‚Üò":"‚Üí";l.fillText(h,r+o*6,n),(t.temperature>t.alert_threshold_high||t.temperature<t.alert_threshold_low)&&(l.fillStyle=c.critical,l.fillText("!",r-o*.5,n)),l.fillStyle=c.text+"80",l.fillText(`${t.humidity.toFixed(0)}%H`,r,n+o)},G=(t,o)=>{if(!V)return;const r=t.x*o,n=t.y*o,c=t.width*o,h=t.height*o,e=v[w];l.strokeStyle=t.type==="cold_aisle"?e.cold:t.type==="hot_aisle"?e.hot:e.text+"60",l.lineWidth=2,l.strokeRect(r,n,c,h),l.fillStyle=e.text,l.fillText(t.name,r+2,n-o*.5),l.fillText(`PUE:${t.pue.toFixed(2)}`,r+c-o*8,n-o*.5),l.fillStyle=b(t.actual_temp,e),l.fillText(`${t.actual_temp.toFixed(1)}¬∞C`,r+2,n+h-o*.5)},J=t=>{if(!I)return;const o=v[w];q.current.forEach(r=>{const n=H(r.from_x,r.to_x,r.progress)*t,c=H(r.from_y,r.to_y,r.progress)*t;let h=o.flow;r.type==="supply"?h=b(r.temperature,o):r.type==="return"&&(h=o.hot),l.fillStyle=h;let e="‚óè";r.type==="supply"?e="‚óã":r.type==="return"?e="‚ó¶":r.type==="exhaust"&&(e="√ó"),l.fillText(e,n,c)})},X=()=>{if(!M)return;const t=v[w],o=8;l.fillStyle=t.bg,l.fillRect(0,0,s.width,s.height),l.font='8px "Courier New", monospace',l.textBaseline="top",Math.random()<.1*_&&C(),L.current.forEach(d=>{G(d,o)}),J(o),P.current.forEach(d=>{i(d,o)}),U.current.forEach(d=>{g(d,o)}),O&&Z.current.forEach(d=>{S(d,o)});const r=Array.from(P.current.values()),n=Array.from(U.current.values()),c=Array.from(Z.current.values()),h=r.reduce((d,p)=>d+p.capacity,0),e=r.reduce((d,p)=>d+p.power_usage,0),y=n.reduce((d,p)=>d+p.heat_load,0),f=n.reduce((d,p)=>d+p.power_usage,0),F=c.reduce((d,p)=>d+p.temperature,0)/c.length,j=c.filter(d=>d.temperature>d.alert_threshold_high).length,m=f>0?(f+e)/f:1,u=y>0?h/y*100:0;l.fillStyle=t.text,l.fillText(`Datacenter Cooling System - ${E.toUpperCase()} | Strategy: ${T}`,10,s.height-140),l.fillText(`Cooling: ${h}kW capacity | ${e.toFixed(0)}kW power | ${u.toFixed(0)}% efficiency`,10,s.height-125),l.fillText(`Heat Load: ${y.toFixed(0)}kW | IT Power: ${f.toFixed(0)}kW | Outside: ${N}¬∞C`,10,s.height-110),l.fillText(`PUE: ${m.toFixed(2)} (Target: ${D}) | Avg Temp: ${F.toFixed(1)}¬∞C | Alerts: ${j}`,10,s.height-95),l.fillText(`Display: ${W} | Emergency: ${R?"ACTIVE":"NORMAL"} | Airflows: ${q.current.length}`,10,s.height-80),B.current=requestAnimationFrame(X)};return $(),window.addEventListener("resize",$),M&&X(),()=>{window.removeEventListener("resize",$),B.current&&cancelAnimationFrame(B.current)}},[M,_,W,E,T,w,I,O,V,R,N,D]),a.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[a.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[a.jsx("h1",{className:"text-2xl font-bold text-cyan-400 mb-4",children:"‚ùÑÔ∏è ASCII Datacenter Cooling System"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-cyan-300 mb-2",children:"Animation"}),a.jsx("button",{onClick:()=>k(!M),className:`px-3 py-2 rounded font-medium transition-colors ${M?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:M?"Pause":"Play"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-cyan-300 mb-2",children:["Speed: ",_.toFixed(1),"x"]}),a.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:_,onChange:s=>z(Number.parseFloat(s.target.value)),className:"w-full"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-cyan-300 mb-2",children:"Datacenter Layout"}),a.jsxs("select",{value:E,onChange:s=>te(s.target.value),className:"px-2 py-1 bg-gray-800 text-cyan-300 rounded border border-gray-600",children:[a.jsx("option",{value:"raised_floor",children:"Raised Floor"}),a.jsx("option",{value:"hard_floor",children:"Hard Floor"}),a.jsx("option",{value:"containment",children:"Containment"}),a.jsx("option",{value:"modular",children:"Modular"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-cyan-300 mb-2",children:"Cooling Strategy"}),a.jsxs("select",{value:T,onChange:s=>ae(s.target.value),className:"px-2 py-1 bg-gray-800 text-cyan-300 rounded border border-gray-600",children:[a.jsx("option",{value:"traditional",children:"Traditional"}),a.jsx("option",{value:"economizer",children:"Economizer"}),a.jsx("option",{value:"containment",children:"Containment"}),a.jsx("option",{value:"liquid_cooling",children:"Liquid Cooling"}),a.jsx("option",{value:"immersion",children:"Immersion"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-cyan-300 mb-2",children:"Display Mode"}),a.jsxs("select",{value:W,onChange:s=>ee(s.target.value),className:"px-2 py-1 bg-gray-800 text-cyan-300 rounded border border-gray-600",children:[a.jsx("option",{value:"temperature",children:"Temperature"}),a.jsx("option",{value:"power",children:"Power Usage"}),a.jsx("option",{value:"efficiency",children:"Efficiency"}),a.jsx("option",{value:"airflow",children:"Airflow"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-cyan-300 mb-2",children:"Color Scheme"}),a.jsxs("select",{value:w,onChange:s=>le(s.target.value),className:"px-2 py-1 bg-gray-800 text-cyan-300 rounded border border-gray-600",children:[a.jsx("option",{value:"thermal",children:"Thermal"}),a.jsx("option",{value:"datacenter",children:"Datacenter"}),a.jsx("option",{value:"efficiency",children:"Efficiency"}),a.jsx("option",{value:"night_vision",children:"Night Vision"}),a.jsx("option",{value:"arctic",children:"Arctic"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-cyan-300 mb-2",children:["Outside Temp: ",N,"¬∞C"]}),a.jsx("input",{type:"range",min:"-10",max:"45",step:"1",value:N,onChange:s=>ne(Number.parseInt(s.target.value)),className:"w-full"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-cyan-300 mb-2",children:["Target PUE: ",D]}),a.jsx("input",{type:"range",min:"1.1",max:"3.0",step:"0.1",value:D,onChange:s=>ce(Number.parseFloat(s.target.value)),className:"w-full"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[a.jsxs("label",{className:"flex items-center text-cyan-300",children:[a.jsx("input",{type:"checkbox",checked:I,onChange:s=>oe(s.target.checked),className:"mr-2"}),"Show Airflow"]}),a.jsxs("label",{className:"flex items-center text-cyan-300",children:[a.jsx("input",{type:"checkbox",checked:O,onChange:s=>re(s.target.checked),className:"mr-2"}),"Show Sensors"]}),a.jsxs("label",{className:"flex items-center text-cyan-300",children:[a.jsx("input",{type:"checkbox",checked:V,onChange:s=>se(s.target.checked),className:"mr-2"}),"Show Zones"]}),a.jsxs("label",{className:"flex items-center text-cyan-300",children:[a.jsx("input",{type:"checkbox",checked:R,onChange:s=>ie(s.target.checked),className:"mr-2"}),"Emergency Mode"]})]}),a.jsxs("div",{className:"mt-4 text-cyan-400 text-sm",children:[a.jsxs("p",{children:["‚ùÑÔ∏è ",a.jsx("strong",{children:"Advanced datacenter cooling system"})," with CRAC units, thermal sensors, and PUE monitoring!"]}),a.jsxs("p",{children:["üå°Ô∏è ",a.jsx("strong",{children:"Real-time thermal management"})," - hot/cold aisle containment, economizer mode, liquid cooling!"]}),a.jsxs("p",{children:["‚ö° ",a.jsx("strong",{children:"Energy efficiency optimization"})," with Power Usage Effectiveness (PUE) tracking and alerts!"]}),a.jsx("p",{children:"Monitor CRAC/CRAH units, server heat loads, airflow patterns, and thermal zones in real-time"})]})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("canvas",{ref:Q,className:"absolute inset-0 w-full h-full",style:{background:v[w].bg}})})]})};export{me as component};
