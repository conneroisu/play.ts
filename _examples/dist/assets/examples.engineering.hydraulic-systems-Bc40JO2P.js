import{r as d,j as e,t as _,h as W,T as j,P as H,l as O}from"./index-BqTI3VMm.js";const B=function(){const k=d.useRef(null),v=d.useRef();d.useRef(0);const[o,g]=d.useState([{id:"PUMP1",type:"pump",x:100,y:200,properties:{displacement:56,pressure:210,flowRate:168,efficiency:85},isSelected:!1},{id:"CYL1",type:"cylinder",x:400,y:150,properties:{bore:100,rod:50,strokeLength:500,pressure:200},isSelected:!1},{id:"VALVE1",type:"valve",x:250,y:200,properties:{flowRate:150,pressureDrop:5},isSelected:!1}]),[h,S]=d.useState({density:870,viscosity:46,bulkModulus:1400,temperature:50,type:"mineral_oil"}),[y,w]=d.useState({simulationSpeed:1,showPressureLines:!0,showFlowDirections:!0,showPowerLoss:!1,showTemperature:!1,realTimeAnalysis:!0,pressureScale:1,flowScale:1,animationEnabled:!0}),[T,E]=d.useState("excavator"),[c,P]=d.useState(null),[m,C]=d.useState(null),[G,Y]=d.useState(!1),b={mineral_oil:{name:"Mineral Oil (ISO 46)",density:870,viscosity:46,bulkModulus:1400,tempRange:"-20 to 80°C"},synthetic:{name:"Synthetic Fluid",density:850,viscosity:32,bulkModulus:1600,tempRange:"-40 to 120°C"},water_glycol:{name:"Water-Glycol",density:1050,viscosity:35,bulkModulus:2e3,tempRange:"-30 to 60°C"},phosphate_ester:{name:"Phosphate Ester",density:1150,viscosity:41,bulkModulus:1300,tempRange:"-20 to 150°C"}},R=s=>{const t=s.properties.displacement||56,i=s.properties.pressure||210,l=1800,r=350,n=2200,a=95-i/r*10,u=85-i/r*5,x=t*l/1e3*(a/100),p=i*x/(600*(u/100));return{displacement:t,maxPressure:r,maxSpeed:n,volumetricEfficiency:a,mechanicalEfficiency:u,speed:l,actualFlow:x,actualPower:p}},M=()=>{const s=o.filter(r=>r.type==="pump"),t=o.filter(r=>r.type==="cylinder");o.filter(r=>r.type==="valve");let i=0,l=0;return s.forEach(r=>{const n=R(r);i+=n.actualPower}),t.forEach(r=>{const n=r.properties.pressure||200,a=r.properties.flowRate||100;l+=n*a/600}),i>0?l/i*100:0},F=()=>{const s=o.filter(p=>p.type==="pump");o.filter(p=>p.type==="cylinder");const t=o.filter(p=>p.type==="valve");let i=0,l=0,r=0,n=0;s.forEach(p=>{const N=R(p);i+=N.actualPower,l+=N.actualFlow}),t.forEach(p=>{p.properties.flowRate;const N=p.properties.pressureDrop||5;r+=N});const a=M();n=i*(1-a/100);const f=o.length*.5/l*60*1e3,x=Math.min(a/50,2);return{totalPower:i,systemEfficiency:a,pressureLoss:r,flowRate:l,heatGeneration:n,responseTime:f,stabilityFactor:x}},L=s=>{switch(s){case"excavator":g([{id:"PUMP1",type:"pump",x:100,y:200,properties:{displacement:140,pressure:350,efficiency:90},isSelected:!1},{id:"BOOM",type:"cylinder",x:300,y:100,properties:{bore:120,rod:70,strokeLength:800,pressure:320},isSelected:!1},{id:"ARM",type:"cylinder",x:400,y:150,properties:{bore:110,rod:65,strokeLength:600,pressure:300},isSelected:!1},{id:"BUCKET",type:"cylinder",x:500,y:200,properties:{bore:100,rod:60,strokeLength:400,pressure:280},isSelected:!1},{id:"VALVE1",type:"valve",x:200,y:150,properties:{flowRate:250,pressureDrop:8},isSelected:!1},{id:"RELIEF1",type:"relief_valve",x:150,y:120,properties:{crackingPressure:350},isSelected:!1}]);break;case"press":g([{id:"PUMP1",type:"pump",x:100,y:200,properties:{displacement:85,pressure:250,efficiency:88},isSelected:!1},{id:"MAIN_CYL",type:"cylinder",x:350,y:150,properties:{bore:200,rod:120,strokeLength:1e3,pressure:240},isSelected:!1},{id:"VALVE1",type:"valve",x:200,y:200,properties:{flowRate:180,pressureDrop:6},isSelected:!1},{id:"ACC1",type:"accumulator",x:250,y:120,properties:{capacity:50,pressure:210},isSelected:!1}]);break;case"injection_molding":g([{id:"PUMP1",type:"pump",x:100,y:200,properties:{displacement:28,pressure:140,efficiency:85},isSelected:!1},{id:"INJ_CYL",type:"cylinder",x:300,y:150,properties:{bore:80,rod:45,strokeLength:300,pressure:130},isSelected:!1},{id:"CLAMP_CYL",type:"cylinder",x:400,y:200,properties:{bore:150,rod:90,strokeLength:400,pressure:120},isSelected:!1},{id:"VALVE1",type:"valve",x:200,y:180,properties:{flowRate:80,pressureDrop:3},isSelected:!1}]);break}},A=(s,t)=>{const{x:i,y:l,type:r,isSelected:n}=t;switch(s.save(),s.translate(i,l),n?(s.strokeStyle="red",s.lineWidth=3):(s.strokeStyle="black",s.lineWidth=2),s.fillStyle=n?"rgba(255, 0, 0, 0.1)":"rgba(59, 130, 246, 0.1)",r){case"pump":s.beginPath(),s.arc(0,0,25,0,j),s.fill(),s.stroke(),s.beginPath(),s.moveTo(-10,0),s.lineTo(10,0),s.lineTo(7,-4),s.moveTo(10,0),s.lineTo(7,4),s.stroke();break;case"cylinder":s.fillRect(-30,-15,60,30),s.strokeRect(-30,-15,60,30),s.fillRect(30,-5,20,10),s.strokeRect(30,-5,20,10),s.beginPath(),s.arc(-35,-10,3,0,j),s.arc(-35,10,3,0,j),s.fill();break;case"valve":s.beginPath(),s.moveTo(0,-20),s.lineTo(20,0),s.lineTo(0,20),s.lineTo(-20,0),s.closePath(),s.fill(),s.stroke();break;case"accumulator":s.beginPath(),s.arc(0,0,20,0,j),s.fill(),s.stroke(),s.beginPath(),s.arc(0,-5,12,0,H,!0),s.stroke();break;case"relief_valve":s.beginPath(),s.moveTo(-15,-15),s.lineTo(15,-15),s.lineTo(0,15),s.closePath(),s.fill(),s.stroke();for(let a=0;a<5;a++)s.beginPath(),s.arc(0,-10+a*4,2,0,j),s.stroke();break;case"reservoir":s.fillRect(-25,-20,50,40),s.strokeRect(-25,-20,50,40),s.fillStyle="rgba(0, 100, 200, 0.3)",s.fillRect(-23,-5,46,23);break}s.fillStyle=n?"red":"black",s.font="10px Arial",s.textAlign="center",s.fillText(t.id,0,-35),r==="pump"&&t.properties.displacement&&s.fillText(`${t.properties.displacement} cm³/rev`,0,45),r==="cylinder"&&t.properties.bore&&s.fillText(`⌀${t.properties.bore}/${t.properties.rod}`,0,45),s.restore()},D=s=>{y.showPressureLines&&o.forEach((t,i)=>{if(i<o.length-1){const l=o[i+1],n=(t.properties.pressure||0)/350,a=O(240,0,n);if(s.strokeStyle=_(W(a,80,50)),s.lineWidth=Math.max(2,n*8),s.beginPath(),s.moveTo(t.x+30,t.y),s.lineTo(l.x-30,l.y),s.stroke(),y.showFlowDirections){const u=(t.x+l.x)/2,f=(t.y+l.y)/2,x=Math.atan2(l.y-t.y,l.x-t.x);s.save(),s.translate(u,f),s.rotate(x),s.strokeStyle="black",s.lineWidth=2,s.beginPath(),s.moveTo(-8,-4),s.lineTo(0,0),s.lineTo(-8,4),s.stroke(),s.restore()}}})},I=()=>{const s=k.current;if(!s)return;const t=s.getContext("2d");if(!t)return;const i=s.width,l=s.height;t.clearRect(0,0,i,l),t.strokeStyle="rgba(200, 200, 200, 0.3)",t.lineWidth=1;for(let r=0;r<=i;r+=50)t.beginPath(),t.moveTo(r,0),t.lineTo(r,l),t.stroke();for(let r=0;r<=l;r+=50)t.beginPath(),t.moveTo(0,r),t.lineTo(i,r),t.stroke();D(t),o.forEach(r=>A(t,r)),c&&(t.fillStyle="black",t.font="12px Arial",t.textAlign="left",t.fillText(`System Power: ${c.totalPower.toFixed(1)} kW`,10,l-80),t.fillText(`Efficiency: ${c.systemEfficiency.toFixed(1)}%`,10,l-60),t.fillText(`Flow Rate: ${c.flowRate.toFixed(1)} L/min`,10,l-40),t.fillText(`Heat Generation: ${c.heatGeneration.toFixed(1)} kW`,10,l-20))},V=s=>{const t=k.current;if(!t)return;const i=t.getBoundingClientRect(),l=s.clientX-i.left,r=s.clientY-i.top,n=o.find(a=>{const u=l-a.x,f=r-a.y;return Math.sqrt(u*u+f*f)<30});g(a=>a.map(u=>({...u,isSelected:u.id===(n==null?void 0:n.id)}))),C(n||null)};return d.useEffect(()=>{const s=F();P(s)},[o,h]),d.useEffect(()=>{const s=()=>{I(),v.current=requestAnimationFrame(s)};return v.current=requestAnimationFrame(s),()=>{v.current&&cancelAnimationFrame(v.current)}},[o,y,c]),d.useEffect(()=>{L(T)},[]),e.jsx("div",{className:"w-full max-w-6xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Hydraulic Systems Analysis"}),e.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"Fluid Power Engineering Tool"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Hydraulic Circuit Diagram"}),e.jsx("canvas",{ref:k,width:700,height:500,className:"border border-gray-300 rounded-lg bg-white w-full cursor-pointer",onClick:V})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>{const s=F();P(s)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium",children:"Analyze System"}),e.jsx("button",{onClick:()=>{g([]),P(null),C(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Circuit"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Presets"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Load System"}),e.jsxs("select",{value:T,onChange:s=>{E(s.target.value),L(s.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-3",children:[e.jsx("option",{value:"excavator",children:"Excavator"}),e.jsx("option",{value:"press",children:"Hydraulic Press"}),e.jsx("option",{value:"crane",children:"Mobile Crane"}),e.jsx("option",{value:"injection_molding",children:"Injection Molding"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Fluid Properties"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fluid Type"}),e.jsx("select",{value:h.type,onChange:s=>{const t=s.target.value;S(i=>({...i,type:t,density:b[t].density,viscosity:b[t].viscosity,bulkModulus:b[t].bulkModulus}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-3",children:Object.entries(b).map(([s,t])=>e.jsx("option",{value:s,children:t.name},s))}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temperature: ",h.temperature,"°C"]}),e.jsx("input",{type:"range",min:"20",max:"120",step:"5",value:h.temperature,onChange:s=>S(t=>({...t,temperature:Number.parseInt(s.target.value)})),className:"w-full mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[e.jsxs("div",{children:["Density: ",h.density," kg/m³"]}),e.jsxs("div",{children:["Viscosity: ",h.viscosity," cSt"]}),e.jsxs("div",{children:["Bulk Modulus: ",h.bulkModulus," bar"]}),e.jsxs("div",{children:["Range: ",b[h.type].tempRange]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Display Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:y.showPressureLines,onChange:s=>w(t=>({...t,showPressureLines:s.target.checked})),className:"mr-2"}),"Pressure Lines"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:y.showFlowDirections,onChange:s=>w(t=>({...t,showFlowDirections:s.target.checked})),className:"mr-2"}),"Flow Directions"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:y.showPowerLoss,onChange:s=>w(t=>({...t,showPowerLoss:s.target.checked})),className:"mr-2"}),"Power Loss"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:y.showTemperature,onChange:s=>w(t=>({...t,showTemperature:s.target.checked})),className:"mr-2"}),"Temperature"]})]})]}),m&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Component Properties"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ID:"}),e.jsx("span",{className:"font-mono",children:m.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Type:"}),e.jsx("span",{className:"font-mono",children:m.type})]}),m.type==="pump"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Displacement:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.displacement," cm³/rev"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pressure:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.pressure," bar"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Efficiency:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.efficiency,"%"]})]})]}),m.type==="cylinder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bore:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.bore," mm"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rod:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.rod," mm"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stroke:"}),e.jsxs("span",{className:"font-mono",children:[m.properties.strokeLength," mm"]})]})]})]})]}),c&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Analysis"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Power:"}),e.jsxs("span",{className:"font-mono",children:[c.totalPower.toFixed(1)," kW"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"System Efficiency:"}),e.jsxs("span",{className:"font-mono",children:[c.systemEfficiency.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Flow Rate:"}),e.jsxs("span",{className:"font-mono",children:[c.flowRate.toFixed(1)," L/min"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pressure Loss:"}),e.jsxs("span",{className:"font-mono",children:[c.pressureLoss.toFixed(1)," bar"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Heat Generation:"}),e.jsxs("span",{className:"font-mono",children:[c.heatGeneration.toFixed(1)," kW"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response Time:"}),e.jsxs("span",{className:"font-mono",children:[c.responseTime.toFixed(0)," ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stability Factor:"}),e.jsx("span",{className:"font-mono",children:c.stabilityFactor.toFixed(2)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Component Library"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-white p-2 rounded border",children:[e.jsx("strong",{children:"Power:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Pumps"}),e.jsx("li",{children:"• Motors"}),e.jsx("li",{children:"• Accumulators"})]})]}),e.jsxs("div",{className:"bg-white p-2 rounded border",children:[e.jsx("strong",{children:"Control:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Directional Valves"}),e.jsx("li",{children:"• Relief Valves"}),e.jsx("li",{children:"• Flow Controls"})]})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Fluid Power Engineering Applications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Industrial Applications:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Manufacturing automation"}),e.jsx("li",{children:"• Injection molding machines"}),e.jsx("li",{children:"• Hydraulic presses"}),e.jsx("li",{children:"• Material handling systems"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mobile Applications:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Construction equipment"}),e.jsx("li",{children:"• Agricultural machinery"}),e.jsx("li",{children:"• Mining equipment"}),e.jsx("li",{children:"• Aerospace actuators"})]})]})]})]})]})})};export{B as component};
