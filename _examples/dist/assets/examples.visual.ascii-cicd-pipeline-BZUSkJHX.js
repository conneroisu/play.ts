import{r as f,j as s,e as A,l as F}from"./index-BqTI3VMm.js";const Z=function(){const E=f.useRef(null),T=f.useRef(0),x=f.useRef(new Map),p=f.useRef([]),g=f.useRef([]),b=f.useRef([]),[y,w]=f.useState(!0),[h,$]=f.useState(1),[N,R]=f.useState("stages"),[u,B]=f.useState("devops"),[C,k]=f.useState("continuous"),[z,P]=f.useState(!0),[S,I]=f.useState(.3),[v,J]=f.useState(.1),c={devops:{bg:"#001122",text:"#00CCDD",success:"#00AA00",failed:"#DD0000",running:"#FFAA00",queued:"#8888AA",idle:"#666666"},github:{bg:"#0D1117",text:"#F0F6FC",success:"#238636",failed:"#DA3633",running:"#FB8500",queued:"#656D76",idle:"#30363D"},jenkins:{bg:"#1E3A8A",text:"#FFFFFF",success:"#10B981",failed:"#EF4444",running:"#F59E0B",queued:"#6B7280",idle:"#374151"},gitlab:{bg:"#1A1A1A",text:"#FCA326",success:"#00C896",failed:"#E24329",running:"#FC6D26",queued:"#9E9E9E",idle:"#424242"}};return f.useEffect(()=>{const o=new Map;[{name:"Source",x:10,y:8,type:"source",dependencies:[],duration:5},{name:"Build",x:25,y:8,type:"build",dependencies:["Source"],duration:120},{name:"Unit Tests",x:40,y:5,type:"test",dependencies:["Build"],duration:60},{name:"Integration Tests",x:40,y:11,type:"test",dependencies:["Build"],duration:180},{name:"Security Scan",x:55,y:8,type:"security",dependencies:["Build"],duration:90},{name:"Deploy Staging",x:70,y:5,type:"deploy",dependencies:["Unit Tests","Security Scan"],duration:45,environment:"staging"},{name:"E2E Tests",x:85,y:5,type:"test",dependencies:["Deploy Staging"],duration:300},{name:"Deploy Prod",x:70,y:11,type:"deploy",dependencies:["Integration Tests","E2E Tests"],duration:30,environment:"production"},{name:"Monitor",x:85,y:11,type:"monitor",dependencies:["Deploy Prod"],duration:0}].forEach(m=>{o.set(m.name,{id:m.name,name:m.name,x:m.x,y:m.y,status:"idle",progress:0,duration:m.duration,elapsed_time:0,type:m.type,dependencies:m.dependencies,artifacts:[],environment:m.environment})}),x.current=o,g.current=[{id:"agent-01",name:"Linux-x64-01",x:5,y:20,status:"idle",cpu_usage:10,memory_usage:25,build_count:0,uptime:0},{id:"agent-02",name:"Linux-x64-02",x:20,y:20,status:"idle",cpu_usage:8,memory_usage:20,build_count:0,uptime:0},{id:"agent-03",name:"Windows-01",x:35,y:20,status:"idle",cpu_usage:15,memory_usage:35,build_count:0,uptime:0},{id:"agent-04",name:"MacOS-01",x:50,y:20,status:"idle",cpu_usage:12,memory_usage:30,build_count:0,uptime:0}]},[]),f.useEffect(()=>{const o=E.current;if(!o)return;const n=o.getContext("2d");if(!n)return;const m=()=>{o.width=o.offsetWidth,o.height=o.offsetHeight},q=()=>{const e=["Alice","Bob","Charlie","Diana","Eve"],t=["Fix authentication bug","Add new feature endpoint","Update dependencies","Refactor service layer","Improve error handling","Add unit tests","Update documentation","Performance optimization"],i=["main","develop","feature/auth","feature/api","hotfix/security"];return{id:`job-${Date.now()}`,commit_hash:Math.random().toString(36).substring(2,10),branch:i[Math.floor(Math.random()*i.length)],author:e[Math.floor(Math.random()*e.length)],message:t[Math.floor(Math.random()*t.length)],timestamp:Date.now(),status:"pending",stages:Array.from(x.current.keys()),total_duration:0}},L=(e,t)=>e.dependencies.length===0?!0:e.dependencies.every(i=>{const a=x.current.get(i);return a&&a.status==="success"}),O=()=>{if(C==="continuous"&&Math.random()<S*h*.1){const e=q();p.current.unshift(e),p.current.length>10&&p.current.pop()}g.current.forEach(e=>{e.uptime+=1e3*h,e.status==="busy"?(e.cpu_usage=A(80+(Math.random()-.5)*20,60,100),e.memory_usage=A(70+(Math.random()-.5)*20,50,90)):(e.cpu_usage=A(e.cpu_usage+(Math.random()-.5)*5,5,25),e.memory_usage=A(e.memory_usage+(Math.random()-.5)*3,15,40))}),p.current.forEach(e=>{if(e.status==="pending"){const t=x.current.get("Source");if(t&&t.status==="idle"){t.status="running",t.progress=0,t.elapsed_time=0,e.status="running",e.current_stage=t.name;const i=g.current.find(a=>a.status==="idle");i&&(i.status="busy",i.current_job=e.id,i.build_count++)}}else if(e.status==="running"){const t=x.current.get(e.current_stage||"");if(t&&t.status==="running"&&(t.elapsed_time+=1e3*h,t.progress=Math.min(100,t.elapsed_time/(t.duration*1e3)*100),t.progress>=100)){const i=Math.random()<v;if(t.status=i?"failed":"success",t.progress=100,i){e.status="failed",e.current_stage=void 0;const a=g.current.find(l=>l.current_job===e.id);a&&(a.status="idle",a.current_job=void 0)}else{z&&t.type==="build"&&b.current.push({id:`artifact-${Date.now()}`,source_stage:t.name,target_stage:"Deploy Staging",artifact_name:"docker-image:latest",x:t.x,y:t.y,target_x:70,target_y:5,progress:0,type:"docker_image"});let a=!1;if(x.current.forEach((l,r)=>{!a&&l.status==="idle"&&L(l)&&(l.status="running",l.progress=0,l.elapsed_time=0,e.current_stage=r,a=!0)}),!a){e.status="success",e.current_stage=void 0,e.total_duration=Date.now()-e.timestamp;const l=g.current.find(r=>r.current_job===e.id);l&&(l.status="idle",l.current_job=void 0),setTimeout(()=>{x.current.forEach(r=>{r.status="idle",r.progress=0,r.elapsed_time=0})},2e3)}}}}}),b.current.forEach(e=>{e.progress+=.02*h,e.x=F(e.x,e.target_x,e.progress),e.y=F(e.y,e.target_y,e.progress)}),b.current=b.current.filter(e=>e.progress<1)},U=e=>{const i=e.x,a=e.y;let l=c[u].idle;e.status==="running"?l=c[u].running:e.status==="success"?l=c[u].success:e.status==="failed"?l=c[u].failed:e.status==="queued"&&(l=c[u].queued),n.fillStyle=l;let r="â—¯";e.type==="source"?r="ğŸ“":e.type==="build"?r="ğŸ”¨":e.type==="test"?r="ğŸ§ª":e.type==="security"?r="ğŸ”’":e.type==="deploy"?r="ğŸš€":e.type==="monitor"&&(r="ğŸ“Š"),["â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”",`â”‚ ${r}       â”‚`,"â”‚         â”‚","â”‚ â– â– â– â– â– â– â–  â”‚","â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"].forEach((_,j)=>{if(j===3){const D=Math.floor(e.progress/100*7),Q="â– ".repeat(D)+"â–¡".repeat(7-D);n.fillText(`â”‚ ${Q} â”‚`,i*10,(a+j)*10)}else n.fillText(_,i*10,(a+j)*10)}),n.fillStyle=c[u].text,n.fillText(e.name,i*10,(a-1)*10),e.environment&&n.fillText(`(${e.environment})`,i*10,(a+6)*10),e.status==="running"?n.fillText(`${(e.elapsed_time/1e3).toFixed(0)}s / ${e.duration}s`,i*10,(a+7)*10):(e.status==="success"||e.status==="failed")&&n.fillText(`${e.duration}s`,i*10,(a+7)*10)},Y=()=>{n.strokeStyle=c[u].text+"40",n.lineWidth=1,n.setLineDash([2,2]),x.current.forEach(t=>{t.dependencies.forEach(i=>{const a=x.current.get(i);if(a){const l=(a.x+10)*10,r=(a.y+2)*10,d=t.x*10,_=(t.y+2)*10;n.beginPath(),n.moveTo(l,r),n.lineTo(d,_),n.stroke()}})}),n.setLineDash([])},W=()=>{g.current.forEach(t=>{let i=c[u].idle;t.status==="busy"?i=c[u].running:t.status==="offline"&&(i=c[u].failed),n.fillStyle=i,["â”Œâ”€â”€â”€â”€â”€â”€â”€â”","â”‚ AGENT â”‚","â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â”‚","â””â”€â”€â”€â”€â”€â”€â”€â”˜"].forEach((l,r)=>{n.fillText(l,t.x*10,(t.y+r)*10)}),n.fillStyle=c[u].text,n.fillText(t.name,t.x*10,(t.y-1)*10),n.fillText(`CPU: ${t.cpu_usage}%`,t.x*10,(t.y+5)*10),n.fillText(`Builds: ${t.build_count}`,t.x*10,(t.y+6)*10)})},G=()=>{n.fillStyle=c[u].text,n.fillText("â”Œâ”€ RECENT JOBS â”€â”",10,27*10),p.current.slice(0,6).forEach((i,a)=>{let l=c[u].queued;i.status==="running"?l=c[u].running:i.status==="success"?l=c[u].success:i.status==="failed"&&(l=c[u].failed),n.fillStyle=l;const r=28+a,d=Math.floor((Date.now()-i.timestamp)/6e4);n.fillText(`â”‚ ${i.commit_hash} ${i.branch} - ${i.author}`,10,r*10),n.fillText(`â”‚ "${i.message}" ${d}m ago [${i.status.toUpperCase()}]`,10,(r+.5)*10),i.current_stage&&n.fillText(`â”‚ Current: ${i.current_stage}`,10,(r+1)*10)}),n.fillStyle=c[u].text,n.fillText("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",10,35*10)},H=()=>{if(!z)return;const e=10;b.current.forEach(t=>{let i="ğŸ“¦";t.type==="docker_image"?i="ğŸ³":t.type==="binary"?i="âš™ï¸":t.type==="test_report"?i="ğŸ“‹":t.type==="deployment"&&(i="ğŸš€"),n.fillStyle=c[u].running,n.fillText(i,t.x*e,t.y*e)})},V=()=>{const e=p.current.find(d=>d.status==="running"),t=p.current.filter(d=>d.status==="success").length,i=p.current.filter(d=>d.status==="failed").length,a=g.current.filter(d=>d.status==="busy").length,l=p.current.filter(d=>d.total_duration>0).reduce((d,_)=>d+_.total_duration,0)/Math.max(1,t)/1e3;n.fillStyle=c[u].text;const r=o.height-100;n.fillText("â”Œâ”€ CI/CD PIPELINE DASHBOARD â”€â”",10,r),n.fillText(`â”‚ Mode: ${C} | Trigger Rate: ${(S*100).toFixed(0)}% | Failure Rate: ${(v*100).toFixed(0)}%`,10,r+15),n.fillText(`â”‚ Jobs: ${t} âœ“ ${i} âœ— | Active Agents: ${a}/${g.current.length}`,10,r+30),e&&n.fillText(`â”‚ Current: ${e.commit_hash} by ${e.author} | Stage: ${e.current_stage}`,10,r+45),n.fillText(`â”‚ Avg Build Time: ${l.toFixed(0)}s | Queue: ${p.current.filter(d=>d.status==="pending").length}`,10,r+60),n.fillText("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",10,r+75)},M=()=>{if(!y)return;const e=c[u];n.fillStyle=e.bg,n.fillRect(0,0,o.width,o.height),n.font='10px "Courier New", monospace',n.textBaseline="top",Math.random()<.15*h&&O(),Y(),x.current.forEach(t=>U(t)),W(),G(),H(),V(),T.current=requestAnimationFrame(M)};return m(),window.addEventListener("resize",m),y&&M(),()=>{window.removeEventListener("resize",m),T.current&&cancelAnimationFrame(T.current)}},[y,h,N,u,C,z,S,v]),s.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[s.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[s.jsx("h1",{className:"text-2xl font-bold text-blue-400 mb-4",children:"ğŸ”„ ASCII CI/CD Pipeline Monitor"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-blue-300 mb-2",children:"Animation"}),s.jsx("button",{onClick:()=>w(!y),className:`px-3 py-2 rounded font-medium transition-colors ${y?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:y?"Pause":"Play"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-blue-300 mb-2",children:["Speed: ",h.toFixed(1),"x"]}),s.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:h,onChange:o=>$(Number.parseFloat(o.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-blue-300 mb-2",children:["Trigger Rate: ",Math.round(S*100),"%"]}),s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:S,onChange:o=>I(Number.parseFloat(o.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-blue-300 mb-2",children:["Failure Rate: ",Math.round(v*100),"%"]}),s.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:v,onChange:o=>J(Number.parseFloat(o.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-blue-300 mb-2",children:"Pipeline Mode"}),s.jsxs("select",{value:C,onChange:o=>k(o.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[s.jsx("option",{value:"continuous",children:"Continuous"}),s.jsx("option",{value:"manual",children:"Manual"}),s.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-blue-300 mb-2",children:"Color Scheme"}),s.jsxs("select",{value:u,onChange:o=>B(o.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[s.jsx("option",{value:"devops",children:"DevOps Blue"}),s.jsx("option",{value:"github",children:"GitHub Dark"}),s.jsx("option",{value:"jenkins",children:"Jenkins Blue"}),s.jsx("option",{value:"gitlab",children:"GitLab Orange"})]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-blue-300 mb-2",children:"Display Mode"}),s.jsxs("select",{value:N,onChange:o=>R(o.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[s.jsx("option",{value:"stages",children:"Stage View"}),s.jsx("option",{value:"jobs",children:"Job View"}),s.jsx("option",{value:"agents",children:"Agent View"})]})]}),s.jsx("div",{className:"flex flex-col",children:s.jsxs("label",{className:"flex items-center text-blue-300 text-xs",children:[s.jsx("input",{type:"checkbox",checked:z,onChange:o=>P(o.target.checked),className:"mr-1"}),"Artifacts"]})})]}),s.jsxs("div",{className:"mt-4 text-blue-400 text-sm",children:[s.jsxs("p",{children:["ğŸ”„ ",s.jsx("strong",{children:"Real-time CI/CD pipeline visualization"})," with multi-stage builds and deployments!"]}),s.jsxs("p",{children:["ğŸ—ï¸ ",s.jsx("strong",{children:"Watch builds flow through stages"})," from source to production with parallel execution!"]}),s.jsxs("p",{children:["ğŸ“Š ",s.jsx("strong",{children:"Monitor build agents and artifacts"})," with realistic failure rates and timing!"]}),s.jsx("p",{children:"Track commits, test results, deployments, and build agent utilization in a DevOps dashboard"})]})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsx("canvas",{ref:E,className:"absolute inset-0 w-full h-full",style:{background:c[u].bg}})})]})};export{Z as component};
