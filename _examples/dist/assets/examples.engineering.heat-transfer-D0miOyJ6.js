import{r as h,j as t,e as B,T as $,k as D,s as G,t as N,h as w,l as H}from"./index-BqTI3VMm.js";const ne=function(){const R=h.useRef(null),k=h.useRef(),E=h.useRef(0),[g,A]=h.useState([]),[p,F]=h.useState({x:[[]],y:[[]]}),[z,P]=h.useState(!1),[a,b]=h.useState({gridSize:50,timeStep:.1,ambientTemperature:20,convectionCoefficient:25,emissivity:.8,stefanBoltzmann:567e-10,showTemperatureField:!0,showHeatFlux:!1,showIsotherms:!0,colorScale:"thermal",maxTemperature:100,minTemperature:0}),[M,se]=h.useState([{x:.3,y:.3,power:1e3,type:"constant",id:"source1"},{x:.7,y:.7,power:-500,type:"constant",id:"source2"}]),[I,ae]=h.useState([{type:"fixed_temperature",value:20,side:"top",id:"bc1"},{type:"convection",value:25,side:"bottom",id:"bc2"},{type:"insulated",value:0,side:"left",id:"bc3"},{type:"insulated",value:0,side:"right",id:"bc4"}]),[T,O]=h.useState("steel"),[V,Y]=h.useState("transient"),C={steel:{thermalConductivity:50,density:7850,specificHeat:420,name:"Steel",color:{h:220,s:30,l:50}},aluminum:{thermalConductivity:237,density:2700,specificHeat:900,name:"Aluminum",color:{h:200,s:20,l:70}},copper:{thermalConductivity:401,density:8960,specificHeat:385,name:"Copper",color:{h:30,s:80,l:45}},concrete:{thermalConductivity:1.7,density:2400,specificHeat:880,name:"Concrete",color:{h:0,s:0,l:60}},composite:{thermalConductivity:20,density:1800,specificHeat:1200,name:"Composite",color:{h:120,s:40,l:40}}},W=()=>{const s=[];for(let e=0;e<a.gridSize;e++){s[e]=[];for(let i=0;i<a.gridSize;i++)s[e][i]=a.ambientTemperature}A(s)},_=s=>{const e=C[T],i=1/a.gridSize,c=1/a.gridSize,r=[],l=[];for(let n=0;n<a.gridSize;n++){r[n]=[],l[n]=[];for(let o=0;o<a.gridSize;o++){const x=n<a.gridSize-1?(s[n+1][o]-s[n][o])/i:0,m=o<a.gridSize-1?(s[n][o+1]-s[n][o])/c:0;r[n][o]=-e.thermalConductivity*x,l[n][o]=-e.thermalConductivity*m}}return{x:r,y:l}},K=s=>{const e=C[T],i=e.thermalConductivity/(e.density*e.specificHeat),c=1/a.gridSize,r=1/a.gridSize,l=a.timeStep,n=i*l*(1/(c*c)+1/(r*r)),o=.25,x=n>o?o/(i*(1/(c*c)+1/(r*r))):l,m=[];for(let d=0;d<a.gridSize;d++){m[d]=[];for(let u=0;u<a.gridSize;u++){let f=s[d][u];if(d>0&&d<a.gridSize-1&&u>0&&u<a.gridSize-1){const v=(s[d+1][u]-2*s[d][u]+s[d-1][u])/(c*c),S=(s[d][u+1]-2*s[d][u]+s[d][u-1])/(r*r);f=s[d][u]+i*x*(v+S),M.forEach(y=>{const U=Math.round(y.x*a.gridSize),Z=Math.round(y.y*a.gridSize);if(d===U&&u===Z){const ee=y.power/(e.density*e.specificHeat*c*r);f+=ee*x}})}else f=X(d,u,s);m[d][u]=B(f,-273,2e3)}}return m},X=(s,e,i)=>{const c=1/a.gridSize;if(s===0){const r=I.find(l=>l.side==="top");if(r)switch(r.type){case"fixed_temperature":return r.value;case"convection":const l=r.value,n=a.ambientTemperature;return i[1][e]+l*c/C[T].thermalConductivity*(n-i[1][e]);case"insulated":return i[1][e];default:return i[s][e]}}if(s===a.gridSize-1){const r=I.find(l=>l.side==="bottom");if(r)switch(r.type){case"fixed_temperature":return r.value;case"convection":const l=r.value,n=a.ambientTemperature;return i[s-1][e]+l*c/C[T].thermalConductivity*(n-i[s-1][e]);case"insulated":return i[s-1][e];default:return i[s][e]}}if(e===0){const r=I.find(l=>l.side==="left");return(r==null?void 0:r.type)==="insulated"?i[s][1]:i[s][e]}if(e===a.gridSize-1){const r=I.find(l=>l.side==="right");return(r==null?void 0:r.type)==="insulated"?i[s][e-1]:i[s][e]}return i[s][e]},J=s=>{const e=B((s-a.minTemperature)/(a.maxTemperature-a.minTemperature),0,1);switch(a.colorScale){case"thermal":if(e<.25){const c=e*4;return N(w(240,100,H(20,50,c)))}else if(e<.5){const c=(e-.25)*4;return N(w(H(240,180,c),100,50))}else if(e<.75){const c=(e-.5)*4;return N(w(H(180,60,c),100,50))}else{const c=(e-.75)*4;return N(w(H(60,0,c),100,H(50,70,c)))}case"scientific":return N(w(240-e*240,80,50));case"grayscale":const i=Math.round(e*255);return`rgb(${i}, ${i}, ${i})`;default:return N(w(240-e*240,80,50))}},L=()=>{if(g.length===0)return null;let s=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=0,c=0,r=0;for(let m=0;m<a.gridSize;m++)for(let d=0;d<a.gridSize;d++){const u=g[m][d];if(s=Math.max(s,u),e=Math.min(e,u),i+=u,r++,p.x[m]&&p.y[m]){const f=Math.sqrt(p.x[m][d]**2+p.y[m][d]**2);c+=f}}i/=r;const l=c/r,n=s-e,o=M.reduce((m,d)=>m+Math.abs(d.power),0),x=n/o;return{maxTemperature:s,minTemperature:e,averageTemperature:i,temperatureRange:n,averageHeatFlux:l,thermalResistance:x,totalPower:o}},Q=()=>{const s=R.current;if(!s)return;const e=s.getContext("2d");if(!e)return;const i=s.width,c=s.height;if(e.clearRect(0,0,i,c),a.showTemperatureField&&g.length>0){const r=i/a.gridSize,l=c/a.gridSize;for(let n=0;n<a.gridSize;n++)for(let o=0;o<a.gridSize;o++)e.fillStyle=J(g[n][o]),e.fillRect(o*r,n*l,r,l)}if(a.showIsotherms&&g.length>0){e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=1;const r=10,l=(a.maxTemperature-a.minTemperature)/r;for(let n=1;n<r;n++){const o=a.minTemperature+n*l;for(let x=1;x<a.gridSize-1;x++)for(let m=1;m<a.gridSize-1;m++){const d=g[x][m];if(Math.abs(d-o)<l*.1){const u=m/a.gridSize*i,f=x/a.gridSize*c;e.beginPath(),e.arc(u,f,1,0,$),e.stroke()}}}}if(a.showHeatFlux&&p.x.length>0){e.strokeStyle="rgba(255, 255, 255, 0.7)",e.lineWidth=1;const r=Math.max(1,Math.floor(a.gridSize/20));for(let l=0;l<a.gridSize;l+=r)for(let n=0;n<a.gridSize;n+=r)if(p.x[l]&&p.y[l]){const o=p.x[l][n],x=p.y[l][n],m=Math.sqrt(o*o+x*x);if(m>.1){const d=n/a.gridSize*i,u=l/a.gridSize*c,f=10,v=d+o/m*f,S=u+x/m*f;e.beginPath(),e.moveTo(d,u),e.lineTo(v,S),e.stroke();const y=Math.atan2(x,o);e.beginPath(),e.moveTo(v,S),e.lineTo(v-5*D(y-.3),S-5*G(y-.3)),e.moveTo(v,S),e.lineTo(v-5*D(y+.3),S-5*G(y+.3)),e.stroke()}}}M.forEach(r=>{const l=r.x*i,n=r.y*c,o=8;e.fillStyle=r.power>0?"red":"blue",e.beginPath(),e.arc(l,n,o,0,$),e.fill(),e.fillStyle="white",e.font="12px monospace",e.textAlign="center",e.fillText(`${r.power}W`,l,n+20)})},q=()=>{if(z&&g.length>0){const s=K(g);A(s);const e=_(s);F(e),E.current+=a.timeStep}Q(),k.current=requestAnimationFrame(q)};h.useEffect(()=>{W()},[a.gridSize,a.ambientTemperature]),h.useEffect(()=>{if(g.length>0){const s=_(g);F(s)}},[g,T]),h.useEffect(()=>(k.current=requestAnimationFrame(q),()=>{k.current&&cancelAnimationFrame(k.current)}),[z,g,a,p,M]);const j=L();return t.jsx("div",{className:"w-full max-w-6xl mx-auto p-6 bg-gradient-to-br from-orange-50 to-red-50 min-h-screen",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-full"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Heat Transfer Analysis"}),t.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"Thermal Engineering Tool"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:t.jsx("canvas",{ref:R,width:600,height:400,className:"border border-gray-300 rounded-lg bg-white w-full"})}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsxs("button",{onClick:()=>P(!z),className:`px-4 py-2 rounded-lg font-medium ${z?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,children:[z?"Pause":"Start"," Simulation"]}),t.jsx("button",{onClick:()=>{P(!1),E.current=0,W()},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Reset"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Material Properties"}),t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Type"}),t.jsx("select",{value:T,onChange:s=>O(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent mb-3",children:Object.entries(C).map(([s,e])=>t.jsxs("option",{value:s,children:[e.name," (k=",e.thermalConductivity," W/m·K)"]},s))}),t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Analysis Type"}),t.jsxs("select",{value:V,onChange:s=>Y(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[t.jsx("option",{value:"steady_state",children:"Steady State"}),t.jsx("option",{value:"transient",children:"Transient"}),t.jsx("option",{value:"coupled",children:"Coupled"})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Simulation Settings"}),t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Grid Resolution: ",a.gridSize,"×",a.gridSize]}),t.jsx("input",{type:"range",min:"20",max:"100",step:"10",value:a.gridSize,onChange:s=>b(e=>({...e,gridSize:Number.parseInt(s.target.value)})),className:"w-full mb-3"}),t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Time Step: ",a.timeStep,"s"]}),t.jsx("input",{type:"range",min:"0.01",max:"1.0",step:"0.01",value:a.timeStep,onChange:s=>b(e=>({...e,timeStep:Number.parseFloat(s.target.value)})),className:"w-full mb-3"}),t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Temperature: ",a.maxTemperature,"°C"]}),t.jsx("input",{type:"range",min:"50",max:"500",step:"10",value:a.maxTemperature,onChange:s=>b(e=>({...e,maxTemperature:Number.parseInt(s.target.value)})),className:"w-full"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Display Options"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:a.showTemperatureField,onChange:s=>b(e=>({...e,showTemperatureField:s.target.checked})),className:"mr-2"}),"Temperature Field"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:a.showHeatFlux,onChange:s=>b(e=>({...e,showHeatFlux:s.target.checked})),className:"mr-2"}),"Heat Flux Vectors"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:a.showIsotherms,onChange:s=>b(e=>({...e,showIsotherms:s.target.checked})),className:"mr-2"}),"Isotherms"]})]}),t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 mt-3",children:"Color Scale"}),t.jsxs("select",{value:a.colorScale,onChange:s=>b(e=>({...e,colorScale:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[t.jsx("option",{value:"thermal",children:"Thermal (Blue-Red)"}),t.jsx("option",{value:"scientific",children:"Scientific"}),t.jsx("option",{value:"grayscale",children:"Grayscale"})]})]}),j&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Thermal Analysis"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Max Temperature:"}),t.jsxs("span",{className:"font-mono text-red-600",children:[j.maxTemperature.toFixed(1),"°C"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Min Temperature:"}),t.jsxs("span",{className:"font-mono text-blue-600",children:[j.minTemperature.toFixed(1),"°C"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Avg Temperature:"}),t.jsxs("span",{className:"font-mono",children:[j.averageTemperature.toFixed(1),"°C"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Thermal Resistance:"}),t.jsxs("span",{className:"font-mono",children:[j.thermalResistance.toFixed(4)," K/W"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Avg Heat Flux:"}),t.jsxs("span",{className:"font-mono",children:[j.averageHeatFlux.toFixed(1)," W/m²"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Total Power:"}),t.jsxs("span",{className:"font-mono",children:[j.totalPower.toFixed(0)," W"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Simulation Time:"}),t.jsxs("span",{className:"font-mono",children:[E.current.toFixed(1)," s"]})]})]})]})]})]}),t.jsxs("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Engineering Applications"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Thermal Design:"}),t.jsxs("ul",{className:"mt-1 space-y-1",children:[t.jsx("li",{children:"• Electronics cooling analysis"}),t.jsx("li",{children:"• HVAC system design"}),t.jsx("li",{children:"• Heat exchanger optimization"}),t.jsx("li",{children:"• Building energy analysis"})]})]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Material Processing:"}),t.jsxs("ul",{className:"mt-1 space-y-1",children:[t.jsx("li",{children:"• Welding thermal profiles"}),t.jsx("li",{children:"• Manufacturing cooling"}),t.jsx("li",{children:"• Thermal stress analysis"}),t.jsx("li",{children:"• Energy efficiency studies"})]})]})]})]})]})})};export{ne as component};
