import{r as x,j as e,L as K,h as N,b as f,t as Q,v as P,e as D,d as Z}from"./index-BqTI3VMm.js";const se=function(){const j=x.useRef(null);x.useRef();const[y,S]=x.useState([]),[m,M]=x.useState(!1),[A,v]=x.useState(0),[p,T]=x.useState(25),[w,G]=x.useState(!0),[C,L]=x.useState(!0),[k,W]=x.useState(!0),[I,Y]=x.useState("random"),[R,F]=x.useState(100),z=t=>{const s=j.current;if(!s)return[];const i=[];for(let o=0;o<t;o++)i.push({x:f(50,s.width-50),y:f(50,s.height-50),color:N(f(0,360),f(50,80),f(40,70)),id:o});return i},O=t=>{const s=j.current;if(!s)return[];const i=Math.ceil(Math.sqrt(t)),o=Math.ceil(t/i),a=(s.width-100)/i,n=(s.height-100)/o,l=[];for(let r=0;r<t;r++){const c=r%i,h=Math.floor(r/i),u=f(-a*.3,a*.3),d=f(-n*.3,n*.3);l.push({x:50+c*a+a/2+u,y:50+h*n+n/2+d,color:N(r*137.5%360,70,60),id:r})}return l},B=(t,s,i)=>{const o=new ImageData(s,i),a=o.data;for(let n=0;n<i;n+=2)for(let l=0;l<s;l+=2){let r=t[0],c=Number.POSITIVE_INFINITY;for(const d of t){const g=P({x:l,y:n},{x:d.x,y:d.y});g<c&&(c=g,r=d)}let h=r.color;switch(I){case"distance":const d=Math.min(c/100,1);h=N(r.color.h,r.color.s,D(70-d*30,20,70));break;case"gradient":h=N((l+n)*.5%360,60,50);break}const u=Z(h);for(let d=0;d<2&&n+d<i;d++)for(let g=0;g<2&&l+g<s;g++){const b=((n+d)*s+(l+g))*4;a[b]=u.r,a[b+1]=u.g,a[b+2]=u.b,a[b+3]=255}}return o},X=t=>{const s=j.current;if(!s)return t;const i=[],o=4;for(const a of t){let n=0,l=0,r=0;for(let h=0;h<s.height;h+=o)for(let u=0;u<s.width;u+=o){let d=t[0],g=Number.POSITIVE_INFINITY;for(const b of t){const V=P({x:u,y:h},{x:b.x,y:b.y});V<g&&(g=V,d=b)}d.id===a.id&&(n+=u,l+=h,r++)}const c={...a,x:r>0?n/r:a.x,y:r>0?l/r:a.y};c.x=D(c.x,20,s.width-20),c.y=D(c.y,20,s.height-20),i.push(c)}return i},_=(t,s,i)=>{const o=[];for(let n=0;n<i;n+=8)for(let l=0;l<s;l+=8){const r=E(t,{x:l,y:n});if(l+8<s){const c=E(t,{x:l+8,y:n});r.id!==c.id&&o.push({start:{x:l+8/2,y:n},end:{x:l+8/2,y:n+8},site1:r,site2:c})}if(n+8<i){const c=E(t,{x:l,y:n+8});r.id!==c.id&&o.push({start:{x:l,y:n+8/2},end:{x:l+8,y:n+8/2},site1:r,site2:c})}}return o},E=(t,s)=>{let i=t[0],o=Number.POSITIVE_INFINITY;for(const a of t){const n=P(s,{x:a.x,y:a.y});n<o&&(o=n,i=a)}return i},q=()=>{const t=j.current,s=t==null?void 0:t.getContext("2d");if(!(!t||!s||y.length===0)){if(s.clearRect(0,0,t.width,t.height),k){const i=B(y,t.width,t.height);s.putImageData(i,0,0)}if(C){const i=_(y,t.width,t.height);s.strokeStyle="#ffffff",s.lineWidth=1,s.globalAlpha=.8;for(const o of i)s.beginPath(),s.moveTo(o.start.x,o.start.y),s.lineTo(o.end.x,o.end.y),s.stroke();s.globalAlpha=1}w&&y.forEach(i=>{s.fillStyle=Q({...i.color,l:20}),s.beginPath(),s.arc(i.x,i.y,6,0,Math.PI*2),s.fill(),s.strokeStyle="#ffffff",s.lineWidth=2,s.stroke(),s.fillStyle="#ffffff",s.beginPath(),s.arc(i.x,i.y,2,0,Math.PI*2),s.fill()}),m&&(s.fillStyle="rgba(0, 0, 0, 0.7)",s.fillRect(10,10,200,40),s.fillStyle="#ffffff",s.font="16px Arial",s.fillText(`Relaxation Step: ${A}`,20,35))}},H=async()=>{M(!0),v(0);let t=[...y];for(let s=0;s<20;s++)v(s+1),t=X(t),S([...t]),await new Promise(i=>setTimeout(i,200-R));M(!1)},U=t=>{const s=j.current;if(!s||m)return;const i=s.getBoundingClientRect(),o=t.clientX-i.left,a=t.clientY-i.top,n={x:o,y:a,color:N(f(0,360),f(50,80),f(40,70)),id:Date.now()};S(l=>[...l,n]),T(l=>l+1)},$=()=>{if(m)return;const t=z(p);S(t),v(0)},J=()=>{if(m)return;const t=O(p);S(t),v(0)};return x.useEffect(()=>{const t=j.current;if(!t)return;t.width=800,t.height=600;const s=z(p);S(s)},[]),x.useEffect(()=>{q()},[y,w,C,k,I]),x.useEffect(()=>{if(y.length!==p&&!m){const t=z(p);S(t)}},[p]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Interactive Voronoi Tessellation"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Lloyd's relaxation optimization with multiple patterns, click-to-add sites, and educational visualizations."}),e.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:e.jsx("p",{className:"text-emerald-800",children:"üî∂ Watch sites relax to optimal positions, click to add new sites, explore different patterns"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx("button",{type:"button",onClick:H,disabled:m,className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 disabled:opacity-50 transition-colors",children:m?"Relaxing...":"Start Lloyd's Relaxation"}),e.jsx("button",{type:"button",onClick:$,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Random Sites"}),e.jsx("button",{type:"button",onClick:J,disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 transition-colors",children:"Grid Pattern"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Site Count: ",p]}),e.jsx("input",{type:"range",min:"5",max:"100",value:p,onChange:t=>T(Number(t.target.value)),disabled:m,className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Animation Speed: ",R]}),e.jsx("input",{type:"range",min:"10",max:"190",value:R,onChange:t=>F(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color Mode"}),e.jsxs("select",{value:I,onChange:t=>Y(t.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"random",children:"Random Colors"}),e.jsx("option",{value:"distance",children:"Distance Based"}),e.jsx("option",{value:"gradient",children:"Position Gradient"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:t=>W(t.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Cells"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:t=>L(t.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Edges"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:t=>G(t.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Sites"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("canvas",{ref:j,className:"border border-gray-300 rounded-lg bg-white cursor-crosshair",style:{maxWidth:"100%",height:"auto"},onClick:U}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click on the canvas to add new sites"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"Voronoi Properties"}),e.jsxs("ul",{className:"text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Nearest Neighbor"}),": Each region contains all points closest to its site"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Dual of Delaunay"}),": Connected to triangulation theory"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Natural Patterns"}),": Found in biological cell structures"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Optimization"}),": Lloyd's algorithm minimizes energy"]})]})]}),e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-emerald-800",children:"Lloyd's Relaxation"}),e.jsxs("ul",{className:"text-emerald-700 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Centroidal Voronoi"}),": Sites move to region centroids"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Energy Minimization"}),": Reduces overall system energy"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Uniform Distribution"}),": Creates more regular spacing"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Iterative Process"}),": Converges to optimal configuration"]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Applications"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-blue-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Computer Graphics:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"‚Ä¢ Procedural textures"}),e.jsx("li",{children:"‚Ä¢ Terrain generation"}),e.jsx("li",{children:"‚Ä¢ Cell shading"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Computational Geometry:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"‚Ä¢ Mesh generation"}),e.jsx("li",{children:"‚Ä¢ Spatial analysis"}),e.jsx("li",{children:"‚Ä¢ Nearest neighbor queries"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Real World:"}),e.jsxs("ul",{className:"text-sm mt-1",children:[e.jsx("li",{children:"‚Ä¢ Ecology and biology"}),e.jsx("li",{children:"‚Ä¢ Urban planning"}),e.jsx("li",{children:"‚Ä¢ Material science"})]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(K,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"‚Üê Back to Examples"})})]})};export{se as component};
