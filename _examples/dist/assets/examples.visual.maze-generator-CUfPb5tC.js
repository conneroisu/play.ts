import{r as g,j as i,L as F,x as k,y as W,w as p}from"./index-BqTI3VMm.js";const I=function(){const S=g.useRef(null);g.useRef();const[u,f]=g.useState([]),[x,N]=g.useState(!1),[K,X]=g.useState(0),[l,b]=g.useState({width:25,height:25,cellSize:16,algorithm:"dfs",animationSpeed:50}),[j,v]=g.useState(!1),[y,C]=g.useState([]),z=()=>{const t=[];for(let e=0;e<l.height;e++){t[e]=[];for(let n=0;n<l.width;n++)t[e][n]={x:n,y:e,walls:{top:!0,right:!0,bottom:!0,left:!0},visited:!1,inMaze:!1}}return t},m=(t,e,n=!1)=>{const o=[],{x:r,y:s}=t;return s>0&&o.push(e[s-1][r]),r<l.width-1&&o.push(e[s][r+1]),s<l.height-1&&o.push(e[s+1][r]),r>0&&o.push(e[s][r-1]),n&&(s>0&&r>0&&o.push(e[s-1][r-1]),s>0&&r<l.width-1&&o.push(e[s-1][r+1]),s<l.height-1&&r>0&&o.push(e[s+1][r-1]),s<l.height-1&&r<l.width-1&&o.push(e[s+1][r+1])),o},w=(t,e,n)=>{const o=t.x-e.x,r=t.y-e.y;o===1?(n[t.y][t.x].walls.left=!1,n[e.y][e.x].walls.right=!1):o===-1?(n[t.y][t.x].walls.right=!1,n[e.y][e.x].walls.left=!1):r===1?(n[t.y][t.x].walls.top=!1,n[e.y][e.x].walls.bottom=!1):r===-1&&(n[t.y][t.x].walls.bottom=!1,n[e.y][e.x].walls.top=!1)},A=async(t,e=0,n=0)=>{const o=[],r=t[n][e];for(r.visited=!0,o.push(r);o.length>0;){const s=o[o.length-1],c=m(s,t).filter(a=>!a.visited);if(c.length>0){const a=k(c);w(s,a,t),a.visited=!0,o.push(a)}else o.pop();await new Promise(a=>setTimeout(a,100-l.animationSpeed)),f([...t])}},T=async t=>{const e=[],n=new Map;for(let s=0;s<l.height;s++)for(let c=0;c<l.width;c++){const a=`${c},${s}`;n.set(a,new Set([a]))}for(let s=0;s<l.height;s++)for(let c=0;c<l.width;c++)c<l.width-1&&e.push({cell1:t[s][c],cell2:t[s][c+1]}),s<l.height-1&&e.push({cell1:t[s][c],cell2:t[s+1][c]});W(e);const o=s=>{for(const[c,a]of n)if(a.has(s))return a},r=(s,c)=>{const a=o(s),h=o(c);return a&&h&&a!==h?(a.size<h.size?(h.forEach(d=>a.add(d)),n.delete(Array.from(n.keys()).find(d=>n.get(d)===h))):(a.forEach(d=>h.add(d)),n.delete(Array.from(n.keys()).find(d=>n.get(d)===a))),!0):!1};for(const s of e){const c=`${s.cell1.x},${s.cell1.y}`,a=`${s.cell2.x},${s.cell2.y}`;r(c,a)&&(w(s.cell1,s.cell2,t),s.cell1.visited=!0,s.cell2.visited=!0,await new Promise(h=>setTimeout(h,100-l.animationSpeed)),f([...t]))}},P=async t=>{const e=p(0,l.width-1),n=p(0,l.height-1);t[n][e].inMaze=!0;const o=m(t[n][e],t);for(;o.length>0;){const r=p(0,o.length-1),s=o[r];o.splice(r,1);const c=m(s,t).filter(a=>a.inMaze);if(c.length>0){const a=k(c);w(s,a,t),s.inMaze=!0,s.visited=!0;const h=m(s,t).filter(d=>!d.inMaze&&!o.includes(d));o.push(...h),await new Promise(d=>setTimeout(d,100-l.animationSpeed)),f([...t])}}},$=async t=>{let e=p(0,l.width-1),n=p(0,l.height-1),o=1;for(t[n][e].visited=!0;o<l.width*l.height;){const r=m(t[n][e],t),s=k(r);s.visited||(w(t[n][e],s,t),s.visited=!0,o++),e=s.x,n=s.y,await new Promise(c=>setTimeout(c,100-l.animationSpeed)),f([...t])}},R=async()=>{N(!0),v(!1);const t=z();f(t);try{switch(l.algorithm){case"dfs":await A(t);break;case"kruskal":await T(t);break;case"prim":await P(t);break;case"aldous-broder":await $(t);break}}catch(e){console.error("Maze generation error:",e)}N(!1)},G=()=>{if(u.length===0)return;const t=u[0][0],e=u[l.height-1][l.width-1],n=[],o=new Set;for(n.push({cell:t,path:[{x:t.x,y:t.y}]}),o.add(`${t.x},${t.y}`);n.length>0;){const{cell:r,path:s}=n.shift();if(r===e){C(s),v(!0);return}const c=m(r,u).filter(a=>{const h=`${a.x},${a.y}`;if(o.has(h))return!1;const d=r.x-a.x,M=r.y-a.y;return!(d===1&&r.walls.left||d===-1&&r.walls.right||M===1&&r.walls.top||M===-1&&r.walls.bottom)});for(const a of c){const h=`${a.x},${a.y}`;o.add(h),n.push({cell:a,path:[...s,{x:a.x,y:a.y}]})}}},E=()=>{const t=S.current,e=t==null?void 0:t.getContext("2d");if(!(!t||!e||u.length===0)){e.clearRect(0,0,t.width,t.height);for(let n=0;n<l.height;n++)for(let o=0;o<l.width;o++){const r=u[n][o],s=o*l.cellSize,c=n*l.cellSize;r.visited||r.inMaze?e.fillStyle="#f8f9fa":e.fillStyle="#343a40",e.fillRect(s,c,l.cellSize,l.cellSize),e.strokeStyle="#212529",e.lineWidth=2,r.walls.top&&(e.beginPath(),e.moveTo(s,c),e.lineTo(s+l.cellSize,c),e.stroke()),r.walls.right&&(e.beginPath(),e.moveTo(s+l.cellSize,c),e.lineTo(s+l.cellSize,c+l.cellSize),e.stroke()),r.walls.bottom&&(e.beginPath(),e.moveTo(s,c+l.cellSize),e.lineTo(s+l.cellSize,c+l.cellSize),e.stroke()),r.walls.left&&(e.beginPath(),e.moveTo(s,c),e.lineTo(s,c+l.cellSize),e.stroke())}if(e.fillStyle="#28a745",e.fillRect(2,2,l.cellSize-4,l.cellSize-4),e.fillStyle="#dc3545",e.fillRect((l.width-1)*l.cellSize+2,(l.height-1)*l.cellSize+2,l.cellSize-4,l.cellSize-4),j&&y.length>0){e.strokeStyle="#ffc107",e.lineWidth=3,e.lineCap="round",e.beginPath();for(let n=0;n<y.length;n++){const o=y[n],r=o.x*l.cellSize+l.cellSize/2,s=o.y*l.cellSize+l.cellSize/2;n===0?e.moveTo(r,s):e.lineTo(r,s)}e.stroke()}}};g.useEffect(()=>{const t=S.current;t&&(t.width=l.width*l.cellSize,t.height=l.height*l.cellSize,u.length>0&&E())},[u,l,j,y]),g.useEffect(()=>{const t=z();f(t)},[l.width,l.height]);const B={dfs:"Depth-First Search (Recursive Backtracking)",kruskal:"Kruskal's Algorithm",prim:"Prim's Algorithm","aldous-broder":"Aldous-Broder Algorithm"};return i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Multi-Algorithm Maze Generator"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Four generation algorithms with animated creation, automatic pathfinding, and educational algorithm comparisons."}),i.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:i.jsx("p",{className:"text-orange-800",children:"üîç Generate mazes with various algorithms, then solve them automatically"})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[i.jsx("button",{type:"button",onClick:R,disabled:x,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50 transition-colors",children:x?"Generating...":"Generate Maze"}),i.jsx("button",{type:"button",onClick:G,disabled:x||u.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:"Solve Maze"}),i.jsx("button",{type:"button",onClick:()=>v(!1),disabled:!j,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50 transition-colors",children:"Hide Solution"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Algorithm"}),i.jsx("select",{value:l.algorithm,onChange:t=>b(e=>({...e,algorithm:t.target.value})),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:Object.entries(B).map(([t,e])=>i.jsx("option",{value:t,children:e},t))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Width: ",l.width]}),i.jsx("input",{type:"range",min:"10",max:"50",value:l.width,onChange:t=>b(e=>({...e,width:Number(t.target.value)})),disabled:x,className:"w-full"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Height: ",l.height]}),i.jsx("input",{type:"range",min:"10",max:"50",value:l.height,onChange:t=>b(e=>({...e,height:Number(t.target.value)})),disabled:x,className:"w-full"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Speed: ",l.animationSpeed]}),i.jsx("input",{type:"range",min:"1",max:"99",value:l.animationSpeed,onChange:t=>b(e=>({...e,animationSpeed:Number(t.target.value)})),className:"w-full"})]})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("canvas",{ref:S,className:"border border-gray-300 rounded-lg bg-white",style:{maxWidth:"100%",height:"auto"}})}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-yellow-800",children:"Algorithm Comparison"}),i.jsxs("ul",{className:"text-yellow-700 space-y-1",children:[i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"DFS"}),": Creates long winding passages, uses backtracking"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Kruskal's"}),": Random spanning tree, can create loops briefly"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Prim's"}),": Grows from frontier, creates more branched mazes"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Aldous-Broder"}),": Unbiased algorithm, uniform distribution"]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Features"}),i.jsxs("ul",{className:"text-blue-700 space-y-1",children:[i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Multiple Algorithms"}),": Different generation strategies"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Animated Generation"}),": Watch the maze grow step by step"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Pathfinding"}),": Breadth-first search for optimal solution"]}),i.jsxs("li",{children:["‚Ä¢ ",i.jsx("strong",{children:"Customizable Size"}),": Adjust maze dimensions and speed"]})]})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx(F,{to:"/examples/visual",className:"inline-block px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"‚Üê Back to Examples"})})]})};export{I as component};
