import{r as f,j as t,e as L,l as X}from"./index-BqTI3VMm.js";const le=function(){const B=f.useRef(null),W=f.useRef(0),j=f.useRef(new Map),I=f.useRef([]),A=f.useRef([]),[_,H]=f.useState(!0),[y,z]=f.useState(1),[M,Q]=f.useState("utilization"),[w,Y]=f.useState("overview"),[P,O]=f.useState("rack-1"),[T,K]=f.useState("mixed"),[k,Z]=f.useState("nvidia"),[S,ee]=f.useState(!0),[V,te]=f.useState(!0),[$,re]=f.useState("standard"),[q,ae]=f.useState(1e3),U={nvidia:{bg:"#0A0A0A",idle:"#00FF00",running:"#00AA00",hot:"#FFAA00",critical:"#FF4444",compute:"#00AAFF",text:"#FFFFFF"},amd:{bg:"#000000",idle:"#FF6600",running:"#FF4400",hot:"#FFAA00",critical:"#FF0000",compute:"#00AAFF",text:"#FFFFFF"},intel:{bg:"#001144",idle:"#0066CC",running:"#004499",hot:"#FFAA00",critical:"#FF4444",compute:"#00AAFF",text:"#FFFFFF"},hpc:{bg:"#000022",idle:"#00FFFF",running:"#00AAAA",hot:"#FFAA00",critical:"#FF4444",compute:"#FF00FF",text:"#FFFFFF"},thermal:{bg:"#000000",idle:"#0000FF",running:"#00FF00",hot:"#FFFF00",critical:"#FF0000",compute:"#FF00FF",text:"#FFFFFF"}};return f.useEffect(()=>{const n=new Map,r=[],C=[{name:"RTX 4090",compute:128,memory:24},{name:"A100 80GB",compute:108,memory:80},{name:"H100 SXM",compute:144,memory:80},{name:"V100 32GB",compute:80,memory:32}],D=["training","inference","compute","rendering"],E=["PyTorch","TensorFlow","JAX","CUDA","OpenCL"];for(let p=1;p<=4;p++)for(let F=1;F<=8;F++){const v=C[Math.floor(Math.random()*C.length)],R=`gpu-${p}-${F}`,o={id:R,name:`GPU-${p}-${F}`,model:v.name,compute_units:v.compute,memory_gb:v.memory,utilization:Math.random()*30,memory_usage:Math.random()*20,temperature:35+Math.random()*10,power_draw:50+Math.random()*100,jobs:[],status:"idle",x:5+(p-1)*25,y:3+(F-1)*3,rack_id:`rack-${p}`,cluster_id:"main-cluster",performance_score:90+Math.random()*10,thermal_throttling:!1,error_count:0,uptime:Math.random()*1e4};n.set(R,o)}for(let p=0;p<20;p++){const F=D[Math.floor(Math.random()*D.length)],v=E[Math.floor(Math.random()*E.length)];r.push({id:`job-${p+1}`,name:`${F}-job-${p+1}`,type:F,progress:0,priority:Math.floor(Math.random()*10)+1,memory_required:Math.random()*40+10,compute_required:Math.random()*80+20,time_remaining:Math.random()*3600+300,user:`user${Math.floor(Math.random()*10)+1}`,framework:v,status:"queued"})}j.current=n,I.current=r},[]),f.useEffect(()=>{const n=B.current;if(!n)return;const r=n.getContext("2d");if(!r)return;const C=()=>{n.width=n.offsetWidth,n.height=n.offsetHeight},D=()=>{const o=j.current,a=I.current,s=Date.now()/1e3,d=Array.from(o.values()).filter(e=>e.status==="idle"&&e.jobs.length===0),c=a.filter(e=>e.status==="queued");if(d.length>0&&c.length>0){const e=d[0],u=c.sort((m,x)=>x.priority-m.priority)[0];e.memory_gb>=u.memory_required&&(u.status="running",e.jobs.push(u),e.status="running")}if(o.forEach(e=>{if(e.jobs=e.jobs.filter(l=>l.status==="running"&&(l.progress+=(Math.random()*2+.5)*y,l.time_remaining=Math.max(0,l.time_remaining-y),l.progress>=100||l.time_remaining<=0)?(l.status="completed",l.progress=100,!1):!0),e.jobs.length===0)e.status="idle",e.utilization=Math.max(0,e.utilization-5*y),e.memory_usage=Math.max(0,e.memory_usage-3*y);else{e.status="running";const l=e.jobs.reduce((N,G)=>N+G.compute_required,0),h=e.jobs.reduce((N,G)=>N+G.memory_required,0);e.utilization=Math.min(100,l),e.memory_usage=Math.min(100,h/e.memory_gb*100)}T==="ai-training"?e.jobs.some(l=>l.type==="training")&&(e.utilization=Math.min(100,e.utilization*1.3)):T==="crypto-mining"?e.utilization=Math.max(e.utilization,80+Math.random()*20):T==="rendering"&&e.jobs.some(l=>l.type==="rendering")&&(e.utilization=60+30*Math.sin(s*2));const u=35,m=e.utilization/100*45,x=$==="enhanced"?-5:$==="liquid"?-10:0;e.temperature=L(u+m+x+(Math.random()-.5)*3,25,95);const b=50,i=e.utilization/100*300;if(e.power_draw=L(b+i+(Math.random()-.5)*20,30,400),e.temperature>83?(e.thermal_throttling=!0,e.utilization*=.8,e.performance_score=Math.max(60,e.performance_score-1)):(e.thermal_throttling=!1,e.performance_score=Math.min(100,e.performance_score+.1)),e.temperature>90?(e.status="overheating",e.error_count++):e.error_count>10?e.status="error":e.performance_score<70&&(e.status="maintenance"),e.uptime+=y,e.jobs.length>0&&Math.random()<.1*y&&S){const l=Array.from(o.values()).filter(h=>h.id!==e.id&&h.jobs.length>0);if(l.length>0){const h=l[Math.floor(Math.random()*l.length)];A.current.push({id:`task-${e.id}-${h.id}-${Date.now()}`,from_gpu:e.id,to_gpu:h.id,progress:0,data_size:Math.random()*1e3+100,task_type:Math.random()<.4?"gradient":Math.random()<.7?"weight_sync":"data_transfer"})}}}),A.current=A.current.filter(e=>(e.progress+=.03*y,e.progress<1)),Math.random()<.02*y&&a.length<50){const e=["training","inference","compute","rendering"],u=["PyTorch","TensorFlow","JAX","CUDA"];a.push({id:`job-${Date.now()}`,name:`job-${a.length+1}`,type:e[Math.floor(Math.random()*e.length)],progress:0,priority:Math.floor(Math.random()*10)+1,memory_required:Math.random()*40+10,compute_required:Math.random()*80+20,time_remaining:Math.random()*3600+300,user:`user${Math.floor(Math.random()*10)+1}`,framework:u[Math.floor(Math.random()*u.length)],status:"queued"})}},E=(o,a)=>o.status==="error"||o.status==="overheating"?a.critical:o.thermal_throttling?a.hot:o.status==="running"?a.running:o.status==="maintenance"?a.hot:a.idle,p=(o,a)=>{const s=o.x*a,d=o.y*a,c=U[k];r.fillStyle=E(o,c),r.fillText("▣",s,d),r.fillStyle=c.text,r.fillText(o.name,s+a,d),o.thermal_throttling&&(r.fillStyle=c.hot,r.fillText("🔥",s-a,d)),o.status==="error"&&(r.fillStyle=c.critical,r.fillText("✕",s-a,d));let e=0,u="%",m="";switch(M){case"utilization":e=o.utilization,m="GPU";break;case"memory":e=o.memory_usage,m="MEM";break;case"temperature":e=o.temperature,u="°C",m="TMP";break;case"power":e=o.power_draw,u="W",m="PWR";break;case"performance":e=o.performance_score,m="PERF";break}const x=8,i=e/(M==="temperature"?100:M==="power"?400:100),l=Math.floor(i*x);if(r.fillStyle=c.text+"40",r.fillText("█".repeat(x),s,d+a),l>0){let h=c.idle;M==="temperature"?h=e>80?c.critical:e>70?c.hot:c.running:h=i>.9?c.critical:i>.7?c.hot:c.running,r.fillStyle=h,r.fillText("█".repeat(l),s,d+a)}if(r.fillStyle=c.text,r.fillText(`${m}: ${e.toFixed(0)}${u}`,s+(x+1)*a,d+a),V&&o.jobs.length>0){const h=o.jobs[0];r.fillStyle=c.compute,r.fillText(`${h.type}: ${h.progress.toFixed(0)}%`,s,d+a*2),r.fillText(`${h.framework}`,s,d+a*2.5)}r.fillStyle=c.text+"80",r.fillText(o.model,s+a*8,d)},F=(o,a)=>{const s=Array.from(j.current.values()).filter(g=>g.rack_id===o);if(s.length===0)return;const d=Math.min(...s.map(g=>g.x)),c=Math.max(...s.map(g=>g.x)),e=Math.min(...s.map(g=>g.y)),u=Math.max(...s.map(g=>g.y)),m=(d-1)*a,x=(e-1)*a,b=(c-d+12)*a,i=(u-e+4)*a,l=U[k];r.strokeStyle=l.text+"60",r.lineWidth=1,r.strokeRect(m,x,b,i),r.fillStyle=l.text,r.fillText(o.toUpperCase(),m+2,x-a*.5);const h=s.filter(g=>g.status==="running").length,N=s.filter(g=>g.status==="error"||g.status==="overheating").length,G=s.reduce((g,J)=>g+J.temperature,0)/s.length,ne=s.reduce((g,J)=>g+J.power_draw,0);r.fillText(`${h}/${s.length} running`,m+b-a*12,x-a*.5),r.fillText(`Avg: ${G.toFixed(0)}°C`,m+b-a*12,x),r.fillText(`${ne.toFixed(0)}W`,m+b-a*6,x-a*.5),N>0&&(r.fillStyle=l.critical,r.fillText(`${N} errors`,m+b-a*6,x))},v=o=>{if(!S)return;const a=j.current,s=U[k];A.current.forEach(d=>{const c=a.get(d.from_gpu),e=a.get(d.to_gpu);if(!c||!e)return;const u=c.x*o,m=c.y*o,x=e.x*o,b=e.y*o,i=X(u,x,d.progress),l=X(m,b,d.progress);let h=s.compute;d.task_type==="gradient"?h=s.running:d.task_type==="weight_sync"&&(h=s.hot),r.fillStyle=h,r.fillText("●",i,l),r.strokeStyle=h+"30",r.lineWidth=1,r.setLineDash([1,2]),r.beginPath(),r.moveTo(u,m),r.lineTo(x,b),r.stroke(),r.setLineDash([])})},R=()=>{if(!_)return;const o=U[k],a=10;if(r.fillStyle=o.bg,r.fillRect(0,0,n.width,n.height),r.font='10px "Courier New", monospace',r.textBaseline="top",Math.random()<.1*y&&D(),w==="overview"){for(let i=1;i<=4;i++)F(`rack-${i}`,a);j.current.forEach(i=>{p(i,a)}),v(a)}else w==="rack"&&(F(P,a),Array.from(j.current.values()).filter(l=>l.rack_id===P).forEach(l=>{p(l,a)}),v(a));const s=Array.from(j.current.values()),d=s.filter(i=>i.status==="running").length,c=s.filter(i=>i.status==="idle").length,e=s.filter(i=>i.status==="error"||i.status==="overheating").length,u=s.reduce((i,l)=>i+l.utilization,0)/s.length,m=s.reduce((i,l)=>i+l.power_draw,0),x=s.reduce((i,l)=>i+l.jobs.length,0),b=I.current.filter(i=>i.status==="queued").length;r.fillStyle=o.text,r.fillText(`GPU Cluster Dashboard - ${w.toUpperCase()} VIEW`,10,n.height-120),r.fillText(`GPUs: ${d} running | ${c} idle | ${e} errors | Total: ${s.length}`,10,n.height-105),r.fillText(`Average Utilization: ${u.toFixed(1)}% | Total Power: ${m.toFixed(0)}W/${q}W`,10,n.height-90),r.fillText(`Jobs: ${x} active | ${b} queued | Workload: ${T}`,10,n.height-75),r.fillText(`Compute Tasks: ${A.current.length} active | Display: ${M}`,10,n.height-60),r.fillText(`Cooling: ${$} | Thermal Events: ${s.filter(i=>i.thermal_throttling).length}`,10,n.height-45),w==="rack"&&r.fillText(`Viewing: ${P}`,10,n.height-30),W.current=requestAnimationFrame(R)};return C(),window.addEventListener("resize",C),_&&R(),()=>{window.removeEventListener("resize",C),W.current&&cancelAnimationFrame(W.current)}},[_,y,M,w,P,T,k,S,V,$,q]),t.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[t.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[t.jsx("h1",{className:"text-2xl font-bold text-green-400 mb-4",children:"🎮 ASCII GPU Cluster Monitor"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Animation"}),t.jsx("button",{onClick:()=>H(!_),className:`px-3 py-2 rounded font-medium transition-colors ${_?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:_?"Pause":"Play"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-green-300 mb-2",children:["Speed: ",y.toFixed(1),"x"]}),t.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:y,onChange:n=>z(Number.parseFloat(n.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Display Metric"}),t.jsxs("select",{value:M,onChange:n=>Q(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"utilization",children:"GPU Utilization"}),t.jsx("option",{value:"memory",children:"Memory Usage"}),t.jsx("option",{value:"temperature",children:"Temperature"}),t.jsx("option",{value:"power",children:"Power Draw"}),t.jsx("option",{value:"performance",children:"Performance Score"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Cluster View"}),t.jsxs("select",{value:w,onChange:n=>Y(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"overview",children:"Full Cluster"}),t.jsx("option",{value:"rack",children:"Single Rack"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Selected Rack"}),t.jsxs("select",{value:P,onChange:n=>O(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",disabled:w!=="rack",children:[t.jsx("option",{value:"rack-1",children:"Rack 1"}),t.jsx("option",{value:"rack-2",children:"Rack 2"}),t.jsx("option",{value:"rack-3",children:"Rack 3"}),t.jsx("option",{value:"rack-4",children:"Rack 4"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Workload Type"}),t.jsxs("select",{value:T,onChange:n=>K(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"mixed",children:"Mixed Workload"}),t.jsx("option",{value:"ai-training",children:"AI Training"}),t.jsx("option",{value:"crypto-mining",children:"Crypto Mining"}),t.jsx("option",{value:"rendering",children:"3D Rendering"}),t.jsx("option",{value:"compute",children:"Scientific Compute"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Color Scheme"}),t.jsxs("select",{value:k,onChange:n=>Z(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"nvidia",children:"NVIDIA Green"}),t.jsx("option",{value:"amd",children:"AMD Red"}),t.jsx("option",{value:"intel",children:"Intel Blue"}),t.jsx("option",{value:"hpc",children:"HPC Cyan"}),t.jsx("option",{value:"thermal",children:"Thermal"})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:S,onChange:n=>ee(n.target.checked),className:"mr-1"}),"Compute Tasks"]}),t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:V,onChange:n=>te(n.target.checked),className:"mr-1"}),"Job Info"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Cooling Mode"}),t.jsxs("select",{value:$,onChange:n=>re(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"standard",children:"Air Cooling"}),t.jsx("option",{value:"enhanced",children:"Enhanced Air"}),t.jsx("option",{value:"liquid",children:"Liquid Cooling"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-green-300 mb-2",children:["Power Budget: ",q,"W"]}),t.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:q,onChange:n=>ae(Number.parseInt(n.target.value)),className:"w-full"})]})]}),t.jsxs("div",{className:"mt-4 text-green-400 text-sm",children:[t.jsxs("p",{children:["🎮 ",t.jsx("strong",{children:"High-performance GPU cluster"})," with real-time job scheduling and thermal monitoring!"]}),t.jsxs("p",{children:["⚡ ",t.jsx("strong",{children:"Switch between workloads"})," - AI training, crypto mining, 3D rendering, and scientific computing!"]}),t.jsxs("p",{children:["🌡️ ",t.jsx("strong",{children:"Thermal management"})," with automatic throttling, cooling modes, and power budget control!"]}),t.jsx("p",{children:"Monitor RTX 4090, A100, H100, V100 GPUs across multiple racks with distributed compute task visualization"})]})]}),t.jsx("div",{className:"flex-1 relative",children:t.jsx("canvas",{ref:B,className:"absolute inset-0 w-full h-full",style:{background:U[k].bg}})})]})};export{le as component};
