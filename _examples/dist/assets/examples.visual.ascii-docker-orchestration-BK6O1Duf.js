import{r as d,j as s,e as M}from"./index-BqTI3VMm.js";const F=function(){const y=d.useRef(null),p=d.useRef(),g=d.useRef(!1),v=d.useRef(0),[h,b]=d.useState(!1),[x,R]=d.useState({totalContainers:0,runningContainers:0,totalNodes:0,activeNodes:0}),N=d.useRef([{id:"node-1",name:"worker-01",containers:[],cpu:0,memory:0,status:"active"},{id:"node-2",name:"worker-02",containers:[],cpu:0,memory:0,status:"active"},{id:"node-3",name:"worker-03",containers:[],cpu:0,memory:0,status:"active"}]),T=e=>{const t=["nginx","redis","postgres","api","worker","cache"],c=t[Math.floor(Math.random()*t.length)],l=Math.random().toString(36).substr(2,8);return{id:l,name:`${c}-${l}`,status:"starting",cpu:Math.random()*50,memory:Math.random()*80,x:10+e*25,y:8+Math.floor(Math.random()*10),health:"healthy",uptime:0}},k=(e,t)=>{e.uptime+=t,e.status==="starting"&&e.uptime>2&&(e.status="running"),Math.random()<.001&&e.status==="running"&&(e.status="stopping"),e.status==="stopping"&&e.uptime>5&&(e.status="stopped"),e.cpu>80||e.memory>90?e.health="critical":e.cpu>60||e.memory>70?e.health="warning":e.health="healthy",e.cpu=M(e.cpu+(Math.random()-.5)*10,0,100),e.memory=M(e.memory+(Math.random()-.5)*5,0,100)},C=(e,t,c,l)=>{const o=t.x*c,r=t.y*l;let i="□",f="#00ff00";switch(t.status){case"starting":i="◯",f="#ffff00";break;case"running":i="■",f=t.health==="healthy"?"#00ff00":t.health==="warning"?"#ff8800":"#ff0000";break;case"stopping":i="◐",f="#ff8800";break;case"stopped":i="□",f="#666666";break}if(e.fillStyle=f,e.fillText(i,o,r),t.status==="running"){const n=Math.floor(t.cpu/10),u=Math.floor(t.memory/10);e.fillStyle="#444444";for(let a=0;a<10;a++)e.fillText("_",o+(a+1)*c,r+l),e.fillText("_",o+(a+1)*c,r+l*2);e.fillStyle=t.cpu>80?"#ff0000":"#00ff00";for(let a=0;a<n;a++)e.fillText("█",o+(a+1)*c,r+l);e.fillStyle=t.memory>90?"#ff0000":"#0088ff";for(let a=0;a<u;a++)e.fillText("█",o+(a+1)*c,r+l*2)}},$=(e,t,c,l,o)=>{const r=5+c*25,i=3;e.fillStyle=t.status==="active"?"#00ff00":t.status==="draining"?"#ffff00":"#ff0000",e.fillText(`╭─ ${t.name} ─╮`,r*l,i*o),e.fillStyle="#ffffff",e.fillText(`│ CPU: ${t.cpu.toFixed(1)}%`,r*l,(i+1)*o),e.fillText(`│ MEM: ${t.memory.toFixed(1)}%`,r*l,(i+2)*o),e.fillText(`│ CNT: ${t.containers.filter(f=>f.status==="running").length}`,r*l,(i+3)*o),e.fillText("╰─────────────╯",r*l,(i+4)*o),e.fillStyle="#333333";for(let f=0;f<15;f++)for(let n=0;n<12;n++)e.fillText("·",(r+f)*l,(i+6+n)*o)},D=(e,t,c,l)=>{const o=N.current;for(let r=0;r<o.length-1;r++){const i=12+r*25,f=12+(r+1)*25,n=20,u=Math.floor(t*2)%(f-i),a=Math.random()>.5?"→":"⟶";e.fillStyle="#00ffff",e.fillText(a,(i+u)*c,n*l),e.fillStyle="#444444";for(let m=i;m<f;m++)m!==i+u&&e.fillText("─",m*c,n*l)}},j=()=>{if(!g.current)return;const e=y.current;if(!e)return;const t=e.getContext("2d");if(!t)return;v.current+=.016;const c=v.current;t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height);const l=8,o=16;t.font="12px monospace",t.fillStyle="#ffffff",t.fillText("Docker Swarm Orchestration Dashboard",10,20),t.fillText("════════════════════════════════════",10,35);const r=N.current;r.forEach((n,u)=>{n.cpu=0,n.memory=0;let a=0;Math.random()<.01&&n.containers.length<8&&n.containers.push(T(u)),n.containers=n.containers.filter(m=>(k(m,.016),m.status==="running"&&(a++,n.cpu+=m.cpu,n.memory+=m.memory),m.status!=="stopped"||m.uptime<6)),a>0&&(n.cpu/=a,n.memory/=a),$(t,n,u,l,o),n.containers.forEach(m=>{C(t,m,l,o)})}),D(t,c,l,o);const i=r.reduce((n,u)=>n+u.containers.length,0),f=r.reduce((n,u)=>n+u.containers.filter(a=>a.status==="running").length,0);R({totalContainers:i,runningContainers:f,totalNodes:r.length,activeNodes:r.filter(n=>n.status==="active").length}),p.current=requestAnimationFrame(j)},S=()=>{b(!0),g.current=!0,j()},w=()=>{b(!1),g.current=!1,p.current&&cancelAnimationFrame(p.current)};return d.useEffect(()=>(S(),()=>w()),[]),s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Docker Swarm Orchestration"}),s.jsx("p",{className:"text-gray-600",children:"Real-time visualization of container orchestration, showing nodes, containers, resource usage, and network traffic in a Docker Swarm cluster."})]}),s.jsxs("div",{className:"mb-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-100 p-3 rounded",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Total Containers"}),s.jsx("div",{className:"text-2xl font-bold",children:x.totalContainers})]}),s.jsxs("div",{className:"bg-green-100 p-3 rounded",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Running"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.runningContainers})]}),s.jsxs("div",{className:"bg-blue-100 p-3 rounded",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Active Nodes"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.activeNodes})]}),s.jsxs("div",{className:"bg-purple-100 p-3 rounded",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Total Nodes"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.totalNodes})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:h?w:S,className:`px-4 py-2 rounded ${h?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:[h?"Stop":"Start"," Orchestration"]})}),s.jsx("div",{className:"border rounded-lg p-4 bg-black",children:s.jsx("canvas",{ref:y,width:800,height:600,className:"block",style:{width:"100%",height:"auto",maxWidth:"100%",imageRendering:"pixelated"}})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Legend:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("div",{children:"■ Running container"}),s.jsx("div",{children:"◯ Starting container"}),s.jsx("div",{children:"◐ Stopping container"}),s.jsx("div",{children:"□ Stopped container"}),s.jsx("div",{children:"Green bars: CPU usage"}),s.jsx("div",{children:"Blue bars: Memory usage"})]})]})]})};export{F as component};
