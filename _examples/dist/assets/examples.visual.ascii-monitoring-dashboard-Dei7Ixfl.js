import{r as h,j as n}from"./index-BqTI3VMm.js";const O=function(){const E=h.useRef(null),c=h.useRef(),[T,b]=h.useState(!1),y=h.useRef(!1),o=h.useRef([{name:"CPU",value:0,threshold:80,status:"ok",history:[]},{name:"Memory",value:0,threshold:85,status:"ok",history:[]},{name:"Disk I/O",value:0,threshold:90,status:"ok",history:[]},{name:"Network",value:0,threshold:75,status:"ok",history:[]},{name:"Latency",value:0,threshold:500,status:"ok",history:[]},{name:"Error Rate",value:0,threshold:5,status:"ok",history:[]}]),i=h.useRef([]),R=h.useRef(1),d=h.useRef([{name:"API Gateway",status:"up",uptime:99.9,responseTime:45},{name:"Auth Service",status:"up",uptime:99.8,responseTime:32},{name:"Database",status:"up",uptime:99.95,responseTime:12},{name:"Cache Layer",status:"up",uptime:99.7,responseTime:8},{name:"Message Queue",status:"up",uptime:99.85,responseTime:15}]);h.useEffect(()=>{const e=E.current;if(!e)return;const t=e.getContext("2d");if(!t)return;e.width=1e3,e.height=800,t.font="11px monospace";const s=a=>{y.current&&(x(a),w(),v(a),$(t,a),c.current=requestAnimationFrame(s))};return y.current&&(c.current=requestAnimationFrame(s)),()=>{c.current&&cancelAnimationFrame(c.current)}},[T]);const x=e=>{o.current.forEach(t=>{let s=t.value;switch(t.name){case"CPU":s=30+40*Math.sin(e/5e3)+Math.random()*20;break;case"Memory":s=45+25*Math.sin(e/8e3)+Math.random()*15;break;case"Disk I/O":s=Math.random()<.1?60+Math.random()*30:10+Math.random()*20;break;case"Network":s=20+30*Math.sin(e/6e3)+Math.random()*25;break;case"Latency":s=50+100*Math.sin(e/7e3)+Math.random()*50;break;case"Error Rate":s=Math.random()<.05?Math.random()*8:Math.random()*2;break}t.value=Math.max(0,s),t.history.push(t.value),t.history.length>50&&t.history.shift(),t.value>t.threshold?t.status="critical":t.value>t.threshold*.8?t.status="warning":t.status="ok"})},w=e=>{d.current.forEach(t=>{Math.random()<.001?(t.status=Math.random()<.7?"degraded":"down",t.uptime=Math.max(95,t.uptime-Math.random()*2)):t.status!=="up"&&Math.random()<.1&&(t.status="up"),t.status==="up"?t.responseTime=t.responseTime*.9+(Math.random()*50+10)*.1:t.responseTime=t.responseTime*.9+(Math.random()*200+100)*.1})},v=e=>{o.current.forEach(t=>{t.status==="critical"&&Math.random()<.02&&M("critical",`${t.name} threshold exceeded: ${t.value.toFixed(1)}%`,e)}),d.current.forEach(t=>{t.status==="down"&&Math.random()<.05?M("critical",`${t.name} is down`,e):t.status==="degraded"&&Math.random()<.03&&M("warning",`${t.name} performance degraded`,e)}),i.current.forEach(t=>{!t.acknowledged&&e-t.timestamp>1e4&&(t.acknowledged=!0)}),i.current=i.current.filter(t=>!t.acknowledged||e-t.timestamp<2e4)},M=(e,t,s)=>{const a={id:`alert-${R.current++}`,severity:e,message:t,timestamp:s,acknowledged:!1};i.current.unshift(a),i.current.length>10&&i.current.pop()},$=(e,t)=>{e.fillStyle="#000",e.fillRect(0,0,1e3,800),e.fillStyle="#00ff00",e.fillText("ASCII Monitoring Dashboard - Real-time System Health",20,25),e.fillStyle="#888888";const s=new Date(t).toLocaleTimeString();e.fillText(`Last Updated: ${s}`,700,25),A(e),j(e),C(e,t),I(e)},A=e=>{e.fillStyle="#ffffff",e.fillText("╔═══ SYSTEM METRICS ═══════════════════════════════════════════════════╗",20,60),o.current.forEach((t,s)=>{const a=20+s%3*300,l=80+Math.floor(s/3)*120,f=t.status==="critical"?"#ff0000":t.status==="warning"?"#ffff00":"#00ff00";e.fillStyle=f,e.fillText(`${t.name.padEnd(12)} ${t.value.toFixed(1).padStart(6)}${t.name==="Latency"?"ms":"%"}`,a+5,l+20);const u=25,m=Math.floor(t.value/(t.threshold*1.2)*u),p="█".repeat(Math.min(m,u))+"░".repeat(Math.max(0,u-m));if(e.fillText(`[${p}]`,a+5,l+40),t.history.length>1){e.fillStyle="#666666",e.fillText("Trend:",a+5,l+60);const g=t.history.slice(-20).map(S=>{const r=S/(t.threshold*1.2);return r>.7?"▲":r>.4?"■":"▼"}).join("");e.fillStyle=f,e.fillText(g,a+50,l+60)}}),e.fillStyle="#ffffff",e.fillText("╚══════════════════════════════════════════════════════════════════════╝",20,320)},j=e=>{e.fillStyle="#ffffff",e.fillText("╔═══ SERVICE STATUS ═══════════════════════════════════════════════════╗",20,350),d.current.forEach((t,s)=>{const a=370+s*25,l=t.status==="up"?"#00ff00":t.status==="degraded"?"#ffff00":"#ff0000",f=t.status==="up"?"●":t.status==="degraded"?"◐":"○";e.fillStyle=l,e.fillText(`${f} ${t.name.padEnd(15)}`,25,a),e.fillStyle="#ffffff",e.fillText(`Uptime: ${t.uptime.toFixed(2)}%`,200,a),e.fillText(`Response: ${t.responseTime.toFixed(0)}ms`,320,a);const u="█".repeat(Math.floor(t.uptime/5))+"░".repeat(20-Math.floor(t.uptime/5));e.fillStyle=t.uptime>99?"#00ff00":t.uptime>95?"#ffff00":"#ff0000",e.fillText(`[${u}]`,450,a)}),e.fillStyle="#ffffff",e.fillText("╚══════════════════════════════════════════════════════════════════════╝",20,500)},C=(e,t)=>{e.fillStyle="#ffffff",e.fillText("╔═══ ACTIVE ALERTS ════════════════════════════════════════════════════╗",520,60);const s=i.current.filter(a=>!a.acknowledged);s.length===0?(e.fillStyle="#00ff00",e.fillText("✓ No active alerts - All systems nominal",525,90)):s.slice(0,8).forEach((a,l)=>{const f=90+l*25,u=a.severity==="critical"?"#ff0000":a.severity==="warning"?"#ffff00":"#00aaff",m=a.severity==="critical"?"⚠":a.severity==="warning"?"!":"i";e.fillStyle=u,e.fillText(`${m} ${a.severity.toUpperCase()}`,525,f),e.fillStyle="#ffffff";const p=Math.floor((t-a.timestamp)/1e3);e.fillText(`${a.message.substring(0,35)} (${p}s ago)`,600,f)}),e.fillStyle="#ffffff",e.fillText("╚══════════════════════════════════════════════════════════════════════╝",520,290)},I=e=>{var g,S;e.fillStyle="#ffffff",e.fillText("╔═══ SYSTEM OVERVIEW ══════════════════════════════════════════════════╗",520,320);const t=o.current.filter(r=>r.status==="ok").length,s=d.current.filter(r=>r.status==="up").length,a=i.current.filter(r=>!r.acknowledged).length,l=(t/o.current.length+s/d.current.length)/2*100,f=l>90?"#00ff00":l>70?"#ffff00":"#ff0000",u=l>90?"EXCELLENT":l>70?"GOOD":"DEGRADED";e.fillStyle=f,e.fillText(`System Health: ${u} (${l.toFixed(1)}%)`,525,350),e.fillStyle="#ffffff",e.fillText(`Metrics OK: ${t}/${o.current.length}`,525,380),e.fillText(`Services UP: ${s}/${d.current.length}`,525,400),e.fillText(`Active Alerts: ${a}`,525,420);const m=((g=o.current.find(r=>r.name==="Latency"))==null?void 0:g.value)||0,p=((S=o.current.find(r=>r.name==="Error Rate"))==null?void 0:S.value)||0;e.fillText(`Avg Latency: ${m.toFixed(0)}ms`,525,450),e.fillText(`Error Rate: ${p.toFixed(2)}%`,525,470),e.fillStyle="#ffffff",e.fillText("╚══════════════════════════════════════════════════════════════════════╝",520,500)},N=()=>{b(!0),y.current=!0},k=()=>{b(!1),y.current=!1,c.current&&cancelAnimationFrame(c.current)},F=()=>{k(),o.current.forEach(e=>{e.value=0,e.status="ok",e.history=[]}),i.current=[],d.current.forEach(e=>{e.status="up",e.uptime=99.9,e.responseTime=Math.random()*50+10})};return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"ASCII Monitoring Dashboard"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Comprehensive real-time monitoring dashboard showing system metrics, service health, alerts, and overall infrastructure status."}),n.jsxs("div",{className:"mb-4 space-x-2",children:[n.jsx("button",{onClick:N,disabled:T,className:"px-4 py-2 bg-green-500 text-white rounded disabled:bg-gray-400",children:"Start Monitoring"}),n.jsx("button",{onClick:k,disabled:!T,className:"px-4 py-2 bg-red-500 text-white rounded disabled:bg-gray-400",children:"Stop"}),n.jsx("button",{onClick:F,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Reset"})]}),n.jsx("canvas",{ref:E,style:{border:"1px solid #ccc",backgroundColor:"#000",maxWidth:"100%",height:"auto"}}),n.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[n.jsx("p",{children:n.jsx("strong",{children:"Features:"})}),n.jsxs("ul",{className:"list-disc list-inside",children:[n.jsx("li",{children:"Real-time system metrics with threshold monitoring"}),n.jsx("li",{children:"Service health tracking with uptime statistics"}),n.jsx("li",{children:"Alert management with severity levels and timestamps"}),n.jsx("li",{children:"Trend visualization with sparkline charts"}),n.jsx("li",{children:"Overall system health scoring and performance indicators"})]})]})]})};export{O as component};
