import{r as d,j as t,e as N,l as L}from"./index-BqTI3VMm.js";const Z=function(){const E=d.useRef(null),C=d.useRef(0),g=d.useRef(new Map),F=d.useRef([]),[y,W]=d.useState(!0),[w,_]=d.useState(1),[j,$]=d.useState(.7),[S,P]=d.useState("cpu"),[k,R]=d.useState(.5),[i,I]=d.useState("terminal"),[A,U]=d.useState(!0),[v,q]=d.useState(!0),[M,B]=d.useState("normal"),c={terminal:{bg:"#001100",text:"#33FF33",warning:"#FFAA00",critical:"#FF3333",network:"#00AAFF"},matrix:{bg:"#000000",text:"#00FF00",warning:"#FFFF00",critical:"#FF0000",network:"#0080FF"},amber:{bg:"#110800",text:"#FFAA00",warning:"#FF8800",critical:"#FF4400",network:"#00AAFF"},cyber:{bg:"#000022",text:"#00FFFF",warning:"#FF00FF",critical:"#FF4444",network:"#8800FF"},monochrome:{bg:"#000000",text:"#FFFFFF",warning:"#CCCCCC",critical:"#888888",network:"#666666"}};return d.useEffect(()=>{const n=new Map;[{name:"web-01",x:10,y:5,connections:["lb-01","db-01"]},{name:"web-02",x:10,y:15,connections:["lb-01","db-01"]},{name:"web-03",x:10,y:25,connections:["lb-01","db-02"]},{name:"lb-01",x:30,y:10,connections:["web-01","web-02","web-03","cache-01"]},{name:"cache-01",x:50,y:8,connections:["lb-01","db-01"]},{name:"cache-02",x:50,y:18,connections:["db-01","db-02"]},{name:"db-01",x:70,y:5,connections:["web-01","web-02","cache-01","backup-01"]},{name:"db-02",x:70,y:15,connections:["web-03","cache-02","backup-01"]},{name:"backup-01",x:90,y:10,connections:["db-01","db-02"]},{name:"mon-01",x:30,y:25,connections:["web-01","web-02","web-03","lb-01"]}].forEach(f=>{n.set(f.name,{id:f.name,name:f.name,cpu:Math.random()*100,memory:Math.random()*100,network:Math.random()*100,disk:Math.random()*100,temperature:40+Math.random()*30,uptime:Math.random()*1e4,x:f.x,y:f.y,status:"healthy",connections:f.connections,load_history:Array(20).fill(0).map(()=>Math.random()*100),alert_flash:0})}),g.current=n},[]),d.useEffect(()=>{const n=E.current;if(!n)return;const a=n.getContext("2d");if(!a)return;const f=()=>{n.width=n.offsetWidth,n.height=n.offsetHeight},H=()=>{const o=g.current;o.forEach(e=>{let s=0;const r=Date.now()/1e3;e.name.startsWith("web-")?s=30+40*Math.sin(r*.5)+20*Math.sin(r*2)+Math.random()*20:e.name.startsWith("db-")?s=50+20*Math.sin(r*.2)+(Math.random()<.1?40:0):e.name.startsWith("cache-")?s=20+30*Math.sin(r*1.5)+Math.random()*30:e.name.startsWith("lb-")?s=40+15*Math.sin(r*.8)+Math.random()*15:s=25+25*Math.sin(r*.3)+Math.random()*25,M==="high-load"?s*=1.5:M==="ddos-attack"?(e.name.startsWith("web-")||e.name.startsWith("lb-"))&&(s=80+Math.random()*20):M==="db-overload"&&e.name.startsWith("db-")&&(s=90+Math.random()*10),e.cpu=N(s+(Math.random()-.5)*10,0,100),e.memory=N(e.memory+(Math.random()-.5)*2,10,95),e.network=N(e.network+(Math.random()-.5)*5,0,100),e.disk=N(e.disk+(Math.random()-.5)*1,5,95),e.temperature=N(40+e.cpu*.3+(Math.random()-.5)*5,35,85),e.uptime+=1,e.load_history.push(e.cpu),e.load_history.length>20&&e.load_history.shift();const l=Math.max(e.cpu,e.memory,e.disk);if(l>90?(e.status="critical",e.alert_flash=Math.max(e.alert_flash,10)):l>j*100?(e.status="warning",e.alert_flash=Math.max(e.alert_flash,5)):e.status="healthy",e.alert_flash>0&&e.alert_flash--,Math.random()<k*w&&e.connections.length>0){const m=e.connections[Math.floor(Math.random()*e.connections.length)];o.get(m)&&F.current.push({id:`${e.id}-${m}-${Date.now()}`,from:e.id,to:m,progress:0,type:Math.random()<.1?"error":Math.random()<.3?"request":"data",size:Math.floor(Math.random()*5)+1})}}),F.current=F.current.filter(e=>(e.progress+=.02*w,e.progress<1))},O=(o,e,s,r,l)=>{const u=s/r;a.fillStyle=c[i].text+"40",a.fillText("█".repeat(12),o,e);const x=Math.floor(u*12);if(x>0){let h=c[i].text;u>.9?h=c[i].critical:u>j&&(h=c[i].warning),a.fillStyle=h,a.fillText("█".repeat(x),o,e)}a.fillStyle=c[i].text,a.fillText(`${l}: ${s.toFixed(0)}%`,o+12+1,e)},Y=o=>{const s=o.x,r=o.y;let l=c[i].text;o.status==="critical"?l=c[i].critical:o.status==="warning"&&(l=c[i].warning),o.alert_flash>0&&o.alert_flash%4<2?a.fillStyle=o.status==="critical"?"#FF0000":"#FFAA00":a.fillStyle=l,["┌─────────┐","│ ███████ │","│ ███████ │","│ ○ ○ ○ ○ │","└─────────┘"].forEach((x,h)=>{a.fillText(x,s*12,(r+h)*12)}),a.fillStyle=c[i].text,a.fillText(o.name,s*12,(r-1)*12);const u=o.status==="healthy"?"●":o.status==="warning"?"▲":"✕";if(a.fillStyle=l,a.fillText(u,(s+12)*12,(r-1)*12),v){const x=r+6;let h=0,b="";switch(S){case"cpu":h=o.cpu,b="CPU";break;case"memory":h=o.memory,b="MEM";break;case"network":h=o.network,b="NET";break;case"disk":h=o.disk,b="DSK";break;case"temperature":h=o.temperature,b="TMP";break}if(O((s+1)*12,x*12,h,100,b),S==="cpu"){const T=x+2;o.load_history.forEach((p,K)=>{const V=s+1+K,X=Math.floor(p/100*3);a.fillStyle=p>80?c[i].critical:p>60?c[i].warning:c[i].text;for(let z=0;z<X;z++)a.fillText("▌",V*12,(T+2-z)*12)})}}},G=()=>{if(!A)return;const o=g.current,e=12;o.forEach(s=>{s.connections.forEach(r=>{const l=o.get(r);if(!l)return;const m=(s.x+5)*e,u=(s.y+2)*e,x=(l.x+5)*e,h=(l.y+2)*e;a.strokeStyle=c[i].network+"60",a.lineWidth=1,a.setLineDash([2,2]),a.beginPath(),a.moveTo(m,u),a.lineTo(x,h),a.stroke(),a.setLineDash([])})}),F.current.forEach(s=>{const r=o.get(s.from),l=o.get(s.to);if(!r||!l)return;const m=(r.x+5)*e,u=(r.y+2)*e,x=(l.x+5)*e,h=(l.y+2)*e,b=L(m,x,s.progress),T=L(u,h,s.progress);let p=c[i].network;s.type==="error"?p=c[i].critical:s.type==="request"&&(p=c[i].warning),a.fillStyle=p,a.fillText("●",b,T)})},D=()=>{if(!y)return;const o=c[i];a.fillStyle=o.bg,a.fillRect(0,0,n.width,n.height),a.font='12px "Courier New", monospace',a.textBaseline="top",Math.random()<.1*w&&H(),G(),g.current.forEach(l=>{Y(l)});const e=Array.from(g.current.values()).reduce((l,m)=>l+m.cpu,0)/g.current.size,s=Array.from(g.current.values()).filter(l=>l.status==="critical").length,r=Array.from(g.current.values()).filter(l=>l.status==="warning").length;a.fillStyle=c[i].text,a.fillText("Infrastructure Status Dashboard",10,n.height-80),a.fillText(`Average Load: ${e.toFixed(1)}%`,10,n.height-65),a.fillText(`Critical: ${s} | Warning: ${r} | Healthy: ${g.current.size-s-r}`,10,n.height-50),a.fillText(`Network Packets: ${F.current.length} | Mode: ${M}`,10,n.height-35),a.fillText(`Display: ${S.toUpperCase()} | Traffic: ${(k*100).toFixed(0)}%`,10,n.height-20),C.current=requestAnimationFrame(D)};return f(),window.addEventListener("resize",f),y&&D(),()=>{window.removeEventListener("resize",f),C.current&&cancelAnimationFrame(C.current)}},[y,w,j,S,k,i,A,v,M]),t.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[t.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[t.jsx("h1",{className:"text-2xl font-bold text-green-400 mb-4",children:"🖥️ ASCII Server Load Monitor"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Animation"}),t.jsx("button",{onClick:()=>W(!y),className:`px-3 py-2 rounded font-medium transition-colors ${y?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:y?"Pause":"Play"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-green-300 mb-2",children:["Speed: ",w.toFixed(1),"x"]}),t.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:w,onChange:n=>_(Number.parseFloat(n.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-green-300 mb-2",children:["Alert Level: ",Math.round(j*100),"%"]}),t.jsx("input",{type:"range",min:"0.5",max:"0.9",step:"0.05",value:j,onChange:n=>$(Number.parseFloat(n.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Display Mode"}),t.jsxs("select",{value:S,onChange:n=>P(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"cpu",children:"CPU Usage"}),t.jsx("option",{value:"memory",children:"Memory"}),t.jsx("option",{value:"network",children:"Network"}),t.jsx("option",{value:"disk",children:"Disk I/O"}),t.jsx("option",{value:"temperature",children:"Temperature"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-green-300 mb-2",children:["Network Traffic: ",Math.round(k*100),"%"]}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:k,onChange:n=>R(Number.parseFloat(n.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Color Scheme"}),t.jsxs("select",{value:i,onChange:n=>I(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"terminal",children:"Terminal Green"}),t.jsx("option",{value:"matrix",children:"Matrix"}),t.jsx("option",{value:"amber",children:"Amber"}),t.jsx("option",{value:"cyber",children:"Cyberpunk"}),t.jsx("option",{value:"monochrome",children:"Monochrome"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-green-300 mb-2",children:"Simulation"}),t.jsxs("select",{value:M,onChange:n=>B(n.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[t.jsx("option",{value:"normal",children:"Normal Load"}),t.jsx("option",{value:"high-load",children:"High Load"}),t.jsx("option",{value:"ddos-attack",children:"DDoS Attack"}),t.jsx("option",{value:"db-overload",children:"DB Overload"})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:A,onChange:n=>U(n.target.checked),className:"mr-1"}),"Connections"]}),t.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:n=>q(n.target.checked),className:"mr-1"}),"Metrics"]})]})]}),t.jsxs("div",{className:"mt-4 text-green-400 text-sm",children:[t.jsxs("p",{children:["🖥️ ",t.jsx("strong",{children:"Real-time server monitoring"})," with load visualization and network packet flow!"]}),t.jsxs("p",{children:["📊 ",t.jsx("strong",{children:"Switch display modes"})," to view CPU, memory, disk, network, and temperature metrics!"]}),t.jsxs("p",{children:["⚠️ ",t.jsx("strong",{children:"Alert system"})," automatically highlights servers exceeding load thresholds!"]}),t.jsx("p",{children:"Simulate different infrastructure scenarios including DDoS attacks and database overloads"})]})]}),t.jsx("div",{className:"flex-1 relative",children:t.jsx("canvas",{ref:E,className:"absolute inset-0 w-full h-full",style:{background:c[i].bg}})})]})};export{Z as component};
