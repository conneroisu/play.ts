import{r as d,j as e,P as _,T as M,s as A,t as Q,h as U,k as J}from"./index-BqTI3VMm.js";const te=function(){const F=d.useRef(null),v=d.useRef(),E=d.useRef(0),[m,N]=d.useState({span:30,height:4,bridgeType:"beam",loadCase:"combined",safetyFactor:2.5,designCode:"AASHTO"}),[h,k]=d.useState([{id:"n1",x:50,y:300,isSupport:!0,supportType:"pin",displacement:{x:0,y:0},reaction:{x:0,y:0}},{id:"n2",x:250,y:280,isSupport:!1,supportType:"free",displacement:{x:0,y:-2},reaction:{x:0,y:0}},{id:"n3",x:450,y:280,isSupport:!1,supportType:"free",displacement:{x:0,y:-3},reaction:{x:0,y:0}},{id:"n4",x:650,y:300,isSupport:!0,supportType:"roller",displacement:{x:0,y:0},reaction:{x:0,y:0}}]),[y,Z]=d.useState([{id:"e1",node1:"n1",node2:"n2",material:"steel",crossSection:"beam",area:150,momentOfInertia:25e3,elasticModulus:200,stress:45,strain:225e-6,force:120},{id:"e2",node1:"n2",node2:"n3",material:"steel",crossSection:"beam",area:150,momentOfInertia:25e3,elasticModulus:200,stress:52,strain:26e-5,force:140},{id:"e3",node1:"n3",node2:"n4",material:"steel",crossSection:"beam",area:150,momentOfInertia:25e3,elasticModulus:200,stress:38,strain:19e-5,force:110}]),[T,ee]=d.useState([{id:"l1",nodeId:"n2",type:"point",magnitude:100,direction:270},{id:"l2",elementId:"e2",type:"distributed",magnitude:25,direction:270,position:.5}]),[l,O]=d.useState(null),[b,W]=d.useState(!0),[j,$]=d.useState(!0),[S,q]=d.useState(!1),[P,H]=d.useState("structure"),w={steel:{density:7850,yieldStrength:250,ultimateStrength:400,elasticModulus:200},concrete:{density:2400,yieldStrength:30,ultimateStrength:40,elasticModulus:30},wood:{density:600,yieldStrength:40,ultimateStrength:60,elasticModulus:12},composite:{density:1600,yieldStrength:300,ultimateStrength:450,elasticModulus:150}},z=()=>{var u;let i=0,s=0,p="";y.forEach(r=>{const c=w[r.material],C=r.force*1e3/r.area;r.stress=C/1e3,Math.abs(r.stress)>Math.abs(i)&&(i=r.stress,p=r.id),r.strain=r.stress/c.elasticModulus}),h.forEach(r=>{const c=Math.sqrt(r.displacement.x**2+r.displacement.y**2);c>s&&(s=c)});const g=((u=y.find(r=>r.id===p))==null?void 0:u.material)||"steel",t=w[g].yieldStrength,o=Math.abs(t/i),n=y.reduce((r,c)=>r+c.area*w[c.material].density/1e4,0),a=y.reduce((r,c)=>r+w[c.material].elasticModulus*c.momentOfInertia/1e6,0),x=Math.sqrt(a/n)/(2*_);return{maxStress:i,maxDeflection:s,safetyFactor:o,criticalElement:p,naturalFrequency:x,bucklingLoad:1500+Math.random()*500,fatigueCycles:2e6*(1/Math.abs(i))**3}},X=i=>{const g=240-Math.abs(i)/300*240;return Q(U(g,80,50))},Y=()=>{const i=F.current;if(!i)return;const s=i.getContext("2d");if(!s)return;const p=i.width,g=i.height;s.clearRect(0,0,p,g),s.fillStyle="#8B4513",s.fillRect(0,g-30,p,30),s.strokeStyle="rgba(200, 200, 200, 0.3)",s.lineWidth=1;for(let t=0;t<=p;t+=50)s.beginPath(),s.moveTo(t,0),s.lineTo(t,g),s.stroke();for(let t=0;t<=g;t+=50)s.beginPath(),s.moveTo(0,t),s.lineTo(p,t),s.stroke();if(y.forEach(t=>{const o=h.find(f=>f.id===t.node1),n=h.find(f=>f.id===t.node2);if(!o||!n)return;const a=b?10:0,x=o.x+o.displacement.x*a,u=o.y+o.displacement.y*a,r=n.x+n.displacement.x*a,c=n.y+n.displacement.y*a;if(j?(s.strokeStyle=X(t.stress),s.lineWidth=6+Math.abs(t.stress)/20):(s.strokeStyle=t.material==="steel"?"#666":t.material==="concrete"?"#999":"#8B4513",s.lineWidth=8),s.beginPath(),s.moveTo(x,u),s.lineTo(r,c),s.stroke(),t.crossSection==="beam"){const f=(x+r)/2,I=(u+c)/2,L=Math.atan2(c-u,r-x),R=-A(L)*10,D=J(L)*10;s.strokeStyle=s.strokeStyle,s.lineWidth=3,s.beginPath(),s.moveTo(f+R,I+D),s.lineTo(f-R,I-D),s.stroke()}const C=(x+r)/2,B=(u+c)/2;s.fillStyle="black",s.font="10px Arial",s.textAlign="center",s.fillText(t.id,C,B-10),j&&s.fillText(`${t.stress.toFixed(1)} MPa`,C,B+15)}),h.forEach(t=>{const o=b?10:0,n=t.x+t.displacement.x*o,a=t.y+t.displacement.y*o;s.fillStyle=t.isSupport?"#ff6b35":"#4CAF50",s.beginPath(),s.arc(n,a,6,0,M),s.fill(),t.isSupport&&(s.strokeStyle="#ff6b35",s.lineWidth=3,t.supportType==="pin"?(s.beginPath(),s.moveTo(n,a+6),s.lineTo(n-10,a+20),s.lineTo(n+10,a+20),s.closePath(),s.stroke()):t.supportType==="roller"&&(s.beginPath(),s.arc(n,a+15,6,0,M),s.stroke(),s.beginPath(),s.moveTo(n,a+6),s.lineTo(n,a+9),s.stroke())),s.fillStyle="black",s.font="10px Arial",s.textAlign="center",s.fillText(t.id,n,a-10)}),T.forEach(t=>{if(t.nodeId){const o=h.find(u=>u.id===t.nodeId);if(!o)return;const n=o.x,a=o.y,x=t.magnitude/5;s.strokeStyle="#FF0000",s.lineWidth=3,s.beginPath(),s.moveTo(n,a-x),s.lineTo(n,a),s.stroke(),s.beginPath(),s.moveTo(n,a),s.lineTo(n-5,a-10),s.lineTo(n+5,a-10),s.closePath(),s.fillStyle="#FF0000",s.fill(),s.fillStyle="#FF0000",s.font="10px Arial",s.textAlign="center",s.fillText(`${t.magnitude} kN`,n,a-x-10)}}),S){const t=E.current*.002,o=1+.3*A(t*4);T.forEach(n=>{if(n.nodeId){const a=h.find(x=>x.id===n.nodeId);if(!a)return;s.strokeStyle=`rgba(255, 0, 0, ${.3+.3*A(t*6)})`,s.lineWidth=2,s.beginPath(),s.arc(a.x,a.y,20*o,0,M),s.stroke()}})}},G=()=>{Y(),S&&(E.current+=16)};d.useEffect(()=>{const i=()=>{G(),v.current=requestAnimationFrame(i)};return v.current=requestAnimationFrame(i),()=>{v.current&&cancelAnimationFrame(v.current)}},[h,y,T,b,j,S,P]),d.useEffect(()=>{O(z())},[m,h,y,T]);const V=i=>{switch(N(s=>({...s,bridgeType:i})),i){case"beam":k([{id:"n1",x:50,y:300,isSupport:!0,supportType:"pin",displacement:{x:0,y:0},reaction:{x:0,y:0}},{id:"n2",x:250,y:280,isSupport:!1,supportType:"free",displacement:{x:0,y:-2},reaction:{x:0,y:0}},{id:"n3",x:450,y:280,isSupport:!1,supportType:"free",displacement:{x:0,y:-3},reaction:{x:0,y:0}},{id:"n4",x:650,y:300,isSupport:!0,supportType:"roller",displacement:{x:0,y:0},reaction:{x:0,y:0}}]);break;case"truss":k([{id:"n1",x:50,y:300,isSupport:!0,supportType:"pin",displacement:{x:0,y:0},reaction:{x:0,y:0}},{id:"n2",x:200,y:200,isSupport:!1,supportType:"free",displacement:{x:0,y:-1},reaction:{x:0,y:0}},{id:"n3",x:350,y:180,isSupport:!1,supportType:"free",displacement:{x:0,y:-1.5},reaction:{x:0,y:0}},{id:"n4",x:500,y:200,isSupport:!1,supportType:"free",displacement:{x:0,y:-1},reaction:{x:0,y:0}},{id:"n5",x:650,y:300,isSupport:!0,supportType:"roller",displacement:{x:0,y:0},reaction:{x:0,y:0}}]);break;case"arch":k([{id:"n1",x:50,y:300,isSupport:!0,supportType:"pin",displacement:{x:0,y:0},reaction:{x:0,y:0}},{id:"n2",x:200,y:220,isSupport:!1,supportType:"free",displacement:{x:0,y:-.5},reaction:{x:0,y:0}},{id:"n3",x:350,y:180,isSupport:!1,supportType:"free",displacement:{x:0,y:-.8},reaction:{x:0,y:0}},{id:"n4",x:500,y:220,isSupport:!1,supportType:"free",displacement:{x:0,y:-.5},reaction:{x:0,y:0}},{id:"n5",x:650,y:300,isSupport:!0,supportType:"pin",displacement:{x:0,y:0},reaction:{x:0,y:0}}]);break}};return e.jsx("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gradient-to-br from-orange-50 to-red-50 min-h-screen",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-full"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bridge Structural Analysis"}),e.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:"Civil Engineering Tool"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>H("structure"),className:`px-3 py-1 rounded text-sm ${P==="structure"?"bg-orange-500 text-white":"bg-gray-200"}`,children:"Structure"}),e.jsx("button",{onClick:()=>W(!b),className:`px-3 py-1 rounded text-sm ${b?"bg-blue-500 text-white":"bg-gray-200"}`,children:"Deformation"}),e.jsx("button",{onClick:()=>$(!j),className:`px-3 py-1 rounded text-sm ${j?"bg-red-500 text-white":"bg-gray-200"}`,children:"Stress"}),e.jsx("button",{onClick:()=>q(!S),className:`px-3 py-1 rounded text-sm ${S?"bg-green-500 text-white":"bg-gray-200"}`,children:"Animate"})]}),e.jsx("canvas",{ref:F,width:700,height:400,className:"border border-gray-300 rounded-lg bg-white w-full cursor-crosshair"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l==null?void 0:l.maxStress.toFixed(1)," MPa"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Max Stress"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[l==null?void 0:l.maxDeflection.toFixed(1)," mm"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Max Deflection"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l==null?void 0:l.safetyFactor.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Safety Factor"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[l==null?void 0:l.naturalFrequency.toFixed(1)," Hz"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Natural Freq."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Bridge Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bridge Type"}),e.jsxs("select",{value:m.bridgeType,onChange:i=>V(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"beam",children:"Simply Supported Beam"}),e.jsx("option",{value:"truss",children:"Truss Bridge"}),e.jsx("option",{value:"arch",children:"Arch Bridge"}),e.jsx("option",{value:"suspension",children:"Suspension Bridge"}),e.jsx("option",{value:"cable_stayed",children:"Cable-Stayed Bridge"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Span: ",m.span," m"]}),e.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:m.span,onChange:i=>N(s=>({...s,span:Number.parseInt(i.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Load Case"}),e.jsxs("select",{value:m.loadCase,onChange:i=>N(s=>({...s,loadCase:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"dead",children:"Dead Load Only"}),e.jsx("option",{value:"live",children:"Live Load Only"}),e.jsx("option",{value:"wind",children:"Wind Load"}),e.jsx("option",{value:"seismic",children:"Seismic Load"}),e.jsx("option",{value:"combined",children:"Combined Loading"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Code"}),e.jsxs("select",{value:m.designCode,onChange:i=>N(s=>({...s,designCode:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"AASHTO",children:"AASHTO LRFD"}),e.jsx("option",{value:"Eurocode",children:"Eurocode 3 & 4"}),e.jsx("option",{value:"AS5100",children:"AS 5100 (Australia)"}),e.jsx("option",{value:"CSA",children:"CSA S6 (Canada)"})]})]})]})]}),l&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Analysis Results"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Critical Element:"}),e.jsx("span",{className:"font-mono text-red-600",children:l.criticalElement})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Buckling Load:"}),e.jsxs("span",{className:"font-mono",children:[l.bucklingLoad.toFixed(0)," kN"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fatigue Cycles:"}),e.jsxs("span",{className:"font-mono",children:[(l.fatigueCycles/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Design Code:"}),e.jsx("span",{className:"font-mono",children:m.designCode})]}),e.jsxs("div",{className:`flex justify-between ${l.safetyFactor>=2?"text-green-600":"text-red-600"}`,children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"font-mono font-bold",children:l.safetyFactor>=2?"SAFE":"REVIEW REQUIRED"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Material Properties"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Steel (Grade 50):"}),e.jsx("span",{children:"250 MPa"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Concrete (C40):"}),e.jsx("span",{children:"30 MPa"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"E-Modulus:"}),e.jsx("span",{children:"200 GPa"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Safety Factor:"}),e.jsx("span",{children:m.safetyFactor})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-orange-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800 mb-2",children:"Civil Engineering Applications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-orange-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design & Analysis:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Structural design verification"}),e.jsx("li",{children:"• Load path optimization"}),e.jsx("li",{children:"• Dynamic response analysis"}),e.jsx("li",{children:"• Fatigue life assessment"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Safety & Compliance:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Code compliance checking"}),e.jsx("li",{children:"• Safety factor validation"}),e.jsx("li",{children:"• Risk assessment"}),e.jsx("li",{children:"• Maintenance planning"})]})]})]})]})]})})};export{te as component};
