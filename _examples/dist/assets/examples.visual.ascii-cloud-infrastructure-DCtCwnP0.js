import{r as d,j as a,e as X,l as V}from"./index-BqTI3VMm.js";const te=function(){const W=d.useRef(null),U=d.useRef(0),w=d.useRef(new Map),p=d.useRef(new Map),C=d.useRef([]),[A,B]=d.useState(!0),[M,L]=d.useState(1),[f,H]=d.useState("global"),[k,G]=d.useState("us-east-1"),[E,O]=d.useState("utilization"),[P,q]=d.useState(!0),[j,Y]=d.useState("cloud"),[T,J]=d.useState(!0),[N,K]=d.useState("normal"),[Q,z]=d.useState(!1),$={cloud:{bg:"#001122",healthy:"#00AA44",warning:"#FFAA00",critical:"#FF4444",data:"#00AAFF",text:"#FFFFFF"},aws:{bg:"#232F3E",healthy:"#FF9900",warning:"#FFAA00",critical:"#FF4444",data:"#146EB4",text:"#FFFFFF"},azure:{bg:"#0078D4",healthy:"#00BCF2",warning:"#FFAA00",critical:"#FF4444",data:"#40E0D0",text:"#FFFFFF"},gcp:{bg:"#1A73E8",healthy:"#34A853",warning:"#FBBC04",critical:"#EA4335",data:"#4285F4",text:"#FFFFFF"},dark:{bg:"#000000",healthy:"#00FF00",warning:"#FFAA00",critical:"#FF0000",data:"#00AAFF",text:"#FFFFFF"}};return d.useEffect(()=>{const r=new Map,t=new Map;[{name:"US East 1",code:"us-east-1",x:20,y:15,latency:10},{name:"US West 2",code:"us-west-2",x:5,y:12,latency:15},{name:"EU West 1",code:"eu-west-1",x:40,y:8,latency:45},{name:"Asia Pacific",code:"ap-southeast-1",x:70,y:20,latency:120},{name:"South America",code:"sa-east-1",x:25,y:30,latency:80}].forEach(u=>{const b={name:u.name,code:u.code,x:u.x,y:u.y,resources:[],latency:u.latency,status:"healthy"},x=[{type:"vm",count:3,prefix:"vm"},{type:"container",count:5,prefix:"pod"},{type:"function",count:2,prefix:"fn"},{type:"storage",count:1,prefix:"s3"},{type:"database",count:1,prefix:"db"},{type:"network",count:1,prefix:"lb"}];let R=0;x.forEach(y=>{for(let m=0;m<y.count;m++){const S=`${u.code}-${y.prefix}-${m+1}`,s={id:S,name:`${y.prefix}-${m+1}`,type:y.type,region:u.code,zone:`${u.code}${String.fromCharCode(97+m%3)}`,status:"running",utilization:Math.random()*80+10,cost:Math.random()*100+20,x:u.x+m%3*3,y:u.y+2+R+Math.floor(m/3)*2,connections:[],scaling_target:1,auto_scale:y.type==="container"||y.type==="function",health_score:90+Math.random()*10,alerts:[],deployment_wave:0};t.set(S,s),b.resources.push(s)}R+=Math.ceil(y.count/3)*2+1}),r.set(u.code,b)}),t.forEach(u=>{if(u.type==="network"){const b=Array.from(t.values()).filter(x=>x.region===u.region&&(x.type==="vm"||x.type==="container"));u.connections=b.map(x=>x.id)}else if(u.type==="vm"||u.type==="container"){const b=Array.from(t.values()).filter(x=>x.region===u.region&&(x.type==="database"||x.type==="storage"));u.connections=b.map(x=>x.id)}}),w.current=r,p.current=t},[]),d.useEffect(()=>{const r=W.current;if(!r)return;const t=r.getContext("2d");if(!t)return;const _=()=>{r.width=r.offsetWidth,r.height=r.offsetHeight},u=()=>{const s=p.current,l=w.current,o=Date.now()/1e3;if(s.forEach(e=>{let n=e.utilization;N==="traffic-spike"?(e.type==="vm"||e.type==="container"||e.type==="function")&&(n=Math.min(95,n+30+20*Math.sin(o*2))):N==="region-outage"?e.region==="us-east-1"&&(e.status="error",n=0):N==="auto-scaling"&&e.type==="container"&&e.auto_scale&&(n>80?e.scaling_target=Math.min(5,e.scaling_target+1):n<30&&e.scaling_target>1&&(e.scaling_target=Math.max(1,e.scaling_target-1))),e.status!=="error"&&(e.utilization=X(n+(Math.random()-.5)*10,0,e.type==="function"?100:95)),e.cost=e.utilization*.5+e.scaling_target*10+Math.random()*5,e.status==="error"?e.health_score=Math.max(0,e.health_score-5):e.health_score=Math.min(100,e.health_score+(Math.random()-.4)),e.health_score<50?e.status="error":e.utilization>85?e.status="scaling":e.health_score<80?e.status="starting":e.status="running",e.alerts=[],e.utilization>90&&e.alerts.push("High CPU"),e.health_score<70&&e.alerts.push("Unhealthy"),e.cost>80&&e.alerts.push("High Cost")}),l.forEach(e=>{const n=Array.from(s.values()).filter(i=>i.region===e.code),c=n.filter(i=>i.status==="error").length,g=n.filter(i=>i.alerts.length>0).length;c>n.length*.3?e.status="outage":c>0||g>n.length*.5?e.status="degraded":e.status="healthy"}),Math.random()<.1*M&&T){const e=Array.from(s.values()),n=e[Math.floor(Math.random()*e.length)];if(n.connections.length>0){const c=n.connections[Math.floor(Math.random()*n.connections.length)];C.current.push({id:`${n.id}-${c}-${Date.now()}`,from:n.id,to:c,progress:0,type:Math.random()<.3?"api":Math.random()<.5?"data_sync":"backup",volume:Math.random()*100,latency:Math.random()*50+10})}}C.current=C.current.filter(e=>(e.progress+=.02*M,e.progress<1))},b=s=>{switch(s){case"vm":return"▢";case"container":return"□";case"function":return"λ";case"storage":return"⬢";case"database":return"⬡";case"network":return"⬣";default:return"●"}},x=(s,l)=>{switch(s){case"running":return l.healthy;case"starting":return l.warning;case"scaling":return l.warning;case"error":return l.critical;case"stopping":return l.warning;default:return l.text}},R=(s,l)=>{const o=s.x*l,e=s.y*l,n=$[j];if(t.fillStyle=x(s.status,n),t.fillText(b(s.type),o,e),t.fillStyle=n.text,t.fillText(s.name,o+l,e),s.auto_scale&&s.scaling_target>1&&t.fillText(`×${s.scaling_target}`,o+l*6,e),s.status==="scaling"){const c=Math.floor(Date.now()/200)%4;t.fillText("↕↔↕↔"[c],o-l,e)}else s.status==="error"&&(t.fillStyle=n.critical,t.fillText("✕",o-l,e));if(f==="detailed"||f==="region"&&s.region===k){let c=0;switch(E){case"utilization":c=s.utilization;break;case"cost":c=s.cost;break;case"health":c=s.health_score;break}const g=8,i=Math.floor(c/100*g);t.fillStyle=n.text+"40",t.fillText("█".repeat(g),o,e+l),i>0&&(t.fillStyle=c>80?n.critical:c>60?n.warning:n.healthy,t.fillText("█".repeat(i),o,e+l)),t.fillStyle=n.text,t.fillText(`${c.toFixed(0)}%`,o+(g+1)*l,e+l)}s.alerts.length>0&&Date.now()%1e3<500&&(t.fillStyle=n.critical,t.fillText("⚠",o+l*8,e))},y=(s,l)=>{const o=s.x*l,e=s.y*l,n=$[j],c=20,g=15;t.strokeStyle=s.status==="healthy"?n.healthy:s.status==="degraded"?n.warning:n.critical,t.lineWidth=2,t.strokeRect(o-l,e-l,c*l,g*l),t.fillStyle=n.text,t.fillText(s.name,o,e-l*.5),t.fillText(`(${s.code})`,o,e),t.fillText(`${s.latency}ms`,o+l*12,e-l*.5);const i=s.resources.filter(F=>F.status==="running").length,h=s.resources.filter(F=>F.status==="error").length;t.fillText(`${i}/${s.resources.length} healthy`,o+l*12,e),h>0&&(t.fillStyle=n.critical,t.fillText(`${h} errors`,o+l*12,e+l));const v=s.status==="healthy"?"●":s.status==="degraded"?"▲":"✕";t.fillStyle=s.status==="healthy"?n.healthy:s.status==="degraded"?n.warning:n.critical,t.fillText(v,o-l*.5,e-l*.5)},m=s=>{if(!T)return;const l=p.current,o=$[j];C.current.forEach(e=>{const n=l.get(e.from),c=l.get(e.to);if(!n||!c)return;const g=n.x*s,i=n.y*s,h=c.x*s,v=c.y*s,F=V(g,h,e.progress),D=V(i,v,e.progress);let I=o.data;e.type==="backup"?I=o.warning:e.type==="migration"&&(I=o.critical),t.fillStyle=I,t.fillText("●",F,D),t.strokeStyle=I+"40",t.lineWidth=1,t.setLineDash([2,4]),t.beginPath(),t.moveTo(g,i),t.lineTo(h,v),t.stroke(),t.setLineDash([])})},S=()=>{if(!A)return;const s=$[j],l=12;if(t.fillStyle=s.bg,t.fillRect(0,0,r.width,r.height),t.font='12px "Courier New", monospace',t.textBaseline="top",Math.random()<.05*M&&u(),f==="global"){w.current.forEach(h=>{y(h,l)}),t.strokeStyle=s.data+"60",t.lineWidth=1,t.setLineDash([5,5]);const i=Array.from(w.current.values());for(let h=0;h<i.length;h++)for(let v=h+1;v<i.length;v++){const F=i[h],D=i[v];t.beginPath(),t.moveTo((F.x+10)*l,(F.y+5)*l),t.lineTo((D.x+10)*l,(D.y+5)*l),t.stroke()}t.setLineDash([])}else if(f==="region"){const i=w.current.get(k);i&&(i.resources.forEach(h=>{R(h,l)}),m(l))}else f==="detailed"&&(p.current.forEach(i=>{R(i,l)}),m(l));const o=p.current.size,e=Array.from(p.current.values()).filter(i=>i.status==="running").length,n=Array.from(p.current.values()).filter(i=>i.status==="error").length,c=Array.from(p.current.values()).reduce((i,h)=>i+h.cost,0),g=Array.from(p.current.values()).reduce((i,h)=>i+h.utilization,0)/o;t.fillStyle=s.text,t.fillText(`Cloud Infrastructure Dashboard - ${f.toUpperCase()} VIEW`,10,r.height-100),t.fillText(`Resources: ${e}/${o} running | ${n} errors`,10,r.height-85),t.fillText(`Average ${E}: ${g.toFixed(1)}% | Total Cost: $${c.toFixed(0)}/hour`,10,r.height-70),t.fillText(`Data Flows: ${C.current.length} active | Mode: ${N}`,10,r.height-55),t.fillText(`Regions: ${Array.from(w.current.values()).filter(i=>i.status==="healthy").length}/${w.current.size} healthy`,10,r.height-40),f==="region"&&t.fillText(`Viewing: ${k}`,10,r.height-25),U.current=requestAnimationFrame(S)};return _(),window.addEventListener("resize",_),A&&S(),()=>{window.removeEventListener("resize",_),U.current&&cancelAnimationFrame(U.current)}},[A,M,f,k,E,P,j,T,N,Q]),a.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[a.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[a.jsx("h1",{className:"text-2xl font-bold text-blue-400 mb-4",children:"☁️ ASCII Cloud Infrastructure Monitor"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"Animation"}),a.jsx("button",{onClick:()=>B(!A),className:`px-3 py-2 rounded font-medium transition-colors ${A?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:A?"Pause":"Play"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-blue-300 mb-2",children:["Speed: ",M.toFixed(1),"x"]}),a.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:M,onChange:r=>L(Number.parseFloat(r.target.value)),className:"w-full"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"View Mode"}),a.jsxs("select",{value:f,onChange:r=>H(r.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[a.jsx("option",{value:"global",children:"Global View"}),a.jsx("option",{value:"region",children:"Region View"}),a.jsx("option",{value:"detailed",children:"Detailed View"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"Region"}),a.jsxs("select",{value:k,onChange:r=>G(r.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",disabled:f!=="region",children:[a.jsx("option",{value:"us-east-1",children:"US East 1"}),a.jsx("option",{value:"us-west-2",children:"US West 2"}),a.jsx("option",{value:"eu-west-1",children:"EU West 1"}),a.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific"}),a.jsx("option",{value:"sa-east-1",children:"South America"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"Display Metric"}),a.jsxs("select",{value:E,onChange:r=>O(r.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[a.jsx("option",{value:"utilization",children:"Utilization"}),a.jsx("option",{value:"cost",children:"Cost"}),a.jsx("option",{value:"health",children:"Health Score"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"Color Scheme"}),a.jsxs("select",{value:j,onChange:r=>Y(r.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[a.jsx("option",{value:"cloud",children:"Cloud Blue"}),a.jsx("option",{value:"aws",children:"AWS Orange"}),a.jsx("option",{value:"azure",children:"Azure Blue"}),a.jsx("option",{value:"gcp",children:"Google Cloud"}),a.jsx("option",{value:"dark",children:"Dark Terminal"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-blue-300 mb-2",children:"Simulation"}),a.jsxs("select",{value:N,onChange:r=>K(r.target.value),className:"px-2 py-1 bg-gray-800 text-blue-300 rounded border border-gray-600",children:[a.jsx("option",{value:"normal",children:"Normal Operations"}),a.jsx("option",{value:"traffic-spike",children:"Traffic Spike"}),a.jsx("option",{value:"region-outage",children:"Region Outage"}),a.jsx("option",{value:"auto-scaling",children:"Auto-scaling Demo"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("label",{className:"flex items-center text-blue-300 text-xs",children:[a.jsx("input",{type:"checkbox",checked:T,onChange:r=>J(r.target.checked),className:"mr-1"}),"Data Flows"]}),a.jsxs("label",{className:"flex items-center text-blue-300 text-xs",children:[a.jsx("input",{type:"checkbox",checked:P,onChange:r=>q(r.target.checked),className:"mr-1"}),"Auto-scale"]})]})]}),a.jsxs("div",{className:"mt-4 text-blue-400 text-sm",children:[a.jsxs("p",{children:["☁️ ",a.jsx("strong",{children:"Multi-region cloud infrastructure"})," with real-time resource monitoring!"]}),a.jsxs("p",{children:["🌍 ",a.jsx("strong",{children:"Switch between views"})," - Global overview, regional focus, or detailed resource view!"]}),a.jsxs("p",{children:["⚡ ",a.jsx("strong",{children:"Auto-scaling simulation"})," with traffic spikes, outages, and cost optimization!"]}),a.jsx("p",{children:"Monitor VMs, containers, functions, storage, databases across multiple cloud regions with live data flows"})]})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("canvas",{ref:W,className:"absolute inset-0 w-full h-full",style:{background:$[j].bg}})})]})};export{te as component};
