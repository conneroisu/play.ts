import{r as g,j as e,L as I,P as L,h as M,d as V,l as T,T as B}from"./index-BqTI3VMm.js";const _=function(){const k=g.useRef(null),[f,D]=g.useState([{id:"lobby",name:"Lobby",width:10,height:3,length:15,occupancy:50,lighting:2e3,equipment:1e3,infiltration:.5,designTemp:22,x:50,y:100},{id:"office1",name:"Office 1",width:6,height:3,length:8,occupancy:8,lighting:800,equipment:1200,infiltration:.3,designTemp:23,x:200,y:50},{id:"office2",name:"Office 2",width:6,height:3,length:8,occupancy:8,lighting:800,equipment:1200,infiltration:.3,designTemp:23,x:200,y:200},{id:"conference",name:"Conference",width:8,height:3,length:12,occupancy:20,lighting:1200,equipment:2e3,infiltration:.4,designTemp:22,x:350,y:100},{id:"server",name:"Server Room",width:4,height:3,length:6,occupancy:2,lighting:400,equipment:15e3,infiltration:.1,designTemp:18,x:500,y:50}]),[E,q]=g.useState([]),[l,C]=g.useState({outdoorTemp:35,outdoorHumidity:60,systemType:"vav",efficiency:3.5,energyCost:.12,operatingHours:12,designMargin:1.15,minAirflow:15,maxVelocity:6}),[m,A]=g.useState({showDucts:!0,showLoads:!0,showTemperatures:!0,showAirflow:!0,showVelocities:!1,showPressure:!1,animateAirflow:!0,showEfficiency:!0}),[w,F]=g.useState(null),[j,$]=g.useState(new Map),[H,W]=g.useState(0),O=s=>{const t=s.width*s.height*s.length,n=s.width*s.length,h=s.occupancy*75,d=s.lighting*.9,i=s.equipment,c=n*50,a=n*20,o=t*s.infiltration*1.2*1005*(l.outdoorTemp-s.designTemp)/3600,r=h+d+i+c+a+o,u=s.occupancy*55,x=t*s.infiltration*1.2*2501*.01*(l.outdoorHumidity-50)/3600,p=u+Math.max(0,x),b=r+p,R=r*3.412/(1.08*10),v=p*3.412/(.68*15),y=s.occupancy*l.minAirflow,N=Math.max(R,v,y);return{sensible:r,latent:p,total:b,cfm:N}},P=()=>{const s=[];f.forEach((t,n)=>{if(n===0)return;const h=j.get(t.id);if(!h)return;const d=h.cfm*4719e-7,i=Math.sqrt(4*d/(L*l.maxVelocity))*1e3,c=Math.ceil(i/50)*50,a=4*d/(L*Math.pow(c/1e3,2)),o=f[0],r=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))/10,p=.02*(r/(c/1e3))*(1.2*Math.pow(a,2)/2);s.push({id:`duct_${t.id}`,fromRoom:"main",toRoom:t.id,diameter:c,length:r,airflow:h.cfm,velocity:a,pressureLoss:p})}),q(s)},X=()=>{let s=0,t=0,n=0;j.forEach(x=>{s+=x.total,n+=x.cfm}),s*=l.designMargin,t=s*.7;const h=s/1e3,d=t/1e3,i=6*30*4,c=4*30*8,a=h/l.efficiency*i,o=d/(l.efficiency*.9)*c,r=(a+o)*l.energyCost,u=(a+o)*.5;return{totalCoolingLoad:h,totalHeatingLoad:d,totalAirflow:n,energyEfficiency:l.efficiency,operatingCost:r,carbonFootprint:u}},Y=()=>{const s=k.current,t=s==null?void 0:s.getContext("2d");if(!s||!t)return;if(t.clearRect(0,0,s.width,s.height),t.strokeStyle="#374151",t.lineWidth=2,f.forEach(i=>{const c=j.get(i.id),a=i.width*8,o=i.length*8;let r="#f3f4f6";if(c){const u=Math.min(c.total/5e3,1),x=T(240,0,u),p=M(x,80,70),b=V(p);r=`rgb(${b.r}, ${b.g}, ${b.b})`}t.fillStyle=r,t.fillRect(i.x,i.y,a,o),t.strokeRect(i.x,i.y,a,o),t.fillStyle="#1f2937",t.font="12px Arial",t.textAlign="center",t.fillText(i.name,i.x+a/2,i.y+15),c&&m.showLoads&&(t.font="10px Arial",t.fillText(`${(c.total/1e3).toFixed(1)} kW`,i.x+a/2,i.y+30),t.fillText(`${Math.round(c.cfm)} CFM`,i.x+a/2,i.y+45)),m.showTemperatures&&t.fillText(`${i.designTemp}°C`,i.x+a/2,i.y+o-10)}),m.showDucts){const i=f[0],c=i.x+i.width*8/2,a=i.y+i.length*8/2;E.forEach(o=>{const r=f.find(y=>y.id===o.toRoom);if(!r)return;const u=r.x+r.width*8/2,x=r.y+r.length*8/2;t.lineWidth=Math.max(2,o.diameter/50);const p=o.velocity/l.maxVelocity,b=T(120,0,p),R=M(b,70,50),v=V(R);if(t.strokeStyle=`rgb(${v.r}, ${v.g}, ${v.b})`,t.beginPath(),t.moveTo(c,a),t.lineTo(u,x),t.stroke(),m.animateAirflow){const y=H*.02%1,N=T(c,u,y),z=T(a,x,y);t.fillStyle="rgba(59, 130, 246, 0.8)",t.beginPath(),t.arc(N,z,3,0,B),t.fill()}if(m.showVelocities){const y=(c+u)/2,N=(a+x)/2;t.fillStyle="#1f2937",t.font="10px Arial",t.textAlign="center",t.fillText(`${o.velocity.toFixed(1)} m/s`,y,N-5),t.fillText(`Ø${o.diameter}mm`,y,N+10)}})}t.fillStyle="#6b7280",t.strokeStyle="#374151",t.lineWidth=3;const n=f[0],h=n.x+10,d=n.y+10;t.fillRect(h,d,40,25),t.strokeRect(h,d,40,25),t.fillStyle="#fff",t.font="10px Arial",t.textAlign="center",t.fillText("AHU",h+20,d+17),t.fillStyle="#1f2937",t.font="12px Arial",t.textAlign="left",t.fillText("HVAC System Layout",20,30),m.showLoads&&(t.font="10px Arial",t.fillText("Room Colors: Cooling Load (Blue = Low, Red = High)",20,50)),m.showDucts&&t.fillText("Duct Colors: Air Velocity (Green = Low, Red = High)",20,65)};g.useEffect(()=>{const s=k.current;if(!s)return;s.width=700,s.height=400;const t=new Map;f.forEach(n=>{t.set(n.id,O(n))}),$(t)},[f,l]),g.useEffect(()=>{j.size>0&&(P(),F(X()))},[j,l]),g.useEffect(()=>{Y()},[j,E,m,H]),g.useEffect(()=>{if(!m.animateAirflow)return;const s=setInterval(()=>{W(t=>t+1)},50);return()=>clearInterval(s)},[m.animateAirflow]);const S=(s,t,n)=>{D(h=>h.map(d=>d.id===s?{...d,[t]:n}:d))};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"HVAC System Design Calculator"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"HVAC load calculation, ductwork sizing, and energy analysis tool for building design."}),e.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:e.jsx("p",{className:"text-slate-800",children:"🏢 Complete building HVAC analysis - heat loads, airflow, ductwork, and energy efficiency"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Parameters"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Outdoor Temp: ",l.outdoorTemp,"°C"]}),e.jsx("input",{type:"range",min:"25",max:"45",step:"1",value:l.outdoorTemp,onChange:s=>C(t=>({...t,outdoorTemp:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Humidity: ",l.outdoorHumidity,"%"]}),e.jsx("input",{type:"range",min:"30",max:"90",step:"5",value:l.outdoorHumidity,onChange:s=>C(t=>({...t,outdoorHumidity:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Efficiency: ",l.efficiency," EER"]}),e.jsx("input",{type:"range",min:"2.5",max:"5.0",step:"0.1",value:l.efficiency,onChange:s=>C(t=>({...t,efficiency:Number(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Energy Cost: $",l.energyCost,"/kWh"]}),e.jsx("input",{type:"range",min:"0.05",max:"0.30",step:"0.01",value:l.energyCost,onChange:s=>C(t=>({...t,energyCost:Number(s.target.value)})),className:"w-full"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Display Options"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.showDucts,onChange:s=>A(t=>({...t,showDucts:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ductwork"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.showLoads,onChange:s=>A(t=>({...t,showLoads:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Heat Loads"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.showVelocities,onChange:s=>A(t=>({...t,showVelocities:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Velocities"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.animateAirflow,onChange:s=>A(t=>({...t,animateAirflow:s.target.checked})),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Animate Airflow"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Room Configuration"}),e.jsx("div",{className:"space-y-4",children:f.map((s,t)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:s.name}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Occupancy: ",s.occupancy]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:s.occupancy,onChange:n=>S(s.id,"occupancy",Number(n.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Lighting: ",s.lighting,"W"]}),e.jsx("input",{type:"range",min:"200",max:"5000",step:"100",value:s.lighting,onChange:n=>S(s.id,"lighting",Number(n.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Equipment: ",s.equipment,"W"]}),e.jsx("input",{type:"range",min:"500",max:"20000",step:"500",value:s.equipment,onChange:n=>S(s.id,"equipment",Number(n.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Design Temp: ",s.designTemp,"°C"]}),e.jsx("input",{type:"range",min:"18",max:"26",step:"1",value:s.designTemp,onChange:n=>S(s.id,"designTemp",Number(n.target.value)),className:"w-full"})]})]})]},s.id))})]}),w&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Analysis Results"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Total Cooling Load"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[w.totalCoolingLoad.toFixed(1)," kW"]}),e.jsxs("p",{className:"text-sm text-blue-600",children:[w.totalAirflow.toFixed(0)," CFM"]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"Operating Cost"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:["$",w.operatingCost.toFixed(0)]}),e.jsx("p",{className:"text-sm text-orange-600",children:"per year"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"Carbon Footprint"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[(w.carbonFootprint/1e3).toFixed(1)," t"]}),e.jsx("p",{className:"text-sm text-green-600",children:"CO₂ per year"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Layout"}),e.jsx("canvas",{ref:k,className:"border border-gray-300 rounded-lg bg-white",style:{maxWidth:"100%",height:"auto"}})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-slate-800",children:"HVAC Calculations"}),e.jsxs("ul",{className:"text-slate-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Heat Load Analysis"}),": ASHRAE 90.1 methodology"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Duct Sizing"}),": Equal friction method"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Airflow Requirements"}),": ASHRAE 62.1 ventilation"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Energy Modeling"}),": Annual consumption analysis"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Design Applications"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Commercial Buildings"}),": Office, retail, hospitality"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"System Selection"}),": VAV, CAV, VRF comparison"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Energy Efficiency"}),": LEED compliance analysis"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Cost Optimization"}),": Lifecycle cost analysis"]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(I,{to:"/examples/engineering",className:"inline-block px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"← Back to Examples"})})]})};export{_ as component};
