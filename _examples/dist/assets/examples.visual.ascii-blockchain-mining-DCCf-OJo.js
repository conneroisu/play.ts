import{r as h,j as s,e as X,s as Z,l as I}from"./index-BqTI3VMm.js";const se=function(){const P=h.useRef(null),T=h.useRef(0),N=h.useRef(new Map),y=h.useRef([]),w=h.useRef([]),g=h.useRef({total_hashrate:0,difficulty:15e12,block_time:600,network_hashrate:15e13,price:45e3,profit_per_day:0}),[F,z]=h.useState(!0),[S,E]=h.useState(1),[v,D]=h.useState("hashrate"),[r,G]=h.useState("crypto"),[A,H]=h.useState(!0),[R,W]=h.useState(.8),[j,B]=h.useState(.12),[_,O]=h.useState(!0),o={crypto:{bg:"#001122",text:"#00FFAA",hash:"#FFAA00",block:"#AA00FF",profit:"#00AA00",loss:"#FF4444"},gold:{bg:"#111100",text:"#FFDD00",hash:"#FF8800",block:"#FFFF00",profit:"#00DD00",loss:"#DD0000"},matrix:{bg:"#000000",text:"#00FF00",hash:"#AAFF00",block:"#00AAFF",profit:"#44FF44",loss:"#FF4444"},neon:{bg:"#000011",text:"#00FFFF",hash:"#FF00FF",block:"#FFFF00",profit:"#00FF88",loss:"#FF8800"}};return h.useEffect(()=>{const l=new Map;[{name:"RIG-01",x:10,y:8,gpu_count:6},{name:"RIG-02",x:25,y:8,gpu_count:8},{name:"RIG-03",x:40,y:8,gpu_count:6},{name:"RIG-04",x:55,y:8,gpu_count:10},{name:"RIG-05",x:70,y:8,gpu_count:8},{name:"RIG-06",x:10,y:20,gpu_count:12},{name:"RIG-07",x:25,y:20,gpu_count:6},{name:"RIG-08",x:40,y:20,gpu_count:8},{name:"ASIC-01",x:55,y:20,gpu_count:1},{name:"ASIC-02",x:70,y:20,gpu_count:1}].forEach(d=>{const M=d.name.startsWith("ASIC")?11e4:d.gpu_count*45;l.set(d.name,{id:d.name,name:d.name,x:d.x,y:d.y,hashrate:M+Math.random()*M*.1,power_consumption:d.name.startsWith("ASIC")?3200:d.gpu_count*220,temperature:65+Math.random()*15,uptime:Math.random()*72e5,shares_found:Math.floor(Math.random()*1e3),shares_accepted:0,status:"mining",gpu_count:d.gpu_count,efficiency:.85+Math.random()*.1,alert_flash:0})}),N.current=l,y.current=[{id:"block-750123",height:750123,difficulty:15e12,timestamp:Date.now()-3e5,hash:"0000000000000000000abc123def456",miner_id:"RIG-04",reward:6.25,transaction_count:2847,status:"confirmed"}]},[]),h.useEffect(()=>{const l=P.current;if(!l)return;const a=l.getContext("2d");if(!a)return;const d=()=>{l.width=l.offsetWidth,l.height=l.offsetHeight},M=()=>{const e="0123456789abcdef";let i="0000";for(let n=4;n<32;n++)i+=e[Math.floor(Math.random()*e.length)];return i},Y=()=>{const e=N.current,i=Date.now()/1e3;let n=0;e.forEach(t=>{const x=X(1-(t.temperature-70)*.01,.5,1.1),m=R*x*t.efficiency,p=t.name.startsWith("ASIC")?11e4:t.gpu_count*45;t.hashrate=p*m*(.95+Math.random()*.1),n+=t.hashrate;const b=65+t.hashrate/p*20+5*Z(i*.1);if(t.temperature=I(t.temperature,b,.05),t.power_consumption=(t.name.startsWith("ASIC")?3200:t.gpu_count*220)*m,Math.random()<t.hashrate/1e6*S*.01)if(t.shares_found++,A&&w.current.push({id:`share-${Date.now()}-${t.id}`,x:t.x,y:t.y,target_x:85,target_y:15,progress:0,hash_value:M(),rig_id:t.id,type:Math.random()<.02?"solution":"share"}),Math.random()<1e-4*S){const C={id:`block-${Date.now()}`,height:y.current.length>0?Math.max(...y.current.map($=>$.height))+1:750124,difficulty:g.current.difficulty,timestamp:Date.now(),hash:M(),miner_id:t.id,reward:6.25,transaction_count:1500+Math.floor(Math.random()*2e3),status:"pending"};y.current.unshift(C),y.current.length>10&&y.current.pop(),t.shares_accepted+=50}else Math.random()<.95&&t.shares_accepted++;t.temperature>85?(t.status="error",t.alert_flash=Math.max(t.alert_flash,15)):t.hashrate<p*.5?(t.status="maintenance",t.alert_flash=Math.max(t.alert_flash,8)):t.hashrate<p*.8?t.status="idle":t.status="mining",t.alert_flash>0&&t.alert_flash--,t.uptime+=1e3*S}),g.current.total_hashrate=n,g.current.difficulty+=(Math.random()-.5)*1e8,g.current.price+=(Math.random()-.5)*100;const u=Array.from(e.values()).reduce((t,x)=>t+x.power_consumption,0)/1e3*24*j,c=n/1e6*1e-5*g.current.price;g.current.profit_per_day=c-u},L=()=>{w.current.forEach(e=>{if(e.progress+=.02*S,e.x=I(e.x,e.target_x,e.progress),e.y=I(e.y,e.target_y,e.progress),e.progress>=1&&e.type==="solution"){const i=y.current.find(n=>n.status==="pending");i&&(i.status="confirmed")}}),w.current=w.current.filter(e=>e.progress<1)},U=e=>{const n=e.x,f=e.y;let u=o[r].text;e.status==="error"?u=o[r].loss:e.status==="maintenance"?u=o[r].hash:e.status==="mining"&&(u=o[r].profit),e.alert_flash>0&&e.alert_flash%6<3?a.fillStyle=e.status==="error"?"#FF0000":"#FFAA00":a.fillStyle=u;let c=[];e.name.startsWith("ASIC")?c=["┌─────────┐","│ ████▓▓▓ │","│ ASIC    │","│ ○○○ HOT │","└─────────┘"]:c=["┌─────────┐","│ GPU GPU │","│ GPU GPU │","│ ○○○ FAN │","└─────────┘"],c.forEach(($,Q)=>{a.fillText($,n*10,(f+Q)*10)}),a.fillStyle=o[r].text,a.fillText(e.name,n*10,(f-1)*10);let t="●";e.status==="mining"?t="⚡":e.status==="error"?t="✕":e.status==="maintenance"?t="🔧":e.status==="idle"&&(t="○"),a.fillStyle=u,a.fillText(t,(n+11)*10,(f-1)*10);const x=f+6;let m=0,p="",b="";switch(v){case"hashrate":m=e.hashrate/1e3,p="Hash",b="MH/s";break;case"temperature":m=e.temperature,p="Temp",b="°C";break;case"power":m=e.power_consumption,p="Power",b="W";break;case"efficiency":m=e.efficiency*100,p="Eff",b="%";break}let C=o[r].text;v==="temperature"&&m>80?C=o[r].loss:v==="hashrate"&&e.status==="mining"&&(C=o[r].profit),a.fillStyle=C,a.fillText(`${p}: ${m.toFixed(1)}${b}`,n*10,x*10),a.fillText(`Shares: ${e.shares_accepted}/${e.shares_found}`,n*10,(x+1)*10)},K=()=>{a.fillStyle=o[r].block,["┌───────────┐","│  MINING   │","│   POOL    │","│ ◇◇◇◇◇◇◇◇ │","│ STRATUM   │","└───────────┘"].forEach((u,c)=>{a.fillText(u,85*10,(12+c)*10)}),a.fillStyle=o[r].text,a.fillText("POOL SERVER",85*10,11*10),a.fillText(`Difficulty: ${(g.current.difficulty/1e12).toFixed(1)}T`,85*10,19*10)},q=()=>{a.fillStyle=o[r].text,a.fillText("┌─ RECENT BLOCKS ─┐",10,25*10),y.current.forEach((n,f)=>{if(f>=8)return;let u=o[r].block;n.status==="confirmed"?u=o[r].profit:n.status==="orphaned"&&(u=o[r].loss),a.fillStyle=u;const c=26+f,t=(Date.now()-n.timestamp)/6e4;a.fillText(`│ #${n.height} ${n.hash.substring(0,16)}... ${t.toFixed(0)}m ago ${n.status}`,10,c*10),a.fillText(`│ Reward: ${n.reward} BTC | Txs: ${n.transaction_count} | Miner: ${n.miner_id}`,10,(c+.5)*10)}),a.fillStyle=o[r].text,a.fillText("└──────────────────┘",10,34*10)},V=()=>{if(!A)return;const e=10;w.current.forEach(i=>{let n="●",f=o[r].hash;i.type==="solution"?(n="★",f=o[r].block):i.type==="stale"&&(n="✕",f=o[r].loss),a.fillStyle=f,a.fillText(n,i.x*e,i.y*e)})},J=()=>{const e=g.current,i=Array.from(N.current.values()),n=i.reduce((x,m)=>x+m.power_consumption,0),f=i.filter(x=>x.status==="mining").length,u=i.reduce((x,m)=>x+m.temperature,0)/i.length;a.fillStyle=o[r].text;const c=l.height-120;a.fillText("┌─ MINING FARM DASHBOARD ─┐",10,c),a.fillText(`│ Total Hashrate: ${(e.total_hashrate/1e6).toFixed(1)} MH/s | Active Rigs: ${f}/${i.length}`,10,c+15),a.fillText(`│ Power Consumption: ${(n/1e3).toFixed(1)} kW | Avg Temp: ${u.toFixed(1)}°C`,10,c+30),a.fillText(`│ BTC Price: $${e.price.toFixed(0)} | Electricity: $${j}/kWh`,10,c+45);const t=e.profit_per_day>0?o[r].profit:o[r].loss;a.fillStyle=t,a.fillText(`│ Daily Profit: $${e.profit_per_day.toFixed(2)} | Pool Mode: ${_?"ON":"SOLO"}`,10,c+60),a.fillStyle=o[r].text,a.fillText("└─────────────────────────┘",10,c+75)},k=()=>{if(!F)return;const e=o[r];a.fillStyle=e.bg,a.fillRect(0,0,l.width,l.height),a.font='10px "Courier New", monospace',a.textBaseline="top",Math.random()<.1*S&&Y(),L(),N.current.forEach(i=>U(i)),_&&K(),q(),V(),J(),T.current=requestAnimationFrame(k)};return d(),window.addEventListener("resize",d),F&&k(),()=>{window.removeEventListener("resize",d),T.current&&cancelAnimationFrame(T.current)}},[F,S,v,r,A,R,j,_]),s.jsxs("div",{className:"flex flex-col h-screen bg-black",children:[s.jsxs("div",{className:"flex-shrink-0 bg-gray-900 p-4 border-b border-gray-700",children:[s.jsx("h1",{className:"text-2xl font-bold text-green-400 mb-4",children:"⛏️ ASCII Blockchain Mining Farm"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-sm mb-4",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-green-300 mb-2",children:"Animation"}),s.jsx("button",{onClick:()=>z(!F),className:`px-3 py-2 rounded font-medium transition-colors ${F?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:F?"Pause":"Play"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-green-300 mb-2",children:["Speed: ",S.toFixed(1),"x"]}),s.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:S,onChange:l=>E(Number.parseFloat(l.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-green-300 mb-2",children:["Mining Intensity: ",Math.round(R*100),"%"]}),s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:R,onChange:l=>W(Number.parseFloat(l.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"text-green-300 mb-2",children:["Electricity: $",j,"/kWh"]}),s.jsx("input",{type:"range",min:"0.05",max:"0.25",step:"0.01",value:j,onChange:l=>B(Number.parseFloat(l.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-green-300 mb-2",children:"Display Mode"}),s.jsxs("select",{value:v,onChange:l=>D(l.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[s.jsx("option",{value:"hashrate",children:"Hashrate"}),s.jsx("option",{value:"temperature",children:"Temperature"}),s.jsx("option",{value:"power",children:"Power"}),s.jsx("option",{value:"efficiency",children:"Efficiency"})]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-green-300 mb-2",children:"Color Scheme"}),s.jsxs("select",{value:r,onChange:l=>G(l.target.value),className:"px-2 py-1 bg-gray-800 text-green-300 rounded border border-gray-600",children:[s.jsx("option",{value:"crypto",children:"Crypto Green"}),s.jsx("option",{value:"gold",children:"Digital Gold"}),s.jsx("option",{value:"matrix",children:"Matrix"}),s.jsx("option",{value:"neon",children:"Neon"})]})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-green-300 mb-2",children:"Pool Mining"}),s.jsx("button",{onClick:()=>O(!_),className:`px-3 py-2 rounded font-medium transition-colors ${_?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:_?"Pool":"Solo"})]}),s.jsx("div",{className:"flex flex-col",children:s.jsxs("label",{className:"flex items-center text-green-300 text-xs",children:[s.jsx("input",{type:"checkbox",checked:A,onChange:l=>H(l.target.checked),className:"mr-1"}),"Hash Particles"]})})]}),s.jsxs("div",{className:"mt-4 text-green-400 text-sm",children:[s.jsxs("p",{children:["⛏️ ",s.jsx("strong",{children:"Real-time crypto mining farm simulation"})," with GPU rigs and ASIC miners!"]}),s.jsxs("p",{children:["📊"," ",s.jsx("strong",{children:"Monitor hashrates, temperatures, and profitability"})," ","across multiple mining hardware types!"]}),s.jsxs("p",{children:["💰 ",s.jsx("strong",{children:"Track block rewards and pool shares"})," with dynamic difficulty and BTC price changes!"]}),s.jsx("p",{children:"Watch hash particles flow from rigs to pool servers and observe real mining economics"})]})]}),s.jsx("div",{className:"flex-1 relative",children:s.jsx("canvas",{ref:P,className:"absolute inset-0 w-full h-full",style:{background:o[r].bg}})})]})};export{se as component};
